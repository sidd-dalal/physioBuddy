function tw(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function nw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xh={exports:{}},Sa={},Jh={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function rw(){if(Wm)return De;Wm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function k(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function F(V,W,pe){this.props=V,this.context=W,this.refs=H,this.updater=pe||B}F.prototype.isReactComponent={},F.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},F.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ne(){}ne.prototype=F.prototype;function oe(V,W,pe){this.props=V,this.context=W,this.refs=H,this.updater=pe||B}var ae=oe.prototype=new ne;ae.constructor=oe,q(ae,F.prototype),ae.isPureReactComponent=!0;var we=Array.isArray,Me=Object.prototype.hasOwnProperty,ke={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(V,W,pe){var xe,Pe={},Te=null,Ne=null;if(W!=null)for(xe in W.ref!==void 0&&(Ne=W.ref),W.key!==void 0&&(Te=""+W.key),W)Me.call(W,xe)&&!N.hasOwnProperty(xe)&&(Pe[xe]=W[xe]);var be=arguments.length-2;if(be===1)Pe.children=pe;else if(1<be){for(var qe=Array(be),ft=0;ft<be;ft++)qe[ft]=arguments[ft+2];Pe.children=qe}if(V&&V.defaultProps)for(xe in be=V.defaultProps,be)Pe[xe]===void 0&&(Pe[xe]=be[xe]);return{$$typeof:r,type:V,key:Te,ref:Ne,props:Pe,_owner:ke.current}}function R(V,W){return{$$typeof:r,type:V.type,key:W,ref:V.ref,props:V.props,_owner:V._owner}}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function O(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(pe){return W[pe]})}var L=/\/+/g;function A(V,W){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):W.toString(36)}function rt(V,W,pe,xe,Pe){var Te=typeof V;(Te==="undefined"||Te==="boolean")&&(V=null);var Ne=!1;if(V===null)Ne=!0;else switch(Te){case"string":case"number":Ne=!0;break;case"object":switch(V.$$typeof){case r:case e:Ne=!0}}if(Ne)return Ne=V,Pe=Pe(Ne),V=xe===""?"."+A(Ne,0):xe,we(Pe)?(pe="",V!=null&&(pe=V.replace(L,"$&/")+"/"),rt(Pe,W,pe,"",function(ft){return ft})):Pe!=null&&(x(Pe)&&(Pe=R(Pe,pe+(!Pe.key||Ne&&Ne.key===Pe.key?"":(""+Pe.key).replace(L,"$&/")+"/")+V)),W.push(Pe)),1;if(Ne=0,xe=xe===""?".":xe+":",we(V))for(var be=0;be<V.length;be++){Te=V[be];var qe=xe+A(Te,be);Ne+=rt(Te,W,pe,qe,Pe)}else if(qe=k(V),typeof qe=="function")for(V=qe.call(V),be=0;!(Te=V.next()).done;)Te=Te.value,qe=xe+A(Te,be++),Ne+=rt(Te,W,pe,qe,Pe);else if(Te==="object")throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Ne}function St(V,W,pe){if(V==null)return V;var xe=[],Pe=0;return rt(V,xe,"","",function(Te){return W.call(pe,Te,Pe++)}),xe}function yt(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(pe){(V._status===0||V._status===-1)&&(V._status=1,V._result=pe)},function(pe){(V._status===0||V._status===-1)&&(V._status=2,V._result=pe)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var $e={current:null},te={transition:null},me={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:te,ReactCurrentOwner:ke};function ie(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:St,forEach:function(V,W,pe){St(V,function(){W.apply(this,arguments)},pe)},count:function(V){var W=0;return St(V,function(){W++}),W},toArray:function(V){return St(V,function(W){return W})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},De.Component=F,De.Fragment=t,De.Profiler=o,De.PureComponent=oe,De.StrictMode=s,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,De.act=ie,De.cloneElement=function(V,W,pe){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var xe=q({},V.props),Pe=V.key,Te=V.ref,Ne=V._owner;if(W!=null){if(W.ref!==void 0&&(Te=W.ref,Ne=ke.current),W.key!==void 0&&(Pe=""+W.key),V.type&&V.type.defaultProps)var be=V.type.defaultProps;for(qe in W)Me.call(W,qe)&&!N.hasOwnProperty(qe)&&(xe[qe]=W[qe]===void 0&&be!==void 0?be[qe]:W[qe])}var qe=arguments.length-2;if(qe===1)xe.children=pe;else if(1<qe){be=Array(qe);for(var ft=0;ft<qe;ft++)be[ft]=arguments[ft+2];xe.children=be}return{$$typeof:r,type:V.type,key:Pe,ref:Te,props:xe,_owner:Ne}},De.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},De.createElement=I,De.createFactory=function(V){var W=I.bind(null,V);return W.type=V,W},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:f,render:V}},De.isValidElement=x,De.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:yt}},De.memo=function(V,W){return{$$typeof:v,type:V,compare:W===void 0?null:W}},De.startTransition=function(V){var W=te.transition;te.transition={};try{V()}finally{te.transition=W}},De.unstable_act=ie,De.useCallback=function(V,W){return $e.current.useCallback(V,W)},De.useContext=function(V){return $e.current.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V){return $e.current.useDeferredValue(V)},De.useEffect=function(V,W){return $e.current.useEffect(V,W)},De.useId=function(){return $e.current.useId()},De.useImperativeHandle=function(V,W,pe){return $e.current.useImperativeHandle(V,W,pe)},De.useInsertionEffect=function(V,W){return $e.current.useInsertionEffect(V,W)},De.useLayoutEffect=function(V,W){return $e.current.useLayoutEffect(V,W)},De.useMemo=function(V,W){return $e.current.useMemo(V,W)},De.useReducer=function(V,W,pe){return $e.current.useReducer(V,W,pe)},De.useRef=function(V){return $e.current.useRef(V)},De.useState=function(V){return $e.current.useState(V)},De.useSyncExternalStore=function(V,W,pe){return $e.current.useSyncExternalStore(V,W,pe)},De.useTransition=function(){return $e.current.useTransition()},De.version="18.3.1",De}var Hm;function Bd(){return Hm||(Hm=1,Jh.exports=rw()),Jh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function iw(){if(qm)return Sa;qm=1;var r=Bd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,v){var w,T={},k=null,B=null;v!==void 0&&(k=""+v),g.key!==void 0&&(k=""+g.key),g.ref!==void 0&&(B=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:f,key:k,ref:B,props:T,_owner:o.current}}return Sa.Fragment=t,Sa.jsx=h,Sa.jsxs=h,Sa}var Km;function sw(){return Km||(Km=1,Xh.exports=iw()),Xh.exports}var P=sw(),K=Bd();const wy=nw(K),ow=tw({__proto__:null,default:wy},[K]);var Iu={},Zh={exports:{}},an={},ed={exports:{}},td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function aw(){return Gm||(Gm=1,function(r){function e(te,me){var ie=te.length;te.push(me);e:for(;0<ie;){var V=ie-1>>>1,W=te[V];if(0<o(W,me))te[V]=me,te[ie]=W,ie=V;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var me=te[0],ie=te.pop();if(ie!==me){te[0]=ie;e:for(var V=0,W=te.length,pe=W>>>1;V<pe;){var xe=2*(V+1)-1,Pe=te[xe],Te=xe+1,Ne=te[Te];if(0>o(Pe,ie))Te<W&&0>o(Ne,Pe)?(te[V]=Ne,te[Te]=ie,V=Te):(te[V]=Pe,te[xe]=ie,V=xe);else if(Te<W&&0>o(Ne,ie))te[V]=Ne,te[Te]=ie,V=Te;else break e}}return me}function o(te,me){var ie=te.sortIndex-me.sortIndex;return ie!==0?ie:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],v=[],w=1,T=null,k=3,B=!1,q=!1,H=!1,F=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(te){for(var me=t(v);me!==null;){if(me.callback===null)s(v);else if(me.startTime<=te)s(v),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(v)}}function we(te){if(H=!1,ae(te),!q)if(t(g)!==null)q=!0,yt(Me);else{var me=t(v);me!==null&&$e(we,me.startTime-te)}}function Me(te,me){q=!1,H&&(H=!1,ne(I),I=-1),B=!0;var ie=k;try{for(ae(me),T=t(g);T!==null&&(!(T.expirationTime>me)||te&&!O());){var V=T.callback;if(typeof V=="function"){T.callback=null,k=T.priorityLevel;var W=V(T.expirationTime<=me);me=r.unstable_now(),typeof W=="function"?T.callback=W:T===t(g)&&s(g),ae(me)}else s(g);T=t(g)}if(T!==null)var pe=!0;else{var xe=t(v);xe!==null&&$e(we,xe.startTime-me),pe=!1}return pe}finally{T=null,k=ie,B=!1}}var ke=!1,N=null,I=-1,R=5,x=-1;function O(){return!(r.unstable_now()-x<R)}function L(){if(N!==null){var te=r.unstable_now();x=te;var me=!0;try{me=N(!0,te)}finally{me?A():(ke=!1,N=null)}}else ke=!1}var A;if(typeof oe=="function")A=function(){oe(L)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,St=rt.port2;rt.port1.onmessage=L,A=function(){St.postMessage(null)}}else A=function(){F(L,0)};function yt(te){N=te,ke||(ke=!0,A())}function $e(te,me){I=F(function(){te(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){q||B||(q=!0,yt(Me))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(te){switch(k){case 1:case 2:case 3:var me=3;break;default:me=k}var ie=k;k=me;try{return te()}finally{k=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=k;k=te;try{return me()}finally{k=ie}},r.unstable_scheduleCallback=function(te,me,ie){var V=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,te={id:w++,callback:me,priorityLevel:te,startTime:ie,expirationTime:W,sortIndex:-1},ie>V?(te.sortIndex=ie,e(v,te),t(g)===null&&te===t(v)&&(H?(ne(I),I=-1):H=!0,$e(we,ie-V))):(te.sortIndex=W,e(g,te),q||B||(q=!0,yt(Me))),te},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(te){var me=k;return function(){var ie=k;k=me;try{return te.apply(this,arguments)}finally{k=ie}}}}(td)),td}var Qm;function lw(){return Qm||(Qm=1,ed.exports=aw()),ed.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function uw(){if(Ym)return an;Ym=1;var r=Bd(),e=lw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function k(n){return g.call(T,n)?!0:g.call(w,n)?!1:v.test(n)?T[n]=!0:(w[n]=!0,!1)}function B(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||B(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function H(n,i,a,c,d,m,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];F[i]=new H(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function oe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ne,oe);F[i]=new H(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ne,oe);F[i]=new H(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ne,oe);F[i]=new H(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function ae(n,i,a,c){var d=F.hasOwnProperty(i)?F[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?k(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var we=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Me=Symbol.for("react.element"),ke=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,V;function W(n){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+n}var pe=!1;function xe(n,i){if(!n||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var c=j}Reflect.construct(n,[],i)}else{try{i.call()}catch(j){c=j}n.call(i.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var d=j.stack.split(`
`),m=c.stack.split(`
`),_=d.length-1,S=m.length-1;1<=_&&0<=S&&d[_]!==m[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==m[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==m[S]){var C=`
`+d[_].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=_&&0<=S);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function Pe(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function Te(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case ke:return"Portal";case R:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case rt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case L:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case St:return i=n.displayName||null,i!==null?i:Te(n.type)||"Memo";case yt:i=n._payload,n=n._init;try{return Te(n(i))}catch{}}return null}function Ne(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ft(n){var i=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,m.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function wn(n){n._valueTracker||(n._valueTracker=ft(n))}function rr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Ln(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function un(n,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ir(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=be(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Mn(n,i){i=i.checked,i!=null&&ae(n,"checked",i,!1)}function Wi(n,i){Mn(n,i);var a=be(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Xr(n,i.type,a):i.hasOwnProperty("defaultValue")&&Xr(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yr(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Xr(n,i,a){(i!=="number"||Ln(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Tn=Array.isArray;function cn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+be(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function vt(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sr(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Tn(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:be(a)}}function bn(n,i){var a=be(i.value),c=be(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function In(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?lt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fn,Hi=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Fn=Fn||document.createElement("div"),Fn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function hn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tr=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(n){Tr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),wr[i]=wr[n]})});function qi(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||wr.hasOwnProperty(n)&&wr[n]?(""+i).trim():i+"px"}function Ki(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=qi(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Gi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qi(n,i){if(i){if(Gi[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Yi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function Jr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zr=null,Jt=null,Sn=null;function ei(n){if(n=ua(n)){if(typeof Zr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Fl(i),Zr(n.stateNode,n.type,i))}}function An(n){Jt?Sn?Sn.push(n):Sn=[n]:Jt=n}function Xi(){if(Jt){var n=Jt,i=Sn;if(Sn=Jt=null,ei(n),i)for(n=0;n<i.length;n++)ei(i[n])}}function Ir(n,i){return n(i)}function $(){}var re=!1;function ge(n,i,a){if(re)return n(i,a);re=!0;try{return Ir(n,i,a)}finally{re=!1,(Jt!==null||Sn!==null)&&($(),Xi())}}function ce(n,i){var a=n.stateNode;if(a===null)return null;var c=Fl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ge=!1;if(f)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Ge=!1}function Ji(n,i,a,c,d,m,_,S,C){var j=Array.prototype.slice.call(arguments,3);try{i.apply(a,j)}catch(Q){this.onError(Q)}}var Zi=!1,Ds=null,jn=!1,$o=null,Ac={onError:function(n){Zi=!0,Ds=n}};function Os(n,i,a,c,d,m,_,S,C){Zi=!1,Ds=null,Ji.apply(Ac,arguments)}function ul(n,i,a,c,d,m,_,S,C){if(Os.apply(this,arguments),Zi){if(Zi){var j=Ds;Zi=!1,Ds=null}else throw Error(t(198));jn||(jn=!0,$o=j)}}function Bn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function es(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function zn(n){if(Bn(n)!==n)throw Error(t(188))}function cl(n){var i=n.alternate;if(!i){if(i=Bn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return zn(d),n;if(m===c)return zn(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,c=m;break}if(S===c){_=!0,c=d,a=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===a){_=!0,a=m,c=d;break}if(S===c){_=!0,c=m,a=d;break}S=S.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Wo(n){return n=cl(n),n!==null?Vs(n):null}function Vs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Vs(n);if(i!==null)return i;n=n.sibling}return null}var Ls=e.unstable_scheduleCallback,Ho=e.unstable_cancelCallback,hl=e.unstable_shouldYield,Rc=e.unstable_requestPaint,Qe=e.unstable_now,dl=e.unstable_getCurrentPriorityLevel,ts=e.unstable_ImmediatePriority,ti=e.unstable_UserBlockingPriority,Rn=e.unstable_NormalPriority,qo=e.unstable_LowPriority,fl=e.unstable_IdlePriority,ns=null,dn=null;function pl(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(ns,n,void 0,(n.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:gl,Ko=Math.log,ml=Math.LN2;function gl(n){return n>>>=0,n===0?32:31-(Ko(n)/ml|0)|0}var Ms=64,bs=4194304;function ni(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function rs(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,_=a&268435455;if(_!==0){var S=_&~d;S!==0?c=ni(S):(m&=_,m!==0&&(c=ni(m)))}else _=a&~d,_!==0?c=ni(_):m!==0&&(c=ni(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Gt(i),d=1<<a,c|=n[a],i&=~d;return c}function Cc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var _=31-Gt(m),S=1<<_,C=d[_];C===-1?((S&a)===0||(S&c)!==0)&&(d[_]=Cc(S,i)):C<=i&&(n.expiredLanes|=S),m&=~S}}function fn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function is(){var n=Ms;return Ms<<=1,(Ms&4194240)===0&&(Ms=64),n}function ri(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ii(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Gt(i),n[i]=a}function Ke(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Gt(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function si(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Gt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ve=0;function oi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var yl,Fs,vl,_l,El,Go=!1,or=[],Nt=null,$n=null,Wn=null,ai=new Map,Cn=new Map,ar=[],Pc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wl(n,i){switch(n){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":ai.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(i.pointerId)}}function Zt(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=ua(i),i!==null&&Fs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function kc(n,i,a,c,d){switch(i){case"focusin":return Nt=Zt(Nt,n,i,a,c,d),!0;case"dragenter":return $n=Zt($n,n,i,a,c,d),!0;case"mouseover":return Wn=Zt(Wn,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return ai.set(m,Zt(ai.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,Cn.set(m,Zt(Cn.get(m)||null,n,i,a,c,d)),!0}return!1}function Tl(n){var i=us(n.target);if(i!==null){var a=Bn(i);if(a!==null){if(i=a.tag,i===13){if(i=es(a),i!==null){n.blockedOn=i,El(n.priority,function(){vl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ar(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Us(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Un=c,a.target.dispatchEvent(c),Un=null}else return i=ua(a),i!==null&&Fs(i),n.blockedOn=a,!1;i.shift()}return!0}function ss(n,i,a){Ar(n)&&a.delete(i)}function Il(){Go=!1,Nt!==null&&Ar(Nt)&&(Nt=null),$n!==null&&Ar($n)&&($n=null),Wn!==null&&Ar(Wn)&&(Wn=null),ai.forEach(ss),Cn.forEach(ss)}function Hn(n,i){n.blockedOn===i&&(n.blockedOn=null,Go||(Go=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Il)))}function qn(n){function i(d){return Hn(d,n)}if(0<or.length){Hn(or[0],n);for(var a=1;a<or.length;a++){var c=or[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Nt!==null&&Hn(Nt,n),$n!==null&&Hn($n,n),Wn!==null&&Hn(Wn,n),ai.forEach(i),Cn.forEach(i),a=0;a<ar.length;a++)c=ar[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)Tl(a),a.blockedOn===null&&ar.shift()}var Rr=we.ReactCurrentBatchConfig,li=!0;function et(n,i,a,c){var d=Ve,m=Rr.transition;Rr.transition=null;try{Ve=1,Qo(n,i,a,c)}finally{Ve=d,Rr.transition=m}}function xc(n,i,a,c){var d=Ve,m=Rr.transition;Rr.transition=null;try{Ve=4,Qo(n,i,a,c)}finally{Ve=d,Rr.transition=m}}function Qo(n,i,a,c){if(li){var d=Us(n,i,a,c);if(d===null)Bc(n,i,c,os,a),wl(n,c);else if(kc(d,n,i,a,c))c.stopPropagation();else if(wl(n,c),i&4&&-1<Pc.indexOf(n)){for(;d!==null;){var m=ua(d);if(m!==null&&yl(m),m=Us(n,i,a,c),m===null&&Bc(n,i,c,os,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Bc(n,i,c,null,a)}}var os=null;function Us(n,i,a,c){if(os=null,n=Jr(c),n=us(n),n!==null)if(i=Bn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=es(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return os=n,null}function Yo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dl()){case ts:return 1;case ti:return 4;case Rn:case qo:return 16;case fl:return 536870912;default:return 16}default:return 16}}var pn=null,js=null,en=null;function Xo(){if(en)return en;var n,i=js,a=i.length,c,d="value"in pn?pn.value:pn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&i[a-c]===d[m-c];c++);return en=d.slice(n,1<c?1-c:void 0)}function Bs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function lr(){return!0}function Jo(){return!1}function Dt(n){function i(a,c,d,m,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?lr:Jo,this.isPropagationStopped=Jo,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=Dt(Kn),ur=ie({},Kn,{view:0,detail:0}),Nc=Dt(ur),$s,Cr,ui,as=ie({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?($s=n.screenX-ui.screenX,Cr=n.screenY-ui.screenY):Cr=$s=0,ui=n),$s)},movementY:function(n){return"movementY"in n?n.movementY:Cr}}),Ws=Dt(as),Zo=ie({},as,{dataTransfer:0}),Sl=Dt(Zo),Hs=ie({},ur,{relatedTarget:0}),qs=Dt(Hs),Al=ie({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Pr=Dt(Al),Rl=ie({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cl=Dt(Rl),Pl=ie({},Kn,{data:0}),ea=Dt(Pl),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=kl[n])?!!i[n]:!1}function cr(){return xl}var u=ie({},ur,{key:function(n){if(n.key){var i=Ks[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Bs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cr,charCode:function(n){return n.type==="keypress"?Bs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Dt(u),y=ie({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Dt(y),M=ie({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cr}),z=Dt(M),ee=ie({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Dt(ee),_t=ie({},as,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Dt(_t),At=[9,13,27,32],pt=f&&"CompositionEvent"in window,Pn=null;f&&"documentMode"in document&&(Pn=document.documentMode);var mn=f&&"TextEvent"in window&&!Pn,ls=f&&(!pt||Pn&&8<Pn&&11>=Pn),Gs=" ",Ff=!1;function Uf(n,i){switch(n){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qs=!1;function J_(n,i){switch(n){case"compositionend":return jf(i);case"keypress":return i.which!==32?null:(Ff=!0,Gs);case"textInput":return n=i.data,n===Gs&&Ff?null:n;default:return null}}function Z_(n,i){if(Qs)return n==="compositionend"||!pt&&Uf(n,i)?(n=Xo(),en=js=pn=null,Qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ls&&i.locale!=="ko"?null:i.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!eE[n.type]:i==="textarea"}function zf(n,i,a,c){An(c),i=Ll(i,"onChange"),0<i.length&&(a=new zs("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ta=null,na=null;function tE(n){op(n,0)}function Nl(n){var i=eo(n);if(rr(i))return n}function nE(n,i){if(n==="change")return i}var $f=!1;if(f){var Dc;if(f){var Oc="oninput"in document;if(!Oc){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),Oc=typeof Wf.oninput=="function"}Dc=Oc}else Dc=!1;$f=Dc&&(!document.documentMode||9<document.documentMode)}function Hf(){ta&&(ta.detachEvent("onpropertychange",qf),na=ta=null)}function qf(n){if(n.propertyName==="value"&&Nl(na)){var i=[];zf(i,na,n,Jr(n)),ge(tE,i)}}function rE(n,i,a){n==="focusin"?(Hf(),ta=i,na=a,ta.attachEvent("onpropertychange",qf)):n==="focusout"&&Hf()}function iE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nl(na)}function sE(n,i){if(n==="click")return Nl(i)}function oE(n,i){if(n==="input"||n==="change")return Nl(i)}function aE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Gn=typeof Object.is=="function"?Object.is:aE;function ra(n,i){if(Gn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Gn(n[d],i[d]))return!1}return!0}function Kf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gf(n,i){var a=Kf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kf(a)}}function Qf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Qf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Yf(){for(var n=window,i=Ln();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ln(n.document)}return i}function Vc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function lE(n){var i=Yf(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Qf(a.ownerDocument.documentElement,a)){if(c!==null&&Vc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Gf(a,m);var _=Gf(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uE=f&&"documentMode"in document&&11>=document.documentMode,Ys=null,Lc=null,ia=null,Mc=!1;function Xf(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mc||Ys==null||Ys!==Ln(c)||(c=Ys,"selectionStart"in c&&Vc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ia&&ra(ia,c)||(ia=c,c=Ll(Lc,"onSelect"),0<c.length&&(i=new zs("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ys)))}function Dl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Xs={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},bc={},Jf={};f&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Ol(n){if(bc[n])return bc[n];if(!Xs[n])return n;var i=Xs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Jf)return bc[n]=i[a];return n}var Zf=Ol("animationend"),ep=Ol("animationiteration"),tp=Ol("animationstart"),np=Ol("transitionend"),rp=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(n,i){rp.set(n,i),l(i,[n])}for(var Fc=0;Fc<ip.length;Fc++){var Uc=ip[Fc],cE=Uc.toLowerCase(),hE=Uc[0].toUpperCase()+Uc.slice(1);ci(cE,"on"+hE)}ci(Zf,"onAnimationEnd"),ci(ep,"onAnimationIteration"),ci(tp,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(np,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function sp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ul(c,i,void 0,n),n.currentTarget=null}function op(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var _=c.length-1;0<=_;_--){var S=c[_],C=S.instance,j=S.currentTarget;if(S=S.listener,C!==m&&d.isPropagationStopped())break e;sp(d,S,j),m=C}else for(_=0;_<c.length;_++){if(S=c[_],C=S.instance,j=S.currentTarget,S=S.listener,C!==m&&d.isPropagationStopped())break e;sp(d,S,j),m=C}}}if(jn)throw n=$o,jn=!1,$o=null,n}function Je(n,i){var a=i[Kc];a===void 0&&(a=i[Kc]=new Set);var c=n+"__bubble";a.has(c)||(ap(i,n,2,!1),a.add(c))}function jc(n,i,a){var c=0;i&&(c|=4),ap(a,n,c,i)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function oa(n){if(!n[Vl]){n[Vl]=!0,s.forEach(function(a){a!=="selectionchange"&&(dE.has(a)||jc(a,!1,n),jc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Vl]||(i[Vl]=!0,jc("selectionchange",!1,i))}}function ap(n,i,a,c){switch(Yo(i)){case 1:var d=et;break;case 4:d=xc;break;default:d=Qo}a=d.bind(null,i,a,n),d=void 0,!Ge||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Bc(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;_=_.return}for(;S!==null;){if(_=us(S),_===null)return;if(C=_.tag,C===5||C===6){c=m=_;continue e}S=S.parentNode}}c=c.return}ge(function(){var j=m,Q=Jr(a),J=[];e:{var G=rp.get(n);if(G!==void 0){var se=zs,ue=n;switch(n){case"keypress":if(Bs(a)===0)break e;case"keydown":case"keyup":se=p;break;case"focusin":ue="focus",se=qs;break;case"focusout":ue="blur",se=qs;break;case"beforeblur":case"afterblur":se=qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=z;break;case Zf:case ep:case tp:se=Pr;break;case np:se=We;break;case"scroll":se=Nc;break;case"wheel":se=Fe;break;case"copy":case"cut":case"paste":se=Cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=E}var he=(i&4)!==0,ct=!he&&n==="scroll",b=he?G!==null?G+"Capture":null:G;he=[];for(var D=j,U;D!==null;){U=D;var Z=U.stateNode;if(U.tag===5&&Z!==null&&(U=Z,b!==null&&(Z=ce(D,b),Z!=null&&he.push(aa(D,Z,U)))),ct)break;D=D.return}0<he.length&&(G=new se(G,ue,null,a,Q),J.push({event:G,listeners:he}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",G&&a!==Un&&(ue=a.relatedTarget||a.fromElement)&&(us(ue)||ue[kr]))break e;if((se||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,se?(ue=a.relatedTarget||a.toElement,se=j,ue=ue?us(ue):null,ue!==null&&(ct=Bn(ue),ue!==ct||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(se=null,ue=j),se!==ue)){if(he=Ws,Z="onMouseLeave",b="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(he=E,Z="onPointerLeave",b="onPointerEnter",D="pointer"),ct=se==null?G:eo(se),U=ue==null?G:eo(ue),G=new he(Z,D+"leave",se,a,Q),G.target=ct,G.relatedTarget=U,Z=null,us(Q)===j&&(he=new he(b,D+"enter",ue,a,Q),he.target=U,he.relatedTarget=ct,Z=he),ct=Z,se&&ue)t:{for(he=se,b=ue,D=0,U=he;U;U=Js(U))D++;for(U=0,Z=b;Z;Z=Js(Z))U++;for(;0<D-U;)he=Js(he),D--;for(;0<U-D;)b=Js(b),U--;for(;D--;){if(he===b||b!==null&&he===b.alternate)break t;he=Js(he),b=Js(b)}he=null}else he=null;se!==null&&lp(J,G,se,he,!1),ue!==null&&ct!==null&&lp(J,ct,ue,he,!0)}}e:{if(G=j?eo(j):window,se=G.nodeName&&G.nodeName.toLowerCase(),se==="select"||se==="input"&&G.type==="file")var fe=nE;else if(Bf(G))if($f)fe=oE;else{fe=iE;var ve=rE}else(se=G.nodeName)&&se.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(fe=sE);if(fe&&(fe=fe(n,j))){zf(J,fe,a,Q);break e}ve&&ve(n,G,j),n==="focusout"&&(ve=G._wrapperState)&&ve.controlled&&G.type==="number"&&Xr(G,"number",G.value)}switch(ve=j?eo(j):window,n){case"focusin":(Bf(ve)||ve.contentEditable==="true")&&(Ys=ve,Lc=j,ia=null);break;case"focusout":ia=Lc=Ys=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Xf(J,a,Q);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":Xf(J,a,Q)}var _e;if(pt)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Qs?Uf(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(ls&&a.locale!=="ko"&&(Qs||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Qs&&(_e=Xo()):(pn=Q,js="value"in pn?pn.value:pn.textContent,Qs=!0)),ve=Ll(j,Se),0<ve.length&&(Se=new ea(Se,n,null,a,Q),J.push({event:Se,listeners:ve}),_e?Se.data=_e:(_e=jf(a),_e!==null&&(Se.data=_e)))),(_e=mn?J_(n,a):Z_(n,a))&&(j=Ll(j,"onBeforeInput"),0<j.length&&(Q=new ea("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:j}),Q.data=_e))}op(J,i)})}function aa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Ll(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ce(n,a),m!=null&&c.unshift(aa(n,m,d)),m=ce(n,i),m!=null&&c.push(aa(n,m,d))),n=n.return}return c}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lp(n,i,a,c,d){for(var m=i._reactName,_=[];a!==null&&a!==c;){var S=a,C=S.alternate,j=S.stateNode;if(C!==null&&C===c)break;S.tag===5&&j!==null&&(S=j,d?(C=ce(a,m),C!=null&&_.unshift(aa(a,C,S))):d||(C=ce(a,m),C!=null&&_.push(aa(a,C,S)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var fE=/\r\n?/g,pE=/\u0000|\uFFFD/g;function up(n){return(typeof n=="string"?n:""+n).replace(fE,`
`).replace(pE,"")}function Ml(n,i,a){if(i=up(i),up(n)!==i&&a)throw Error(t(425))}function bl(){}var zc=null,$c=null;function Wc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(n){return cp.resolve(null).then(n).catch(yE)}:Hc;function yE(n){setTimeout(function(){throw n})}function qc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),qn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);qn(i)}function hi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function hp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),hr="__reactFiber$"+Zs,la="__reactProps$"+Zs,kr="__reactContainer$"+Zs,Kc="__reactEvents$"+Zs,vE="__reactListeners$"+Zs,_E="__reactHandles$"+Zs;function us(n){var i=n[hr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[kr]||a[hr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=hp(n);n!==null;){if(a=n[hr])return a;n=hp(n)}return i}n=a,a=n.parentNode}return null}function ua(n){return n=n[hr]||n[kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Fl(n){return n[la]||null}var Gc=[],to=-1;function di(n){return{current:n}}function Ze(n){0>to||(n.current=Gc[to],Gc[to]=null,to--)}function Ye(n,i){to++,Gc[to]=n.current,n.current=i}var fi={},jt=di(fi),tn=di(!1),cs=fi;function no(n,i){var a=n.type.contextTypes;if(!a)return fi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function nn(n){return n=n.childContextTypes,n!=null}function Ul(){Ze(tn),Ze(jt)}function dp(n,i,a){if(jt.current!==fi)throw Error(t(168));Ye(jt,i),Ye(tn,a)}function fp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Ne(n)||"Unknown",d));return ie({},a,c)}function jl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fi,cs=jt.current,Ye(jt,n),Ye(tn,tn.current),!0}function pp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=fp(n,i,cs),c.__reactInternalMemoizedMergedChildContext=n,Ze(tn),Ze(jt),Ye(jt,n)):Ze(tn),Ye(tn,a)}var xr=null,Bl=!1,Qc=!1;function mp(n){xr===null?xr=[n]:xr.push(n)}function EE(n){Bl=!0,mp(n)}function pi(){if(!Qc&&xr!==null){Qc=!0;var n=0,i=Ve;try{var a=xr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}xr=null,Bl=!1}catch(d){throw xr!==null&&(xr=xr.slice(n+1)),Ls(ts,pi),d}finally{Ve=i,Qc=!1}}return null}var ro=[],io=0,zl=null,$l=0,kn=[],xn=0,hs=null,Nr=1,Dr="";function ds(n,i){ro[io++]=$l,ro[io++]=zl,zl=n,$l=i}function gp(n,i,a){kn[xn++]=Nr,kn[xn++]=Dr,kn[xn++]=hs,hs=n;var c=Nr;n=Dr;var d=32-Gt(c)-1;c&=~(1<<d),a+=1;var m=32-Gt(i)+d;if(30<m){var _=d-d%5;m=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Nr=1<<32-Gt(i)+d|a<<d|c,Dr=m+n}else Nr=1<<m|a<<d|c,Dr=n}function Yc(n){n.return!==null&&(ds(n,1),gp(n,1,0))}function Xc(n){for(;n===zl;)zl=ro[--io],ro[io]=null,$l=ro[--io],ro[io]=null;for(;n===hs;)hs=kn[--xn],kn[xn]=null,Dr=kn[--xn],kn[xn]=null,Nr=kn[--xn],kn[xn]=null}var gn=null,yn=null,tt=!1,Qn=null;function yp(n,i){var a=Vn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function vp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,gn=n,yn=hi(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,gn=n,yn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=hs!==null?{id:Nr,overflow:Dr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Vn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,gn=n,yn=null,!0):!1;default:return!1}}function Jc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Zc(n){if(tt){var i=yn;if(i){var a=i;if(!vp(n,i)){if(Jc(n))throw Error(t(418));i=hi(a.nextSibling);var c=gn;i&&vp(n,i)?yp(c,a):(n.flags=n.flags&-4097|2,tt=!1,gn=n)}}else{if(Jc(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,gn=n}}}function _p(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gn=n}function Wl(n){if(n!==gn)return!1;if(!tt)return _p(n),tt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Wc(n.type,n.memoizedProps)),i&&(i=yn)){if(Jc(n))throw Ep(),Error(t(418));for(;i;)yp(n,i),i=hi(i.nextSibling)}if(_p(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){yn=hi(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}yn=null}}else yn=gn?hi(n.stateNode.nextSibling):null;return!0}function Ep(){for(var n=yn;n;)n=hi(n.nextSibling)}function so(){yn=gn=null,tt=!1}function eh(n){Qn===null?Qn=[n]:Qn.push(n)}var wE=we.ReactCurrentBatchConfig;function ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(_){var S=d.refs;_===null?delete S[m]:S[m]=_},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Hl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function wp(n){var i=n._init;return i(n._payload)}function Tp(n){function i(b,D){if(n){var U=b.deletions;U===null?(b.deletions=[D],b.flags|=16):U.push(D)}}function a(b,D){if(!n)return null;for(;D!==null;)i(b,D),D=D.sibling;return null}function c(b,D){for(b=new Map;D!==null;)D.key!==null?b.set(D.key,D):b.set(D.index,D),D=D.sibling;return b}function d(b,D){return b=Ti(b,D),b.index=0,b.sibling=null,b}function m(b,D,U){return b.index=U,n?(U=b.alternate,U!==null?(U=U.index,U<D?(b.flags|=2,D):U):(b.flags|=2,D)):(b.flags|=1048576,D)}function _(b){return n&&b.alternate===null&&(b.flags|=2),b}function S(b,D,U,Z){return D===null||D.tag!==6?(D=Hh(U,b.mode,Z),D.return=b,D):(D=d(D,U),D.return=b,D)}function C(b,D,U,Z){var fe=U.type;return fe===N?Q(b,D,U.props.children,Z,U.key):D!==null&&(D.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===yt&&wp(fe)===D.type)?(Z=d(D,U.props),Z.ref=ca(b,D,U),Z.return=b,Z):(Z=mu(U.type,U.key,U.props,null,b.mode,Z),Z.ref=ca(b,D,U),Z.return=b,Z)}function j(b,D,U,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=qh(U,b.mode,Z),D.return=b,D):(D=d(D,U.children||[]),D.return=b,D)}function Q(b,D,U,Z,fe){return D===null||D.tag!==7?(D=Es(U,b.mode,Z,fe),D.return=b,D):(D=d(D,U),D.return=b,D)}function J(b,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Hh(""+D,b.mode,U),D.return=b,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Me:return U=mu(D.type,D.key,D.props,null,b.mode,U),U.ref=ca(b,null,D),U.return=b,U;case ke:return D=qh(D,b.mode,U),D.return=b,D;case yt:var Z=D._init;return J(b,Z(D._payload),U)}if(Tn(D)||me(D))return D=Es(D,b.mode,U,null),D.return=b,D;Hl(b,D)}return null}function G(b,D,U,Z){var fe=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return fe!==null?null:S(b,D,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Me:return U.key===fe?C(b,D,U,Z):null;case ke:return U.key===fe?j(b,D,U,Z):null;case yt:return fe=U._init,G(b,D,fe(U._payload),Z)}if(Tn(U)||me(U))return fe!==null?null:Q(b,D,U,Z,null);Hl(b,U)}return null}function se(b,D,U,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return b=b.get(U)||null,S(D,b,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Me:return b=b.get(Z.key===null?U:Z.key)||null,C(D,b,Z,fe);case ke:return b=b.get(Z.key===null?U:Z.key)||null,j(D,b,Z,fe);case yt:var ve=Z._init;return se(b,D,U,ve(Z._payload),fe)}if(Tn(Z)||me(Z))return b=b.get(U)||null,Q(D,b,Z,fe,null);Hl(D,Z)}return null}function ue(b,D,U,Z){for(var fe=null,ve=null,_e=D,Se=D=0,Pt=null;_e!==null&&Se<U.length;Se++){_e.index>Se?(Pt=_e,_e=null):Pt=_e.sibling;var Be=G(b,_e,U[Se],Z);if(Be===null){_e===null&&(_e=Pt);break}n&&_e&&Be.alternate===null&&i(b,_e),D=m(Be,D,Se),ve===null?fe=Be:ve.sibling=Be,ve=Be,_e=Pt}if(Se===U.length)return a(b,_e),tt&&ds(b,Se),fe;if(_e===null){for(;Se<U.length;Se++)_e=J(b,U[Se],Z),_e!==null&&(D=m(_e,D,Se),ve===null?fe=_e:ve.sibling=_e,ve=_e);return tt&&ds(b,Se),fe}for(_e=c(b,_e);Se<U.length;Se++)Pt=se(_e,b,Se,U[Se],Z),Pt!==null&&(n&&Pt.alternate!==null&&_e.delete(Pt.key===null?Se:Pt.key),D=m(Pt,D,Se),ve===null?fe=Pt:ve.sibling=Pt,ve=Pt);return n&&_e.forEach(function(Ii){return i(b,Ii)}),tt&&ds(b,Se),fe}function he(b,D,U,Z){var fe=me(U);if(typeof fe!="function")throw Error(t(150));if(U=fe.call(U),U==null)throw Error(t(151));for(var ve=fe=null,_e=D,Se=D=0,Pt=null,Be=U.next();_e!==null&&!Be.done;Se++,Be=U.next()){_e.index>Se?(Pt=_e,_e=null):Pt=_e.sibling;var Ii=G(b,_e,Be.value,Z);if(Ii===null){_e===null&&(_e=Pt);break}n&&_e&&Ii.alternate===null&&i(b,_e),D=m(Ii,D,Se),ve===null?fe=Ii:ve.sibling=Ii,ve=Ii,_e=Pt}if(Be.done)return a(b,_e),tt&&ds(b,Se),fe;if(_e===null){for(;!Be.done;Se++,Be=U.next())Be=J(b,Be.value,Z),Be!==null&&(D=m(Be,D,Se),ve===null?fe=Be:ve.sibling=Be,ve=Be);return tt&&ds(b,Se),fe}for(_e=c(b,_e);!Be.done;Se++,Be=U.next())Be=se(_e,b,Se,Be.value,Z),Be!==null&&(n&&Be.alternate!==null&&_e.delete(Be.key===null?Se:Be.key),D=m(Be,D,Se),ve===null?fe=Be:ve.sibling=Be,ve=Be);return n&&_e.forEach(function(ew){return i(b,ew)}),tt&&ds(b,Se),fe}function ct(b,D,U,Z){if(typeof U=="object"&&U!==null&&U.type===N&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Me:e:{for(var fe=U.key,ve=D;ve!==null;){if(ve.key===fe){if(fe=U.type,fe===N){if(ve.tag===7){a(b,ve.sibling),D=d(ve,U.props.children),D.return=b,b=D;break e}}else if(ve.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===yt&&wp(fe)===ve.type){a(b,ve.sibling),D=d(ve,U.props),D.ref=ca(b,ve,U),D.return=b,b=D;break e}a(b,ve);break}else i(b,ve);ve=ve.sibling}U.type===N?(D=Es(U.props.children,b.mode,Z,U.key),D.return=b,b=D):(Z=mu(U.type,U.key,U.props,null,b.mode,Z),Z.ref=ca(b,D,U),Z.return=b,b=Z)}return _(b);case ke:e:{for(ve=U.key;D!==null;){if(D.key===ve)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(b,D.sibling),D=d(D,U.children||[]),D.return=b,b=D;break e}else{a(b,D);break}else i(b,D);D=D.sibling}D=qh(U,b.mode,Z),D.return=b,b=D}return _(b);case yt:return ve=U._init,ct(b,D,ve(U._payload),Z)}if(Tn(U))return ue(b,D,U,Z);if(me(U))return he(b,D,U,Z);Hl(b,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(a(b,D.sibling),D=d(D,U),D.return=b,b=D):(a(b,D),D=Hh(U,b.mode,Z),D.return=b,b=D),_(b)):a(b,D)}return ct}var oo=Tp(!0),Ip=Tp(!1),ql=di(null),Kl=null,ao=null,th=null;function nh(){th=ao=Kl=null}function rh(n){var i=ql.current;Ze(ql),n._currentValue=i}function ih(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function lo(n,i){Kl=n,th=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(rn=!0),n.firstContext=null)}function Nn(n){var i=n._currentValue;if(th!==n)if(n={context:n,memoizedValue:i,next:null},ao===null){if(Kl===null)throw Error(t(308));ao=n,Kl.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return i}var fs=null;function sh(n){fs===null?fs=[n]:fs.push(n)}function Sp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,sh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Or(n,c)}function Or(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var mi=!1;function oh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ap(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Vr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function gi(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Or(n,a)}return d=c.interleaved,d===null?(i.next=i,sh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Or(n,a)}function Gl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,si(n,a)}}function Rp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Ql(n,i,a,c){var d=n.updateQueue;mi=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var C=S,j=C.next;C.next=null,_===null?m=j:_.next=j,_=C;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==_&&(S===null?Q.firstBaseUpdate=j:S.next=j,Q.lastBaseUpdate=C))}if(m!==null){var J=d.baseState;_=0,Q=j=C=null,S=m;do{var G=S.lane,se=S.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,he=S;switch(G=i,se=a,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){J=ue.call(se,J,G);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,G=typeof ue=="function"?ue.call(se,J,G):ue,G==null)break e;J=ie({},J,G);break e;case 2:mi=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else se={eventTime:se,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(j=Q=se,C=J):Q=Q.next=se,_|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(C=J),d.baseState=C,d.firstBaseUpdate=j,d.lastBaseUpdate=Q,i=d.shared.interleaved,i!==null){d=i;do _|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);gs|=_,n.lanes=_,n.memoizedState=J}}function Cp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ha={},dr=di(ha),da=di(ha),fa=di(ha);function ps(n){if(n===ha)throw Error(t(174));return n}function ah(n,i){switch(Ye(fa,i),Ye(da,n),Ye(dr,ha),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ut(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ut(i,n)}Ze(dr),Ye(dr,i)}function uo(){Ze(dr),Ze(da),Ze(fa)}function Pp(n){ps(fa.current);var i=ps(dr.current),a=ut(i,n.type);i!==a&&(Ye(da,n),Ye(dr,a))}function lh(n){da.current===n&&(Ze(dr),Ze(da))}var it=di(0);function Yl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var uh=[];function ch(){for(var n=0;n<uh.length;n++)uh[n]._workInProgressVersionPrimary=null;uh.length=0}var Xl=we.ReactCurrentDispatcher,hh=we.ReactCurrentBatchConfig,ms=0,st=null,Et=null,Rt=null,Jl=!1,pa=!1,ma=0,TE=0;function Bt(){throw Error(t(321))}function dh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Gn(n[a],i[a]))return!1;return!0}function fh(n,i,a,c,d,m){if(ms=m,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Xl.current=n===null||n.memoizedState===null?RE:CE,n=a(c,d),pa){m=0;do{if(pa=!1,ma=0,25<=m)throw Error(t(301));m+=1,Rt=Et=null,i.updateQueue=null,Xl.current=PE,n=a(c,d)}while(pa)}if(Xl.current=tu,i=Et!==null&&Et.next!==null,ms=0,Rt=Et=st=null,Jl=!1,i)throw Error(t(300));return n}function ph(){var n=ma!==0;return ma=0,n}function fr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?st.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Dn(){if(Et===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Rt===null?st.memoizedState:Rt.next;if(i!==null)Rt=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?st.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function ga(n,i){return typeof i=="function"?i(n):i}function mh(n){var i=Dn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var S=_=null,C=null,j=m;do{var Q=j.lane;if((ms&Q)===Q)C!==null&&(C=C.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var J={lane:Q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};C===null?(S=C=J,_=c):C=C.next=J,st.lanes|=Q,gs|=Q}j=j.next}while(j!==null&&j!==m);C===null?_=c:C.next=S,Gn(c,i.memoizedState)||(rn=!0),i.memoizedState=c,i.baseState=_,i.baseQueue=C,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,st.lanes|=m,gs|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function gh(n){var i=Dn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=n(m,_.action),_=_.next;while(_!==d);Gn(m,i.memoizedState)||(rn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function kp(){}function xp(n,i){var a=st,c=Dn(),d=i(),m=!Gn(c.memoizedState,d);if(m&&(c.memoizedState=d,rn=!0),c=c.queue,yh(Op.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,ya(9,Dp.bind(null,a,c,d,i),void 0,null),Ct===null)throw Error(t(349));(ms&30)!==0||Np(a,i,d)}return d}function Np(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Dp(n,i,a,c){i.value=a,i.getSnapshot=c,Vp(i)&&Lp(n)}function Op(n,i,a){return a(function(){Vp(i)&&Lp(n)})}function Vp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Gn(n,a)}catch{return!0}}function Lp(n){var i=Or(n,1);i!==null&&Zn(i,n,1,-1)}function Mp(n){var i=fr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},i.queue=n,n=n.dispatch=AE.bind(null,st,n),[i.memoizedState,n]}function ya(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function bp(){return Dn().memoizedState}function Zl(n,i,a,c){var d=fr();st.flags|=n,d.memoizedState=ya(1|i,a,void 0,c===void 0?null:c)}function eu(n,i,a,c){var d=Dn();c=c===void 0?null:c;var m=void 0;if(Et!==null){var _=Et.memoizedState;if(m=_.destroy,c!==null&&dh(c,_.deps)){d.memoizedState=ya(i,a,m,c);return}}st.flags|=n,d.memoizedState=ya(1|i,a,m,c)}function Fp(n,i){return Zl(8390656,8,n,i)}function yh(n,i){return eu(2048,8,n,i)}function Up(n,i){return eu(4,2,n,i)}function jp(n,i){return eu(4,4,n,i)}function Bp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function zp(n,i,a){return a=a!=null?a.concat([n]):null,eu(4,4,Bp.bind(null,i,n),a)}function vh(){}function $p(n,i){var a=Dn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&dh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Wp(n,i){var a=Dn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&dh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Hp(n,i,a){return(ms&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=a):(Gn(a,i)||(a=is(),st.lanes|=a,gs|=a,n.baseState=!0),i)}function IE(n,i){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=hh.transition;hh.transition={};try{n(!1),i()}finally{Ve=a,hh.transition=c}}function qp(){return Dn().memoizedState}function SE(n,i,a){var c=Ei(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Kp(n))Gp(i,a);else if(a=Sp(n,i,a,c),a!==null){var d=Xt();Zn(a,n,c,d),Qp(a,i,c)}}function AE(n,i,a){var c=Ei(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kp(n))Gp(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,S=m(_,a);if(d.hasEagerState=!0,d.eagerState=S,Gn(S,_)){var C=i.interleaved;C===null?(d.next=d,sh(i)):(d.next=C.next,C.next=d),i.interleaved=d;return}}catch{}finally{}a=Sp(n,i,d,c),a!==null&&(d=Xt(),Zn(a,n,c,d),Qp(a,i,c))}}function Kp(n){var i=n.alternate;return n===st||i!==null&&i===st}function Gp(n,i){pa=Jl=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Qp(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,si(n,a)}}var tu={readContext:Nn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},RE={readContext:Nn,useCallback:function(n,i){return fr().memoizedState=[n,i===void 0?null:i],n},useContext:Nn,useEffect:Fp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Zl(4194308,4,Bp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Zl(4194308,4,n,i)},useInsertionEffect:function(n,i){return Zl(4,2,n,i)},useMemo:function(n,i){var a=fr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=fr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=SE.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var i=fr();return n={current:n},i.memoizedState=n},useState:Mp,useDebugValue:vh,useDeferredValue:function(n){return fr().memoizedState=n},useTransition:function(){var n=Mp(!1),i=n[0];return n=IE.bind(null,n[1]),fr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=st,d=fr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ct===null)throw Error(t(349));(ms&30)!==0||Np(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Fp(Op.bind(null,c,m,n),[n]),c.flags|=2048,ya(9,Dp.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=fr(),i=Ct.identifierPrefix;if(tt){var a=Dr,c=Nr;a=(c&~(1<<32-Gt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=TE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},CE={readContext:Nn,useCallback:$p,useContext:Nn,useEffect:yh,useImperativeHandle:zp,useInsertionEffect:Up,useLayoutEffect:jp,useMemo:Wp,useReducer:mh,useRef:bp,useState:function(){return mh(ga)},useDebugValue:vh,useDeferredValue:function(n){var i=Dn();return Hp(i,Et.memoizedState,n)},useTransition:function(){var n=mh(ga)[0],i=Dn().memoizedState;return[n,i]},useMutableSource:kp,useSyncExternalStore:xp,useId:qp,unstable_isNewReconciler:!1},PE={readContext:Nn,useCallback:$p,useContext:Nn,useEffect:yh,useImperativeHandle:zp,useInsertionEffect:Up,useLayoutEffect:jp,useMemo:Wp,useReducer:gh,useRef:bp,useState:function(){return gh(ga)},useDebugValue:vh,useDeferredValue:function(n){var i=Dn();return Et===null?i.memoizedState=n:Hp(i,Et.memoizedState,n)},useTransition:function(){var n=gh(ga)[0],i=Dn().memoizedState;return[n,i]},useMutableSource:kp,useSyncExternalStore:xp,useId:qp,unstable_isNewReconciler:!1};function Yn(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function _h(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ie({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var nu={isMounted:function(n){return(n=n._reactInternals)?Bn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Xt(),d=Ei(n),m=Vr(c,d);m.payload=i,a!=null&&(m.callback=a),i=gi(n,m,d),i!==null&&(Zn(i,n,d,c),Gl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Xt(),d=Ei(n),m=Vr(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=gi(n,m,d),i!==null&&(Zn(i,n,d,c),Gl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Xt(),c=Ei(n),d=Vr(a,c);d.tag=2,i!=null&&(d.callback=i),i=gi(n,d,c),i!==null&&(Zn(i,n,c,a),Gl(i,n,c))}};function Yp(n,i,a,c,d,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):i.prototype&&i.prototype.isPureReactComponent?!ra(a,c)||!ra(d,m):!0}function Xp(n,i,a){var c=!1,d=fi,m=i.contextType;return typeof m=="object"&&m!==null?m=Nn(m):(d=nn(i)?cs:jt.current,c=i.contextTypes,m=(c=c!=null)?no(n,d):fi),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=nu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function Jp(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&nu.enqueueReplaceState(i,i.state,null)}function Eh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},oh(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=Nn(m):(m=nn(i)?cs:jt.current,d.context=no(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(_h(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&nu.enqueueReplaceState(d,d.state,null),Ql(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,i){try{var a="",c=i;do a+=Pe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function wh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Th(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var kE=typeof WeakMap=="function"?WeakMap:Map;function Zp(n,i,a){a=Vr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){uu||(uu=!0,bh=c),Th(n,i)},a}function em(n,i,a){a=Vr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Th(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Th(n,i),typeof c!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function tm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new kE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=$E.bind(null,n,i,a),i.then(n,n))}function nm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function rm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Vr(-1,1),i.tag=2,gi(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var xE=we.ReactCurrentOwner,rn=!1;function Yt(n,i,a,c){i.child=n===null?Ip(i,null,a,c):oo(i,n.child,a,c)}function im(n,i,a,c,d){a=a.render;var m=i.ref;return lo(i,d),c=fh(n,i,a,c,m,d),a=ph(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lr(n,i,d)):(tt&&a&&Yc(i),i.flags|=1,Yt(n,i,c,d),i.child)}function sm(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Wh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,om(n,i,m,c,d)):(n=mu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(_,c)&&n.ref===i.ref)return Lr(n,i,d)}return i.flags|=1,n=Ti(m,c),n.ref=i.ref,n.return=i,i.child=n}function om(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(ra(m,c)&&n.ref===i.ref)if(rn=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(rn=!0);else return i.lanes=n.lanes,Lr(n,i,d)}return Ih(n,i,a,c,d)}function am(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(fo,vn),vn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(fo,vn),vn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ye(fo,vn),vn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Ye(fo,vn),vn|=c;return Yt(n,i,d,a),i.child}function lm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Ih(n,i,a,c,d){var m=nn(a)?cs:jt.current;return m=no(i,m),lo(i,d),a=fh(n,i,a,c,m,d),c=ph(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lr(n,i,d)):(tt&&c&&Yc(i),i.flags|=1,Yt(n,i,a,d),i.child)}function um(n,i,a,c,d){if(nn(a)){var m=!0;jl(i)}else m=!1;if(lo(i,d),i.stateNode===null)iu(n,i),Xp(i,a,c),Eh(i,a,c,d),c=!0;else if(n===null){var _=i.stateNode,S=i.memoizedProps;_.props=S;var C=_.context,j=a.contextType;typeof j=="object"&&j!==null?j=Nn(j):(j=nn(a)?cs:jt.current,j=no(i,j));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||C!==j)&&Jp(i,_,c,j),mi=!1;var G=i.memoizedState;_.state=G,Ql(i,c,_,d),C=i.memoizedState,S!==c||G!==C||tn.current||mi?(typeof Q=="function"&&(_h(i,a,Q,c),C=i.memoizedState),(S=mi||Yp(i,a,S,c,G,C,j))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=C),_.props=c,_.state=C,_.context=j,c=S):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,Ap(n,i),S=i.memoizedProps,j=i.type===i.elementType?S:Yn(i.type,S),_.props=j,J=i.pendingProps,G=_.context,C=a.contextType,typeof C=="object"&&C!==null?C=Nn(C):(C=nn(a)?cs:jt.current,C=no(i,C));var se=a.getDerivedStateFromProps;(Q=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==J||G!==C)&&Jp(i,_,c,C),mi=!1,G=i.memoizedState,_.state=G,Ql(i,c,_,d);var ue=i.memoizedState;S!==J||G!==ue||tn.current||mi?(typeof se=="function"&&(_h(i,a,se,c),ue=i.memoizedState),(j=mi||Yp(i,a,j,c,G,ue,C)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ue,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ue,C)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),_.props=c,_.state=ue,_.context=C,c=j):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return Sh(n,i,a,c,m,d)}function Sh(n,i,a,c,d,m){lm(n,i);var _=(i.flags&128)!==0;if(!c&&!_)return d&&pp(i,a,!1),Lr(n,i,m);c=i.stateNode,xE.current=i;var S=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&_?(i.child=oo(i,n.child,null,m),i.child=oo(i,null,S,m)):Yt(n,i,S,m),i.memoizedState=c.state,d&&pp(i,a,!0),i.child}function cm(n){var i=n.stateNode;i.pendingContext?dp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&dp(n,i.context,!1),ah(n,i.containerInfo)}function hm(n,i,a,c,d){return so(),eh(d),i.flags|=256,Yt(n,i,a,c),i.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function dm(n,i,a){var c=i.pendingProps,d=it.current,m=!1,_=(i.flags&128)!==0,S;if((S=_)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(it,d&1),n===null)return Zc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=c.children,n=c.fallback,m?(c=i.mode,m=i.child,_={mode:"hidden",children:_},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=_):m=gu(_,c,0,null),n=Es(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=Rh(a),i.memoizedState=Ah,n):Ch(i,_));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return NE(n,i,_,c,S,d,a);if(m){m=c.fallback,_=i.mode,d=n.child,S=d.sibling;var C={mode:"hidden",children:c.children};return(_&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=C,i.deletions=null):(c=Ti(d,C),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?m=Ti(S,m):(m=Es(m,_,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,_=n.child.memoizedState,_=_===null?Rh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=n.childLanes&~a,i.memoizedState=Ah,c}return m=n.child,n=m.sibling,c=Ti(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Ch(n,i){return i=gu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ru(n,i,a,c){return c!==null&&eh(c),oo(i,n.child,null,a),n=Ch(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function NE(n,i,a,c,d,m,_){if(a)return i.flags&256?(i.flags&=-257,c=wh(Error(t(422))),ru(n,i,_,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=gu({mode:"visible",children:c.children},d,0,null),m=Es(m,d,_,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&oo(i,n.child,null,_),i.child.memoizedState=Rh(_),i.memoizedState=Ah,m);if((i.mode&1)===0)return ru(n,i,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,m=Error(t(419)),c=wh(m,c,void 0),ru(n,i,_,c)}if(S=(_&n.childLanes)!==0,rn||S){if(c=Ct,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Or(n,d),Zn(c,n,d,-1))}return $h(),c=wh(Error(t(421))),ru(n,i,_,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=WE.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,yn=hi(d.nextSibling),gn=i,tt=!0,Qn=null,n!==null&&(kn[xn++]=Nr,kn[xn++]=Dr,kn[xn++]=hs,Nr=n.id,Dr=n.overflow,hs=i),i=Ch(i,c.children),i.flags|=4096,i)}function fm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),ih(n.return,i,a)}function Ph(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function pm(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(Yt(n,i,c.children,a),c=it.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fm(n,a,i);else if(n.tag===19)fm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(it,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Yl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Ph(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Yl(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ph(i,!0,a,null,m);break;case"together":Ph(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function iu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Lr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),gs|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Ti(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ti(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function DE(n,i,a){switch(i.tag){case 3:cm(i),so();break;case 5:Pp(i);break;case 1:nn(i.type)&&jl(i);break;case 4:ah(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(ql,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(it,it.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?dm(n,i,a):(Ye(it,it.current&1),n=Lr(n,i,a),n!==null?n.sibling:null);Ye(it,it.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return pm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(it,it.current),c)break;return null;case 22:case 23:return i.lanes=0,am(n,i,a)}return Lr(n,i,a)}var mm,kh,gm,ym;mm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kh=function(){},gm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ps(dr.current);var m=null;switch(a){case"input":d=un(n,d),c=un(n,c),m=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":d=vt(n,d),c=vt(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=bl)}Qi(a,c);var _;a=null;for(j in d)if(!c.hasOwnProperty(j)&&d.hasOwnProperty(j)&&d[j]!=null)if(j==="style"){var S=d[j];for(_ in S)S.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?m||(m=[]):(m=m||[]).push(j,null));for(j in c){var C=c[j];if(S=d?.[j],c.hasOwnProperty(j)&&C!==S&&(C!=null||S!=null))if(j==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in C)C.hasOwnProperty(_)&&S[_]!==C[_]&&(a||(a={}),a[_]=C[_])}else a||(m||(m=[]),m.push(j,a)),a=C;else j==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,S=S?S.__html:void 0,C!=null&&S!==C&&(m=m||[]).push(j,C)):j==="children"?typeof C!="string"&&typeof C!="number"||(m=m||[]).push(j,""+C):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(C!=null&&j==="onScroll"&&Je("scroll",n),m||S===C||(m=[])):(m=m||[]).push(j,C))}a&&(m=m||[]).push("style",a);var j=m;(i.updateQueue=j)&&(i.flags|=4)}},ym=function(n,i,a,c){a!==c&&(i.flags|=4)};function va(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function zt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function OE(n,i,a){var c=i.pendingProps;switch(Xc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(i),null;case 1:return nn(i.type)&&Ul(),zt(i),null;case 3:return c=i.stateNode,uo(),Ze(tn),Ze(jt),ch(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Wl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qn!==null&&(jh(Qn),Qn=null))),kh(n,i),zt(i),null;case 5:lh(i);var d=ps(fa.current);if(a=i.type,n!==null&&i.stateNode!=null)gm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return zt(i),null}if(n=ps(dr.current),Wl(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[hr]=i,c[la]=m,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<sa.length;d++)Je(sa[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":ir(c,m),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Je("invalid",c);break;case"textarea":sr(c,m),Je("invalid",c)}Qi(a,m),d=null;for(var _ in m)if(m.hasOwnProperty(_)){var S=m[_];_==="children"?typeof S=="string"?c.textContent!==S&&(m.suppressHydrationWarning!==!0&&Ml(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&Ml(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&Je("scroll",c)}switch(a){case"input":wn(c),Yr(c,m,!0);break;case"textarea":wn(c),In(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=bl)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[hr]=i,n[la]=c,mm(n,i,!1,!1),i.stateNode=n;e:{switch(_=Yi(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<sa.length;d++)Je(sa[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":ir(n,c),d=un(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),Je("invalid",n);break;case"textarea":sr(n,c),d=vt(n,c),Je("invalid",n);break;default:d=c}Qi(a,d),S=d;for(m in S)if(S.hasOwnProperty(m)){var C=S[m];m==="style"?Ki(n,C):m==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Hi(n,C)):m==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&hn(n,C):typeof C=="number"&&hn(n,""+C):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?C!=null&&m==="onScroll"&&Je("scroll",n):C!=null&&ae(n,m,C,_))}switch(a){case"input":wn(n),Yr(n,c,!1);break;case"textarea":wn(n),In(n);break;case"option":c.value!=null&&n.setAttribute("value",""+be(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?cn(n,!!c.multiple,m,!1):c.defaultValue!=null&&cn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=bl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return zt(i),null;case 6:if(n&&i.stateNode!=null)ym(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ps(fa.current),ps(dr.current),Wl(i)){if(c=i.stateNode,a=i.memoizedProps,c[hr]=i,(m=c.nodeValue!==a)&&(n=gn,n!==null))switch(n.tag){case 3:Ml(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ml(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[hr]=i,i.stateNode=c}return zt(i),null;case 13:if(Ze(it),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&yn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ep(),so(),i.flags|=98560,m=!1;else if(m=Wl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[hr]=i}else so(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),m=!1}else Qn!==null&&(jh(Qn),Qn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(it.current&1)!==0?wt===0&&(wt=3):$h())),i.updateQueue!==null&&(i.flags|=4),zt(i),null);case 4:return uo(),kh(n,i),n===null&&oa(i.stateNode.containerInfo),zt(i),null;case 10:return rh(i.type._context),zt(i),null;case 17:return nn(i.type)&&Ul(),zt(i),null;case 19:if(Ze(it),m=i.memoizedState,m===null)return zt(i),null;if(c=(i.flags&128)!==0,_=m.rendering,_===null)if(c)va(m,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=Yl(n),_!==null){for(i.flags|=128,va(m,!1),c=_.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,n=_.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(it,it.current&1|2),i.child}n=n.sibling}m.tail!==null&&Qe()>po&&(i.flags|=128,c=!0,va(m,!1),i.lanes=4194304)}else{if(!c)if(n=Yl(_),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),va(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!tt)return zt(i),null}else 2*Qe()-m.renderingStartTime>po&&a!==1073741824&&(i.flags|=128,c=!0,va(m,!1),i.lanes=4194304);m.isBackwards?(_.sibling=i.child,i.child=_):(a=m.last,a!==null?a.sibling=_:i.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Qe(),i.sibling=null,a=it.current,Ye(it,c?a&1|2:a&1),i):(zt(i),null);case 22:case 23:return zh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(vn&1073741824)!==0&&(zt(i),i.subtreeFlags&6&&(i.flags|=8192)):zt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function VE(n,i){switch(Xc(i),i.tag){case 1:return nn(i.type)&&Ul(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return uo(),Ze(tn),Ze(jt),ch(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return lh(i),null;case 13:if(Ze(it),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));so()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(it),null;case 4:return uo(),null;case 10:return rh(i.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var su=!1,$t=!1,LE=typeof WeakSet=="function"?WeakSet:Set,le=null;function ho(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,i,c)}else a.current=null}function xh(n,i,a){try{a()}catch(c){at(n,i,c)}}var vm=!1;function ME(n,i){if(zc=li,n=Yf(),Vc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,S=-1,C=-1,j=0,Q=0,J=n,G=null;t:for(;;){for(var se;J!==a||d!==0&&J.nodeType!==3||(S=_+d),J!==m||c!==0&&J.nodeType!==3||(C=_+c),J.nodeType===3&&(_+=J.nodeValue.length),(se=J.firstChild)!==null;)G=J,J=se;for(;;){if(J===n)break t;if(G===a&&++j===d&&(S=_),G===m&&++Q===c&&(C=_),(se=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=se}a=S===-1||C===-1?null:{start:S,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for($c={focusedElem:n,selectionRange:a},li=!1,le=i;le!==null;)if(i=le,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,le=n;else for(;le!==null;){i=le;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,ct=ue.memoizedState,b=i.stateNode,D=b.getSnapshotBeforeUpdate(i.elementType===i.type?he:Yn(i.type,he),ct);b.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){at(i,i.return,Z)}if(n=i.sibling,n!==null){n.return=i.return,le=n;break}le=i.return}return ue=vm,vm=!1,ue}function _a(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&xh(i,a,m)}d=d.next}while(d!==c)}}function ou(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Nh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function _m(n){var i=n.alternate;i!==null&&(n.alternate=null,_m(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[hr],delete i[la],delete i[Kc],delete i[vE],delete i[_E])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Em(n){return n.tag===5||n.tag===3||n.tag===4}function wm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Em(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=bl));else if(c!==4&&(n=n.child,n!==null))for(Dh(n,i,a),n=n.sibling;n!==null;)Dh(n,i,a),n=n.sibling}function Oh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Oh(n,i,a),n=n.sibling;n!==null;)Oh(n,i,a),n=n.sibling}var Ot=null,Xn=!1;function yi(n,i,a){for(a=a.child;a!==null;)Tm(n,i,a),a=a.sibling}function Tm(n,i,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(ns,a)}catch{}switch(a.tag){case 5:$t||ho(a,i);case 6:var c=Ot,d=Xn;Ot=null,yi(n,i,a),Ot=c,Xn=d,Ot!==null&&(Xn?(n=Ot,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ot.removeChild(a.stateNode));break;case 18:Ot!==null&&(Xn?(n=Ot,a=a.stateNode,n.nodeType===8?qc(n.parentNode,a):n.nodeType===1&&qc(n,a),qn(n)):qc(Ot,a.stateNode));break;case 4:c=Ot,d=Xn,Ot=a.stateNode.containerInfo,Xn=!0,yi(n,i,a),Ot=c,Xn=d;break;case 0:case 11:case 14:case 15:if(!$t&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,_=m.destroy;m=m.tag,_!==void 0&&((m&2)!==0||(m&4)!==0)&&xh(a,i,_),d=d.next}while(d!==c)}yi(n,i,a);break;case 1:if(!$t&&(ho(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){at(a,i,S)}yi(n,i,a);break;case 21:yi(n,i,a);break;case 22:a.mode&1?($t=(c=$t)||a.memoizedState!==null,yi(n,i,a),$t=c):yi(n,i,a);break;default:yi(n,i,a)}}function Im(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new LE),i.forEach(function(c){var d=HE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Jn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 5:Ot=S.stateNode,Xn=!1;break e;case 3:Ot=S.stateNode.containerInfo,Xn=!0;break e;case 4:Ot=S.stateNode.containerInfo,Xn=!0;break e}S=S.return}if(Ot===null)throw Error(t(160));Tm(m,_,d),Ot=null,Xn=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(j){at(d,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Sm(i,n),i=i.sibling}function Sm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Jn(i,n),pr(n),c&4){try{_a(3,n,n.return),ou(3,n)}catch(he){at(n,n.return,he)}try{_a(5,n,n.return)}catch(he){at(n,n.return,he)}}break;case 1:Jn(i,n),pr(n),c&512&&a!==null&&ho(a,a.return);break;case 5:if(Jn(i,n),pr(n),c&512&&a!==null&&ho(a,a.return),n.flags&32){var d=n.stateNode;try{hn(d,"")}catch(he){at(n,n.return,he)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,_=a!==null?a.memoizedProps:m,S=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&Mn(d,m),Yi(S,_);var j=Yi(S,m);for(_=0;_<C.length;_+=2){var Q=C[_],J=C[_+1];Q==="style"?Ki(d,J):Q==="dangerouslySetInnerHTML"?Hi(d,J):Q==="children"?hn(d,J):ae(d,Q,J,j)}switch(S){case"input":Wi(d,m);break;case"textarea":bn(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var se=m.value;se!=null?cn(d,!!m.multiple,se,!1):G!==!!m.multiple&&(m.defaultValue!=null?cn(d,!!m.multiple,m.defaultValue,!0):cn(d,!!m.multiple,m.multiple?[]:"",!1))}d[la]=m}catch(he){at(n,n.return,he)}}break;case 6:if(Jn(i,n),pr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(he){at(n,n.return,he)}}break;case 3:if(Jn(i,n),pr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{qn(i.containerInfo)}catch(he){at(n,n.return,he)}break;case 4:Jn(i,n),pr(n);break;case 13:Jn(i,n),pr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Mh=Qe())),c&4&&Im(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?($t=(j=$t)||Q,Jn(i,n),$t=j):Jn(i,n),pr(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!Q&&(n.mode&1)!==0)for(le=n,Q=n.child;Q!==null;){for(J=le=Q;le!==null;){switch(G=le,se=G.child,G.tag){case 0:case 11:case 14:case 15:_a(4,G,G.return);break;case 1:ho(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){c=G,a=G.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(he){at(c,a,he)}}break;case 5:ho(G,G.return);break;case 22:if(G.memoizedState!==null){Cm(J);continue}}se!==null?(se.return=G,le=se):Cm(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,j?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=J.stateNode,C=J.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,S.style.display=qi("display",_))}catch(he){at(n,n.return,he)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=j?"":J.memoizedProps}catch(he){at(n,n.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Jn(i,n),pr(n),c&4&&Im(n);break;case 21:break;default:Jn(i,n),pr(n)}}function pr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Em(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(hn(d,""),c.flags&=-33);var m=wm(n);Oh(n,m,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=wm(n);Dh(n,S,_);break;default:throw Error(t(161))}}catch(C){at(n,n.return,C)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function bE(n,i,a){le=n,Am(n)}function Am(n,i,a){for(var c=(n.mode&1)!==0;le!==null;){var d=le,m=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||su;if(!_){var S=d.alternate,C=S!==null&&S.memoizedState!==null||$t;S=su;var j=$t;if(su=_,($t=C)&&!j)for(le=d;le!==null;)_=le,C=_.child,_.tag===22&&_.memoizedState!==null?Pm(d):C!==null?(C.return=_,le=C):Pm(d);for(;m!==null;)le=m,Am(m),m=m.sibling;le=d,su=S,$t=j}Rm(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,le=m):Rm(n)}}function Rm(n){for(;le!==null;){var i=le;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:$t||ou(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!$t)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Yn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Cp(i,m,c);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Cp(i,_,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var C=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var Q=j.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&qn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||i.flags&512&&Nh(i)}catch(G){at(i,i.return,G)}}if(i===n){le=null;break}if(a=i.sibling,a!==null){a.return=i.return,le=a;break}le=i.return}}function Cm(n){for(;le!==null;){var i=le;if(i===n){le=null;break}var a=i.sibling;if(a!==null){a.return=i.return,le=a;break}le=i.return}}function Pm(n){for(;le!==null;){var i=le;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ou(4,i)}catch(C){at(i,a,C)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(C){at(i,d,C)}}var m=i.return;try{Nh(i)}catch(C){at(i,m,C)}break;case 5:var _=i.return;try{Nh(i)}catch(C){at(i,_,C)}}}catch(C){at(i,i.return,C)}if(i===n){le=null;break}var S=i.sibling;if(S!==null){S.return=i.return,le=S;break}le=i.return}}var FE=Math.ceil,au=we.ReactCurrentDispatcher,Vh=we.ReactCurrentOwner,On=we.ReactCurrentBatchConfig,je=0,Ct=null,mt=null,Vt=0,vn=0,fo=di(0),wt=0,Ea=null,gs=0,lu=0,Lh=0,wa=null,sn=null,Mh=0,po=1/0,Mr=null,uu=!1,bh=null,vi=null,cu=!1,_i=null,hu=0,Ta=0,Fh=null,du=-1,fu=0;function Xt(){return(je&6)!==0?Qe():du!==-1?du:du=Qe()}function Ei(n){return(n.mode&1)===0?1:(je&2)!==0&&Vt!==0?Vt&-Vt:wE.transition!==null?(fu===0&&(fu=is()),fu):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:Yo(n.type)),n)}function Zn(n,i,a,c){if(50<Ta)throw Ta=0,Fh=null,Error(t(185));ii(n,a,c),((je&2)===0||n!==Ct)&&(n===Ct&&((je&2)===0&&(lu|=a),wt===4&&wi(n,Vt)),on(n,c),a===1&&je===0&&(i.mode&1)===0&&(po=Qe()+500,Bl&&pi()))}function on(n,i){var a=n.callbackNode;Sr(n,i);var c=rs(n,n===Ct?Vt:0);if(c===0)a!==null&&Ho(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ho(a),i===1)n.tag===0?EE(xm.bind(null,n)):mp(xm.bind(null,n)),gE(function(){(je&6)===0&&pi()}),a=null;else{switch(oi(c)){case 1:a=ts;break;case 4:a=ti;break;case 16:a=Rn;break;case 536870912:a=fl;break;default:a=Rn}a=Fm(a,km.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function km(n,i){if(du=-1,fu=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var c=rs(n,n===Ct?Vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=pu(n,c);else{i=c;var d=je;je|=2;var m=Dm();(Ct!==n||Vt!==i)&&(Mr=null,po=Qe()+500,vs(n,i));do try{BE();break}catch(S){Nm(n,S)}while(!0);nh(),au.current=m,je=d,mt!==null?i=0:(Ct=null,Vt=0,i=wt)}if(i!==0){if(i===2&&(d=fn(n),d!==0&&(c=d,i=Uh(n,d))),i===1)throw a=Ea,vs(n,0),wi(n,c),on(n,Qe()),a;if(i===6)wi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!UE(d)&&(i=pu(n,c),i===2&&(m=fn(n),m!==0&&(c=m,i=Uh(n,m))),i===1))throw a=Ea,vs(n,0),wi(n,c),on(n,Qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:_s(n,sn,Mr);break;case 3:if(wi(n,c),(c&130023424)===c&&(i=Mh+500-Qe(),10<i)){if(rs(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Xt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Hc(_s.bind(null,n,sn,Mr),i);break}_s(n,sn,Mr);break;case 4:if(wi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var _=31-Gt(c);m=1<<_,_=i[_],_>d&&(d=_),c&=~m}if(c=d,c=Qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*FE(c/1960))-c,10<c){n.timeoutHandle=Hc(_s.bind(null,n,sn,Mr),c);break}_s(n,sn,Mr);break;case 5:_s(n,sn,Mr);break;default:throw Error(t(329))}}}return on(n,Qe()),n.callbackNode===a?km.bind(null,n):null}function Uh(n,i){var a=wa;return n.current.memoizedState.isDehydrated&&(vs(n,i).flags|=256),n=pu(n,i),n!==2&&(i=sn,sn=a,i!==null&&jh(i)),n}function jh(n){sn===null?sn=n:sn.push.apply(sn,n)}function UE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Gn(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function wi(n,i){for(i&=~Lh,i&=~lu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Gt(i),c=1<<a;n[a]=-1,i&=~c}}function xm(n){if((je&6)!==0)throw Error(t(327));mo();var i=rs(n,0);if((i&1)===0)return on(n,Qe()),null;var a=pu(n,i);if(n.tag!==0&&a===2){var c=fn(n);c!==0&&(i=c,a=Uh(n,c))}if(a===1)throw a=Ea,vs(n,0),wi(n,i),on(n,Qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,_s(n,sn,Mr),on(n,Qe()),null}function Bh(n,i){var a=je;je|=1;try{return n(i)}finally{je=a,je===0&&(po=Qe()+500,Bl&&pi())}}function ys(n){_i!==null&&_i.tag===0&&(je&6)===0&&mo();var i=je;je|=1;var a=On.transition,c=Ve;try{if(On.transition=null,Ve=1,n)return n()}finally{Ve=c,On.transition=a,je=i,(je&6)===0&&pi()}}function zh(){vn=fo.current,Ze(fo)}function vs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,mE(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Xc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ul();break;case 3:uo(),Ze(tn),Ze(jt),ch();break;case 5:lh(c);break;case 4:uo();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:rh(c.type._context);break;case 22:case 23:zh()}a=a.return}if(Ct=n,mt=n=Ti(n.current,null),Vt=vn=i,wt=0,Ea=null,Lh=lu=gs=0,sn=wa=null,fs!==null){for(i=0;i<fs.length;i++)if(a=fs[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var _=m.next;m.next=d,c.next=_}a.pending=c}fs=null}return n}function Nm(n,i){do{var a=mt;try{if(nh(),Xl.current=tu,Jl){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Jl=!1}if(ms=0,Rt=Et=st=null,pa=!1,ma=0,Vh.current=null,a===null||a.return===null){wt=1,Ea=i,mt=null;break}e:{var m=n,_=a.return,S=a,C=i;if(i=Vt,S.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var j=C,Q=S,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var se=nm(_);if(se!==null){se.flags&=-257,rm(se,_,S,m,i),se.mode&1&&tm(m,j,i),i=se,C=j;var ue=i.updateQueue;if(ue===null){var he=new Set;he.add(C),i.updateQueue=he}else ue.add(C);break e}else{if((i&1)===0){tm(m,j,i),$h();break e}C=Error(t(426))}}else if(tt&&S.mode&1){var ct=nm(_);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),rm(ct,_,S,m,i),eh(co(C,S));break e}}m=C=co(C,S),wt!==4&&(wt=2),wa===null?wa=[m]:wa.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var b=Zp(m,C,i);Rp(m,b);break e;case 1:S=C;var D=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(vi===null||!vi.has(U)))){m.flags|=65536,i&=-i,m.lanes|=i;var Z=em(m,S,i);Rp(m,Z);break e}}m=m.return}while(m!==null)}Vm(a)}catch(fe){i=fe,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Dm(){var n=au.current;return au.current=tu,n===null?tu:n}function $h(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||(gs&268435455)===0&&(lu&268435455)===0||wi(Ct,Vt)}function pu(n,i){var a=je;je|=2;var c=Dm();(Ct!==n||Vt!==i)&&(Mr=null,vs(n,i));do try{jE();break}catch(d){Nm(n,d)}while(!0);if(nh(),je=a,au.current=c,mt!==null)throw Error(t(261));return Ct=null,Vt=0,wt}function jE(){for(;mt!==null;)Om(mt)}function BE(){for(;mt!==null&&!hl();)Om(mt)}function Om(n){var i=bm(n.alternate,n,vn);n.memoizedProps=n.pendingProps,i===null?Vm(n):mt=i,Vh.current=null}function Vm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=OE(a,i,vn),a!==null){mt=a;return}}else{if(a=VE(a,i),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,mt=null;return}}if(i=i.sibling,i!==null){mt=i;return}mt=i=n}while(i!==null);wt===0&&(wt=5)}function _s(n,i,a){var c=Ve,d=On.transition;try{On.transition=null,Ve=1,zE(n,i,a,c)}finally{On.transition=d,Ve=c}return null}function zE(n,i,a,c){do mo();while(_i!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ke(n,m),n===Ct&&(mt=Ct=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||cu||(cu=!0,Fm(Rn,function(){return mo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=On.transition,On.transition=null;var _=Ve;Ve=1;var S=je;je|=4,Vh.current=null,ME(n,a),Sm(a,n),lE($c),li=!!zc,$c=zc=null,n.current=a,bE(a),Rc(),je=S,Ve=_,On.transition=m}else n.current=a;if(cu&&(cu=!1,_i=n,hu=d),m=n.pendingLanes,m===0&&(vi=null),pl(a.stateNode),on(n,Qe()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(uu)throw uu=!1,n=bh,bh=null,n;return(hu&1)!==0&&n.tag!==0&&mo(),m=n.pendingLanes,(m&1)!==0?n===Fh?Ta++:(Ta=0,Fh=n):Ta=0,pi(),null}function mo(){if(_i!==null){var n=oi(hu),i=On.transition,a=Ve;try{if(On.transition=null,Ve=16>n?16:n,_i===null)var c=!1;else{if(n=_i,_i=null,hu=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,le=n.current;le!==null;){var m=le,_=m.child;if((le.flags&16)!==0){var S=m.deletions;if(S!==null){for(var C=0;C<S.length;C++){var j=S[C];for(le=j;le!==null;){var Q=le;switch(Q.tag){case 0:case 11:case 15:_a(8,Q,m)}var J=Q.child;if(J!==null)J.return=Q,le=J;else for(;le!==null;){Q=le;var G=Q.sibling,se=Q.return;if(_m(Q),Q===j){le=null;break}if(G!==null){G.return=se,le=G;break}le=se}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var ct=he.sibling;he.sibling=null,he=ct}while(he!==null)}}le=m}}if((m.subtreeFlags&2064)!==0&&_!==null)_.return=m,le=_;else e:for(;le!==null;){if(m=le,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:_a(9,m,m.return)}var b=m.sibling;if(b!==null){b.return=m.return,le=b;break e}le=m.return}}var D=n.current;for(le=D;le!==null;){_=le;var U=_.child;if((_.subtreeFlags&2064)!==0&&U!==null)U.return=_,le=U;else e:for(_=D;le!==null;){if(S=le,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:ou(9,S)}}catch(fe){at(S,S.return,fe)}if(S===_){le=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,le=Z;break e}le=S.return}}if(je=d,pi(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(ns,n)}catch{}c=!0}return c}finally{Ve=a,On.transition=i}}return!1}function Lm(n,i,a){i=co(a,i),i=Zp(n,i,1),n=gi(n,i,1),i=Xt(),n!==null&&(ii(n,1,i),on(n,i))}function at(n,i,a){if(n.tag===3)Lm(n,n,a);else for(;i!==null;){if(i.tag===3){Lm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vi===null||!vi.has(c))){n=co(a,n),n=em(i,n,1),i=gi(i,n,1),n=Xt(),i!==null&&(ii(i,1,n),on(i,n));break}}i=i.return}}function $E(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Xt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(Vt&a)===a&&(wt===4||wt===3&&(Vt&130023424)===Vt&&500>Qe()-Mh?vs(n,0):Lh|=a),on(n,i)}function Mm(n,i){i===0&&((n.mode&1)===0?i=1:(i=bs,bs<<=1,(bs&130023424)===0&&(bs=4194304)));var a=Xt();n=Or(n,i),n!==null&&(ii(n,i,a),on(n,a))}function WE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Mm(n,a)}function HE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Mm(n,a)}var bm;bm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||tn.current)rn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return rn=!1,DE(n,i,a);rn=(n.flags&131072)!==0}else rn=!1,tt&&(i.flags&1048576)!==0&&gp(i,$l,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;iu(n,i),n=i.pendingProps;var d=no(i,jt.current);lo(i,a),d=fh(null,i,c,n,d,a);var m=ph();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,nn(c)?(m=!0,jl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,oh(i),d.updater=nu,i.stateNode=d,d._reactInternals=i,Eh(i,c,n,a),i=Sh(null,i,c,!0,m,a)):(i.tag=0,tt&&m&&Yc(i),Yt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(iu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=KE(c),n=Yn(c,n),d){case 0:i=Ih(null,i,c,n,a);break e;case 1:i=um(null,i,c,n,a);break e;case 11:i=im(null,i,c,n,a);break e;case 14:i=sm(null,i,c,Yn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Yn(c,d),Ih(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Yn(c,d),um(n,i,c,d,a);case 3:e:{if(cm(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,Ap(n,i),Ql(i,c,null,a);var _=i.memoizedState;if(c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=co(Error(t(423)),i),i=hm(n,i,c,a,d);break e}else if(c!==d){d=co(Error(t(424)),i),i=hm(n,i,c,a,d);break e}else for(yn=hi(i.stateNode.containerInfo.firstChild),gn=i,tt=!0,Qn=null,a=Ip(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),c===d){i=Lr(n,i,a);break e}Yt(n,i,c,a)}i=i.child}return i;case 5:return Pp(i),n===null&&Zc(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,_=d.children,Wc(c,d)?_=null:m!==null&&Wc(c,m)&&(i.flags|=32),lm(n,i),Yt(n,i,_,a),i.child;case 6:return n===null&&Zc(i),null;case 13:return dm(n,i,a);case 4:return ah(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=oo(i,null,c,a):Yt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Yn(c,d),im(n,i,c,d,a);case 7:return Yt(n,i,i.pendingProps,a),i.child;case 8:return Yt(n,i,i.pendingProps.children,a),i.child;case 12:return Yt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,_=d.value,Ye(ql,c._currentValue),c._currentValue=_,m!==null)if(Gn(m.value,_)){if(m.children===d.children&&!tn.current){i=Lr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var S=m.dependencies;if(S!==null){_=m.child;for(var C=S.firstContext;C!==null;){if(C.context===c){if(m.tag===1){C=Vr(-1,a&-a),C.tag=2;var j=m.updateQueue;if(j!==null){j=j.shared;var Q=j.pending;Q===null?C.next=C:(C.next=Q.next,Q.next=C),j.pending=C}}m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),ih(m.return,a,i),S.lanes|=a;break}C=C.next}}else if(m.tag===10)_=m.type===i.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(t(341));_.lanes|=a,S=_.alternate,S!==null&&(S.lanes|=a),ih(_,a,i),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Yt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,lo(i,a),d=Nn(d),c=c(d),i.flags|=1,Yt(n,i,c,a),i.child;case 14:return c=i.type,d=Yn(c,i.pendingProps),d=Yn(c.type,d),sm(n,i,c,d,a);case 15:return om(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Yn(c,d),iu(n,i),i.tag=1,nn(c)?(n=!0,jl(i)):n=!1,lo(i,a),Xp(i,c,d),Eh(i,c,d,a),Sh(null,i,c,!0,n,a);case 19:return pm(n,i,a);case 22:return am(n,i,a)}throw Error(t(156,i.tag))};function Fm(n,i){return Ls(n,i)}function qE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,i,a,c){return new qE(n,i,a,c)}function Wh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function KE(n){if(typeof n=="function")return Wh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===St)return 14}return 2}function Ti(n,i){var a=n.alternate;return a===null?(a=Vn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function mu(n,i,a,c,d,m){var _=2;if(c=n,typeof n=="function")Wh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case N:return Es(a.children,d,m,i);case I:_=8,d|=8;break;case R:return n=Vn(12,a,i,d|2),n.elementType=R,n.lanes=m,n;case A:return n=Vn(13,a,i,d),n.elementType=A,n.lanes=m,n;case rt:return n=Vn(19,a,i,d),n.elementType=rt,n.lanes=m,n;case $e:return gu(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:_=10;break e;case O:_=9;break e;case L:_=11;break e;case St:_=14;break e;case yt:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Vn(_,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function Es(n,i,a,c){return n=Vn(7,n,c,i),n.lanes=a,n}function gu(n,i,a,c){return n=Vn(22,n,c,i),n.elementType=$e,n.lanes=a,n.stateNode={isHidden:!1},n}function Hh(n,i,a){return n=Vn(6,n,null,i),n.lanes=a,n}function qh(n,i,a){return i=Vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function GE(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ri(0),this.expirationTimes=ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Kh(n,i,a,c,d,m,_,S,C){return n=new GE(n,i,a,S,C),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Vn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(m),n}function QE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ke,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Um(n){if(!n)return fi;n=n._reactInternals;e:{if(Bn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(nn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(nn(a))return fp(n,a,i)}return i}function jm(n,i,a,c,d,m,_,S,C){return n=Kh(a,c,!0,n,d,m,_,S,C),n.context=Um(null),a=n.current,c=Xt(),d=Ei(a),m=Vr(c,d),m.callback=i??null,gi(a,m,d),n.current.lanes=d,ii(n,d,c),on(n,c),n}function yu(n,i,a,c){var d=i.current,m=Xt(),_=Ei(d);return a=Um(a),i.context===null?i.context=a:i.pendingContext=a,i=Vr(m,_),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=gi(d,i,_),n!==null&&(Zn(n,d,_,m),Gl(n,d,_)),_}function vu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Bm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Gh(n,i){Bm(n,i),(n=n.alternate)&&Bm(n,i)}function YE(){return null}var zm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Qh(n){this._internalRoot=n}_u.prototype.render=Qh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));yu(n,i,null,null)},_u.prototype.unmount=Qh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ys(function(){yu(null,n,null,null)}),i[kr]=null}};function _u(n){this._internalRoot=n}_u.prototype.unstable_scheduleHydration=function(n){if(n){var i=_l();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ar.length&&i!==0&&i<ar[a].priority;a++);ar.splice(a,0,n),a===0&&Tl(n)}};function Yh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $m(){}function XE(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var j=vu(_);m.call(j)}}var _=jm(i,c,n,0,null,!1,!1,"",$m);return n._reactRootContainer=_,n[kr]=_.current,oa(n.nodeType===8?n.parentNode:n),ys(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var j=vu(C);S.call(j)}}var C=Kh(n,0,!1,null,null,!1,!1,"",$m);return n._reactRootContainer=C,n[kr]=C.current,oa(n.nodeType===8?n.parentNode:n),ys(function(){yu(i,C,a,c)}),C}function wu(n,i,a,c,d){var m=a._reactRootContainer;if(m){var _=m;if(typeof d=="function"){var S=d;d=function(){var C=vu(_);S.call(C)}}yu(i,_,n,d)}else _=XE(a,i,n,d,c);return vu(_)}yl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=ni(i.pendingLanes);a!==0&&(si(i,a|1),on(i,Qe()),(je&6)===0&&(po=Qe()+500,pi()))}break;case 13:ys(function(){var c=Or(n,1);if(c!==null){var d=Xt();Zn(c,n,1,d)}}),Gh(n,1)}},Fs=function(n){if(n.tag===13){var i=Or(n,134217728);if(i!==null){var a=Xt();Zn(i,n,134217728,a)}Gh(n,134217728)}},vl=function(n){if(n.tag===13){var i=Ei(n),a=Or(n,i);if(a!==null){var c=Xt();Zn(a,n,i,c)}Gh(n,i)}},_l=function(){return Ve},El=function(n,i){var a=Ve;try{return Ve=n,i()}finally{Ve=a}},Zr=function(n,i,a){switch(i){case"input":if(Wi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Fl(c);if(!d)throw Error(t(90));rr(c),Wi(c,d)}}}break;case"textarea":bn(n,a);break;case"select":i=a.value,i!=null&&cn(n,!!a.multiple,i,!1)}},Ir=Bh,$=ys;var JE={usingClientEntryPoint:!1,Events:[ua,eo,Fl,An,Xi,Bh]},Ia={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZE={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Wo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||YE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{ns=Tu.inject(ZE),dn=Tu}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JE,an.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yh(i))throw Error(t(200));return QE(n,i,null,a)},an.createRoot=function(n,i){if(!Yh(n))throw Error(t(299));var a=!1,c="",d=zm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Kh(n,1,!1,null,null,a,!1,c,d),n[kr]=i.current,oa(n.nodeType===8?n.parentNode:n),new Qh(i)},an.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Wo(i),n=n===null?null:n.stateNode,n},an.flushSync=function(n){return ys(n)},an.hydrate=function(n,i,a){if(!Eu(i))throw Error(t(200));return wu(null,n,i,!0,a)},an.hydrateRoot=function(n,i,a){if(!Yh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",_=zm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=jm(i,null,n,1,a??null,d,!1,m,_),n[kr]=i.current,oa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new _u(i)},an.render=function(n,i,a){if(!Eu(i))throw Error(t(200));return wu(null,n,i,!1,a)},an.unmountComponentAtNode=function(n){if(!Eu(n))throw Error(t(40));return n._reactRootContainer?(ys(function(){wu(null,null,n,!1,function(){n._reactRootContainer=null,n[kr]=null})}),!0):!1},an.unstable_batchedUpdates=Bh,an.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Eu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return wu(n,i,a,!1,c)},an.version="18.3.1-next-f1338f8080-20240426",an}var Xm;function Ty(){if(Xm)return Zh.exports;Xm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zh.exports=uw(),Zh.exports}var Jm;function cw(){if(Jm)return Iu;Jm=1;var r=Ty();return Iu.createRoot=r.createRoot,Iu.hydrateRoot=r.hydrateRoot,Iu}var hw=cw();Ty();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Fa.apply(this,arguments)}var xi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(xi||(xi={}));const Zm="popstate";function dw(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return md("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Uu(o)}return pw(e,t,null,r)}function dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Iy(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fw(){return Math.random().toString(36).substr(2,8)}function eg(r,e){return{usr:r.state,key:r.key,idx:e}}function md(r,e,t,s){return t===void 0&&(t=null),Fa({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Vo(e):e,{state:t,key:e&&e.key||s||fw()})}function Uu(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Vo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function pw(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=xi.Pop,g=null,v=w();v==null&&(v=0,h.replaceState(Fa({},h.state,{idx:v}),""));function w(){return(h.state||{idx:null}).idx}function T(){f=xi.Pop;let F=w(),ne=F==null?null:F-v;v=F,g&&g({action:f,location:H.location,delta:ne})}function k(F,ne){f=xi.Push;let oe=md(H.location,F,ne);v=w()+1;let ae=eg(oe,v),we=H.createHref(oe);try{h.pushState(ae,"",we)}catch(Me){if(Me instanceof DOMException&&Me.name==="DataCloneError")throw Me;o.location.assign(we)}l&&g&&g({action:f,location:H.location,delta:1})}function B(F,ne){f=xi.Replace;let oe=md(H.location,F,ne);v=w();let ae=eg(oe,v),we=H.createHref(oe);h.replaceState(ae,"",we),l&&g&&g({action:f,location:H.location,delta:0})}function q(F){let ne=o.location.origin!=="null"?o.location.origin:o.location.href,oe=typeof F=="string"?F:Uu(F);return oe=oe.replace(/ $/,"%20"),dt(ne,"No window.location.(origin|href) available to create URL for href: "+oe),new URL(oe,ne)}let H={get action(){return f},get location(){return r(o,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Zm,T),g=F,()=>{o.removeEventListener(Zm,T),g=null}},createHref(F){return e(o,F)},createURL:q,encodeLocation(F){let ne=q(F);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:k,replace:B,go(F){return h.go(F)}};return H}var tg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(tg||(tg={}));function mw(r,e,t){return t===void 0&&(t="/"),gw(r,e,t)}function gw(r,e,t,s){let o=typeof e=="string"?Vo(e):e,l=zd(o.pathname||"/",t);if(l==null)return null;let h=Sy(r);yw(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let v=kw(l);f=Rw(h[g],v)}return f}function Sy(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(dt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let v=Di([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(dt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Sy(l.children,e,w,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:Sw(v,l.index),routesMeta:w})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of Ay(l.path))o(l,h,g)}),e}function Ay(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Ay(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function yw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Aw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const vw=/^:[\w-]+$/,_w=3,Ew=2,ww=1,Tw=10,Iw=-2,ng=r=>r==="*";function Sw(r,e){let t=r.split("/"),s=t.length;return t.some(ng)&&(s+=Iw),e&&(s+=Ew),t.filter(o=>!ng(o)).reduce((o,l)=>o+(vw.test(l)?_w:l===""?ww:Tw),s)}function Aw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Rw(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],v=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=Cw({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),k=g.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Di([l,T.pathname]),pathnameBase:Ow(Di([l,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(l=Di([l,T.pathnameBase]))}return h}function Cw(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=Pw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((v,w,T)=>{let{paramName:k,isOptional:B}=w;if(k==="*"){let H=f[T]||"";h=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const q=f[T];return B&&!q?v[k]=void 0:v[k]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:h,pattern:r}}function Pw(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Iy(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function kw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Iy(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function zd(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function xw(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Vo(r):r;return{pathname:t?t.startsWith("/")?t:Nw(t,e):e,search:Vw(s),hash:Lw(o)}}function Nw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function nd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $d(r,e){let t=Dw(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Wd(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Vo(r):(o=Fa({},r),dt(!o.pathname||!o.pathname.includes("?"),nd("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),nd("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),nd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}f=T>=0?e[T]:"/"}let g=xw(o,f),v=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}const Di=r=>r.join("/").replace(/\/\/+/g,"/"),Ow=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Vw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Lw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Mw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Ry=["post","put","patch","delete"];new Set(Ry);const bw=["get",...Ry];new Set(bw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ua.apply(this,arguments)}const Hd=K.createContext(null),Fw=K.createContext(null),Bi=K.createContext(null),nc=K.createContext(null),Gr=K.createContext({outlet:null,matches:[],isDataRoute:!1}),Cy=K.createContext(null);function Uw(r,e){let{relative:t}=e===void 0?{}:e;Lo()||dt(!1);let{basename:s,navigator:o}=K.useContext(Bi),{hash:l,pathname:h,search:f}=ky(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Di([s,h])),o.createHref({pathname:g,search:f,hash:l})}function Lo(){return K.useContext(nc)!=null}function Xa(){return Lo()||dt(!1),K.useContext(nc).location}function Py(r){K.useContext(Bi).static||K.useLayoutEffect(r)}function rc(){let{isDataRoute:r}=K.useContext(Gr);return r?Zw():jw()}function jw(){Lo()||dt(!1);let r=K.useContext(Hd),{basename:e,future:t,navigator:s}=K.useContext(Bi),{matches:o}=K.useContext(Gr),{pathname:l}=Xa(),h=JSON.stringify($d(o,t.v7_relativeSplatPath)),f=K.useRef(!1);return Py(()=>{f.current=!0}),K.useCallback(function(v,w){if(w===void 0&&(w={}),!f.current)return;if(typeof v=="number"){s.go(v);return}let T=Wd(v,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Di([e,T.pathname])),(w.replace?s.replace:s.push)(T,w.state,w)},[e,s,h,l,r])}function Bw(){let{matches:r}=K.useContext(Gr),e=r[r.length-1];return e?e.params:{}}function ky(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=K.useContext(Bi),{matches:o}=K.useContext(Gr),{pathname:l}=Xa(),h=JSON.stringify($d(o,s.v7_relativeSplatPath));return K.useMemo(()=>Wd(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function zw(r,e){return $w(r,e)}function $w(r,e,t,s){Lo()||dt(!1);let{navigator:o}=K.useContext(Bi),{matches:l}=K.useContext(Gr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=Xa(),w;if(e){var T;let F=typeof e=="string"?Vo(e):e;g==="/"||(T=F.pathname)!=null&&T.startsWith(g)||dt(!1),w=F}else w=v;let k=w.pathname||"/",B=k;if(g!=="/"){let F=g.replace(/^\//,"").split("/");B="/"+k.replace(/^\//,"").split("/").slice(F.length).join("/")}let q=mw(r,{pathname:B}),H=Gw(q&&q.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:Di([g,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Di([g,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,s);return e&&H?K.createElement(nc.Provider,{value:{location:Ua({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:xi.Pop}},H):H}function Ww(){let r=Jw(),e=Mw(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,null)}const Hw=K.createElement(Ww,null);class qw extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?K.createElement(Gr.Provider,{value:this.props.routeContext},K.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kw(r){let{routeContext:e,match:t,children:s}=r,o=K.useContext(Hd);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Gr.Provider,{value:e},s)}function Gw(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=h.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);w>=0||dt(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:k,errors:B}=t,q=T.route.loader&&k[T.route.id]===void 0&&(!B||B[T.route.id]===void 0);if(T.route.lazy||q){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((w,T,k)=>{let B,q=!1,H=null,F=null;t&&(B=f&&T.route.id?f[T.route.id]:void 0,H=T.route.errorElement||Hw,g&&(v<0&&k===0?(e0("route-fallback"),q=!0,F=null):v===k&&(q=!0,F=T.route.hydrateFallbackElement||null)));let ne=e.concat(h.slice(0,k+1)),oe=()=>{let ae;return B?ae=H:q?ae=F:T.route.Component?ae=K.createElement(T.route.Component,null):T.route.element?ae=T.route.element:ae=w,K.createElement(Kw,{match:T,routeContext:{outlet:w,matches:ne,isDataRoute:t!=null},children:ae})};return t&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?K.createElement(qw,{location:t.location,revalidation:t.revalidation,component:H,error:B,children:oe(),routeContext:{outlet:null,matches:ne,isDataRoute:!0}}):oe()},null)}var xy=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(xy||{}),Ny=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Ny||{});function Qw(r){let e=K.useContext(Hd);return e||dt(!1),e}function Yw(r){let e=K.useContext(Fw);return e||dt(!1),e}function Xw(r){let e=K.useContext(Gr);return e||dt(!1),e}function Dy(r){let e=Xw(),t=e.matches[e.matches.length-1];return t.route.id||dt(!1),t.route.id}function Jw(){var r;let e=K.useContext(Cy),t=Yw(),s=Dy();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function Zw(){let{router:r}=Qw(xy.UseNavigateStable),e=Dy(Ny.UseNavigateStable),t=K.useRef(!1);return Py(()=>{t.current=!0}),K.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Ua({fromRouteId:e},l)))},[r,e])}const rg={};function e0(r,e,t){rg[r]||(rg[r]=!0)}function t0(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function n0(r){let{to:e,replace:t,state:s,relative:o}=r;Lo()||dt(!1);let{future:l,static:h}=K.useContext(Bi),{matches:f}=K.useContext(Gr),{pathname:g}=Xa(),v=rc(),w=Wd(e,$d(f,l.v7_relativeSplatPath),g,o==="path"),T=JSON.stringify(w);return K.useEffect(()=>v(JSON.parse(T),{replace:t,state:s,relative:o}),[v,T,o,t,s]),null}function br(r){dt(!1)}function r0(r){let{basename:e="/",children:t=null,location:s,navigationType:o=xi.Pop,navigator:l,static:h=!1,future:f}=r;Lo()&&dt(!1);let g=e.replace(/^\/*/,"/"),v=K.useMemo(()=>({basename:g,navigator:l,static:h,future:Ua({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Vo(s));let{pathname:w="/",search:T="",hash:k="",state:B=null,key:q="default"}=s,H=K.useMemo(()=>{let F=zd(w,g);return F==null?null:{location:{pathname:F,search:T,hash:k,state:B,key:q},navigationType:o}},[g,w,T,k,B,q,o]);return H==null?null:K.createElement(Bi.Provider,{value:v},K.createElement(nc.Provider,{children:t,value:H}))}function Oy(r){let{children:e,location:t}=r;return zw(gd(e),t)}new Promise(()=>{});function gd(r,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(r,(s,o)=>{if(!K.isValidElement(s))return;let l=[...e,o];if(s.type===K.Fragment){t.push.apply(t,gd(s.props.children,l));return}s.type!==br&&dt(!1),!s.props.index||!s.props.children||dt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=gd(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},yd.apply(this,arguments)}function i0(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function s0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function o0(r,e){return r.button===0&&(!e||e==="_self")&&!s0(r)}const a0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],l0="6";try{window.__reactRouterVersion=l0}catch{}const u0="startTransition",ig=ow[u0];function c0(r){let{basename:e,children:t,future:s,window:o}=r,l=K.useRef();l.current==null&&(l.current=dw({window:o,v5Compat:!0}));let h=l.current,[f,g]=K.useState({action:h.action,location:h.location}),{v7_startTransition:v}=s||{},w=K.useCallback(T=>{v&&ig?ig(()=>g(T)):g(T)},[g,v]);return K.useLayoutEffect(()=>h.listen(w),[h,w]),K.useEffect(()=>t0(s),[s]),K.createElement(r0,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const h0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vy=K.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:v,preventScrollReset:w,viewTransition:T}=e,k=i0(e,a0),{basename:B}=K.useContext(Bi),q,H=!1;if(typeof v=="string"&&d0.test(v)&&(q=v,h0))try{let ae=new URL(window.location.href),we=v.startsWith("//")?new URL(ae.protocol+v):new URL(v),Me=zd(we.pathname,B);we.origin===ae.origin&&Me!=null?v=Me+we.search+we.hash:H=!0}catch{}let F=Uw(v,{relative:o}),ne=f0(v,{replace:h,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:T});function oe(ae){s&&s(ae),ae.defaultPrevented||ne(ae)}return K.createElement("a",yd({},k,{href:q||F,onClick:H||l?s:oe,ref:t,target:g}))});var sg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(sg||(sg={}));var og;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(og||(og={}));function f0(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=rc(),v=Xa(),w=ky(r,{relative:h});return K.useCallback(T=>{if(o0(T,t)){T.preventDefault();let k=s!==void 0?s:Uu(v)===Uu(w);g(r,{replace:k,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[v,g,w,s,o,t,r,l,h,f])}var ag={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},p0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},My={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let k=(f&15)<<2|v>>6,B=v&63;g||(B=64,h||(k=64)),s.push(t[w],t[T],t[k],t[B])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ly(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):p0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||T==null)throw new m0;const k=l<<2|f>>4;if(s.push(k),v!==64){const B=f<<4&240|v>>2;if(s.push(B),T!==64){const q=v<<6&192|T;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class m0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g0=function(r){const e=Ly(r);return My.encodeByteArray(e,!0)},ju=function(r){return g0(r).replace(/\./g,"")},by=function(r){try{return My.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=()=>y0().__FIREBASE_DEFAULTS__,_0=()=>{if(typeof process>"u"||typeof ag>"u")return;const r=ag.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},E0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&by(r[1]);return e&&JSON.parse(e)},ic=()=>{try{return v0()||_0()||E0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Fy=r=>{var e,t;return(t=(e=ic())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},w0=r=>{const e=Fy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Uy=()=>{var r;return(r=ic())===null||r===void 0?void 0:r.config},jy=r=>{var e;return(e=ic())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ju(JSON.stringify(t)),ju(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function A0(){var r;const e=(r=ic())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function P0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k0(){const r=Kt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function x0(){return!A0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){try{return typeof indexedDB=="object"}catch{return!1}}function D0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="FirebaseError";class Qr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=O0,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?V0(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Qr(o,f,s)}}function V0(r,e){return r.replace(L0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const L0=/\{\$([^}]+)}/g;function M0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Bu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(lg(l)&&lg(h)){if(!Bu(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function lg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ra(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ca(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function b0(r,e){const t=new F0(r,e);return t.subscribe.bind(t)}class F0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");U0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=rd),o.error===void 0&&(o.error=rd),o.complete===void 0&&(o.complete=rd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class Ss{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new T0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z0(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:B0(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B0(r){return r===ws?void 0:r}function z0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const W0={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},H0=Le.INFO,q0={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},K0=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=q0[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=H0,this._logHandler=K0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const G0=(r,e)=>e.some(t=>r instanceof t);let ug,cg;function Q0(){return ug||(ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y0(){return cg||(cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const By=new WeakMap,vd=new WeakMap,zy=new WeakMap,id=new WeakMap,Kd=new WeakMap;function X0(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Oi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&By.set(t,r)}).catch(()=>{}),Kd.set(e,r),e}function J0(r){if(vd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});vd.set(r,e)}let _d={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return vd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||zy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Z0(r){_d=r(_d)}function eT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(sd(this),e,...t);return zy.set(s,e.sort?e.sort():[e]),Oi(s)}:Y0().includes(r)?function(...e){return r.apply(sd(this),e),Oi(By.get(this))}:function(...e){return Oi(r.apply(sd(this),e))}}function tT(r){return typeof r=="function"?eT(r):(r instanceof IDBTransaction&&J0(r),G0(r,Q0())?new Proxy(r,_d):r)}function Oi(r){if(r instanceof IDBRequest)return X0(r);if(id.has(r))return id.get(r);const e=tT(r);return e!==r&&(id.set(r,e),Kd.set(e,r)),e}const sd=r=>Kd.get(r);function nT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Oi(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Oi(h.result),g.oldVersion,g.newVersion,Oi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const rT=["get","getKey","getAll","getAllKeys","count"],iT=["put","add","delete","clear"],od=new Map;function hg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(od.get(e))return od.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=iT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||rT.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return od.set(e,l),l}Z0(r=>({...r,get:(e,t,s)=>hg(e,t)||r.get(e,t,s),has:(e,t)=>!!hg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function oT(r){const e=r.getComponent();return e?.type==="VERSION"}const Ed="@firebase/app",dg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new qd("@firebase/app"),aT="@firebase/app-compat",lT="@firebase/analytics-compat",uT="@firebase/analytics",cT="@firebase/app-check-compat",hT="@firebase/app-check",dT="@firebase/auth",fT="@firebase/auth-compat",pT="@firebase/database",mT="@firebase/data-connect",gT="@firebase/database-compat",yT="@firebase/functions",vT="@firebase/functions-compat",_T="@firebase/installations",ET="@firebase/installations-compat",wT="@firebase/messaging",TT="@firebase/messaging-compat",IT="@firebase/performance",ST="@firebase/performance-compat",AT="@firebase/remote-config",RT="@firebase/remote-config-compat",CT="@firebase/storage",PT="@firebase/storage-compat",kT="@firebase/firestore",xT="@firebase/vertexai-preview",NT="@firebase/firestore-compat",DT="firebase",OT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="[DEFAULT]",VT={[Ed]:"fire-core",[aT]:"fire-core-compat",[uT]:"fire-analytics",[lT]:"fire-analytics-compat",[hT]:"fire-app-check",[cT]:"fire-app-check-compat",[dT]:"fire-auth",[fT]:"fire-auth-compat",[pT]:"fire-rtdb",[mT]:"fire-data-connect",[gT]:"fire-rtdb-compat",[yT]:"fire-fn",[vT]:"fire-fn-compat",[_T]:"fire-iid",[ET]:"fire-iid-compat",[wT]:"fire-fcm",[TT]:"fire-fcm-compat",[IT]:"fire-perf",[ST]:"fire-perf-compat",[AT]:"fire-rc",[RT]:"fire-rc-compat",[CT]:"fire-gcs",[PT]:"fire-gcs-compat",[kT]:"fire-fst",[NT]:"fire-fst-compat",[xT]:"fire-vertex","fire-js":"fire-js",[DT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Map,LT=new Map,Td=new Map;function fg(r,e){try{r.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ao(r){const e=r.name;if(Td.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;Td.set(e,r);for(const t of zu.values())fg(t,r);for(const t of LT.values())fg(t,r);return!0}function Gd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Fr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vi=new Ja("app","Firebase",MT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=OT;function $y(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:wd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Vi.create("bad-app-name",{appName:String(o)});if(t||(t=Uy()),!t)throw Vi.create("no-options");const l=zu.get(o);if(l){if(Bu(t,l.options)&&Bu(s,l.config))return l;throw Vi.create("duplicate-app",{appName:o})}const h=new $0(o);for(const g of Td.values())h.addComponent(g);const f=new bT(t,s,h);return zu.set(o,f),f}function Wy(r=wd){const e=zu.get(r);if(!e&&r===wd&&Uy())return $y();if(!e)throw Vi.create("no-app",{appName:r});return e}function Li(r,e,t){var s;let o=(s=VT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(f.join(" "));return}Ao(new Ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="firebase-heartbeat-database",UT=1,ja="firebase-heartbeat-store";let ad=null;function Hy(){return ad||(ad=nT(FT,UT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ja)}catch(t){console.warn(t)}}}}).catch(r=>{throw Vi.create("idb-open",{originalErrorMessage:r.message})})),ad}async function jT(r){try{const t=(await Hy()).transaction(ja),s=await t.objectStore(ja).get(qy(r));return await t.done,s}catch(e){if(e instanceof Qr)$r.warn(e.message);else{const t=Vi.create("idb-get",{originalErrorMessage:e?.message});$r.warn(t.message)}}}async function pg(r,e){try{const s=(await Hy()).transaction(ja,"readwrite");await s.objectStore(ja).put(e,qy(r)),await s.done}catch(t){if(t instanceof Qr)$r.warn(t.message);else{const s=Vi.create("idb-set",{originalErrorMessage:t?.message});$r.warn(s.message)}}}function qy(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=1024,zT=720*60*60*1e3;class $T{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=mg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=zT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){$r.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mg(),{heartbeatsToSend:s,unsentEntries:o}=WT(this._heartbeatsCache.heartbeats),l=ju(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $r.warn(t),""}}}function mg(){return new Date().toISOString().substring(0,10)}function WT(r,e=BT){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),gg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),gg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class HT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0()?D0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function gg(r){return ju(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(r){Ao(new Ss("platform-logger",e=>new sT(e),"PRIVATE")),Ao(new Ss("heartbeat",e=>new $T(e),"PRIVATE")),Li(Ed,dg,r),Li(Ed,dg,"esm2017"),Li("fire-js","")}qT("");function Qd(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Ky(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KT=Ky,Gy=new Ja("auth","Firebase",Ky());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new qd("@firebase/auth");function GT(r,...e){$u.logLevel<=Le.WARN&&$u.warn(`Auth (${Mo}): ${r}`,...e)}function ku(r,...e){$u.logLevel<=Le.ERROR&&$u.error(`Auth (${Mo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(r,...e){throw Yd(r,...e)}function mr(r,...e){return Yd(r,...e)}function Qy(r,e,t){const s=Object.assign(Object.assign({},KT()),{[e]:t});return new Ja("auth","Firebase",s).create(e,{appName:r.name})}function Mi(r){return Qy(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yd(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Gy.create(r,...e)}function Ie(r,e,...t){if(!r)throw Yd(e,...t)}function Ur(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ku(e),new Error(e)}function Wr(r,e){r||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function QT(){return yg()==="http:"||yg()==="https:"}function yg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QT()||C0()||"connection"in navigator)?navigator.onLine:!0}function XT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=S0()||P0()}get(){return YT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(r,e){Wr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new el(3e4,6e4);function ks(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function zi(r,e,t,s,o={}){return Xy(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=Za(Object.assign({key:r.config.apiKey},h)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return R0()||(v.referrerPolicy="no-referrer"),Yy.fetch()(Jy(r,r.config.apiHost,t,f),v)})}async function Xy(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},JT),e);try{const o=new tI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Su(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Su(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Su(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Qy(r,w,v);nr(r,w)}}catch(o){if(o instanceof Qr)throw o;nr(r,"network-request-failed",{message:String(o)})}}async function sc(r,e,t,s,o={}){const l=await zi(r,e,t,s,o);return"mfaPendingCredential"in l&&nr(r,"multi-factor-auth-required",{_serverResponse:l}),l}function Jy(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?Xd(r.config,o):`${r.config.apiScheme}://${o}`}function eI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(mr(this.auth,"network-request-failed")),ZT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Su(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=mr(r,e,s);return o.customData._tokenResponse=t,o}function vg(r){return r!==void 0&&r.enterprise!==void 0}class nI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function rI(r,e){return zi(r,"GET","/v2/recaptchaConfig",ks(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(r,e){return zi(r,"POST","/v1/accounts:delete",e)}async function Zy(r,e){return zi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sI(r,e=!1){const t=Ft(r),s=await t.getIdToken(e),o=Jd(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Da(ld(o.auth_time)),issuedAtTime:Da(ld(o.iat)),expirationTime:Da(ld(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ld(r){return Number(r)*1e3}function Jd(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=by(t);return o?JSON.parse(o):(ku("Failed to decode base64 JWT payload"),null)}catch(o){return ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _g(r){const e=Jd(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Qr&&oI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function oI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Ba(r,Zy(t,{idToken:s}));Ie(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ev(l.providerUserInfo):[],f=uI(r.providerData,h),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!f?.length,w=g?v:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Sd(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function lI(r){const e=Ft(r);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ev(r){return r.map(e=>{var{providerId:t}=e,s=Qd(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(r,e){const t=await Xy(r,{},async()=>{const s=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=Jy(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Yy.fetch()(h,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hI(r,e){return zi(r,"POST","/v2/accounts:revokeToken",ks(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_g(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=_g(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await cI(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new wo;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Qd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Sd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sI(this,e)}reload(){return lI(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Wu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await Ba(this,iI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,f,g,v,w;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,k=(o=t.email)!==null&&o!==void 0?o:void 0,B=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,ne=(v=t.createdAt)!==null&&v!==void 0?v:void 0,oe=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:ae,emailVerified:we,isAnonymous:Me,providerData:ke,stsTokenManager:N}=t;Ie(ae&&N,e,"internal-error");const I=wo.fromJSON(this.name,N);Ie(typeof ae=="string",e,"internal-error"),Si(T,e.name),Si(k,e.name),Ie(typeof we=="boolean",e,"internal-error"),Ie(typeof Me=="boolean",e,"internal-error"),Si(B,e.name),Si(q,e.name),Si(H,e.name),Si(F,e.name),Si(ne,e.name),Si(oe,e.name);const R=new jr({uid:ae,auth:e,email:k,emailVerified:we,displayName:T,isAnonymous:Me,photoURL:q,phoneNumber:B,tenantId:H,stsTokenManager:I,createdAt:ne,lastLoginAt:oe});return ke&&Array.isArray(ke)&&(R.providerData=ke.map(x=>Object.assign({},x))),F&&(R._redirectEventId=F),R}static async _fromIdTokenResponse(e,t,s=!1){const o=new wo;o.updateFromServerResponse(t);const l=new jr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Wu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ev(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new wo;f.updateFromIdToken(s);const g=new jr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Sd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=new Map;function Br(r){Wr(r instanceof Function,"Expected a class definition");let e=Eg.get(r);return e?(Wr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Eg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tv.type="NONE";const wg=tv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(r,e,t){return`firebase:${r}:${e}:${t}`}class To{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=xu(this.userKey,o.apiKey,l),this.fullPersistenceKey=xu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new To(Br(wg),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Br(wg);const h=xu(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const w=await v._get(h);if(w){const T=jr._fromJSON(e,w);v!==l&&(f=T),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new To(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new To(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(av(e))return"Blackberry";if(lv(e))return"Webos";if(rv(e))return"Safari";if((e.includes("chrome/")||iv(e))&&!e.includes("edge/"))return"Chrome";if(ov(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function nv(r=Kt()){return/firefox\//i.test(r)}function rv(r=Kt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iv(r=Kt()){return/crios\//i.test(r)}function sv(r=Kt()){return/iemobile/i.test(r)}function ov(r=Kt()){return/android/i.test(r)}function av(r=Kt()){return/blackberry/i.test(r)}function lv(r=Kt()){return/webos/i.test(r)}function Zd(r=Kt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function dI(r=Kt()){var e;return Zd(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fI(){return k0()&&document.documentMode===10}function uv(r=Kt()){return Zd(r)||ov(r)||lv(r)||av(r)||/windows phone/i.test(r)||sv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(r,e=[]){let t;switch(r){case"Browser":t=Tg(Kt());break;case"Worker":t=`${Tg(Kt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(r,e={}){return zi(r,"GET","/v2/passwordPolicy",ks(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=6;class yI{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:gI,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ig(this),this.idTokenSubscription=new Ig(this),this.beforeStateQueue=new pI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zy(this,{idToken:e}),s=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(Mi(this));const t=e?Ft(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mI(this),t=new yI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await hI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&GT(`Error while retrieving App Check token: ${t.error}`),t?.token}}function bo(r){return Ft(r)}class Ig{constructor(e){this.auth=e,this.observer=null,this.addObserver=b0(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _I(r){oc=r}function hv(r){return oc.loadJS(r)}function EI(){return oc.recaptchaEnterpriseScript}function wI(){return oc.gapiScript}function TI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const II="recaptcha-enterprise",SI="NO_RECAPTCHA";class AI{constructor(e){this.type=II,this.auth=bo(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{rI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new nI(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;vg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(SI)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&vg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=EI();g.length!==0&&(g+=f),hv(g).then(()=>{o(f,l,h)}).catch(v=>{h(v)})}}).catch(f=>{h(f)})})}}async function Sg(r,e,t,s=!1){const o=new AI(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const h=Object.assign({},e);return s?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ag(r,e,t,s){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Sg(r,e,t,t==="getOobCode");return s(r,l)}else return s(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Sg(r,e,t,t==="getOobCode");return s(r,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(r,e){const t=Gd(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Bu(l,e??{}))return o;nr(o,"already-initialized")}return t.initialize({options:e})}function CI(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Br);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function PI(r,e,t){const s=bo(r);Ie(s._canInitEmulator,s,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=dv(e),{host:h,port:f}=kI(e),g=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${h}${g}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),xI()}function dv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function kI(r){const e=dv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Rg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Rg(h)}}}function Rg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function xI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function NI(r,e){return zi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(r,e){return sc(r,"POST","/v1/accounts:signInWithPassword",ks(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(r,e){return sc(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,e))}async function VI(r,e){return sc(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends ef{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new za(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new za(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,t,"signInWithPassword",DI);case"emailLink":return OI(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,s,"signUpPassword",NI);case"emailLink":return VI(e,{idToken:t,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r,e){return sc(r,"POST","/v1/accounts:signInWithIdp",ks(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="http://localhost";class As extends ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Qd(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new As(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Io(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:LI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Za(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bI(r){const e=Ra(Ca(r)).link,t=e?Ra(Ca(e)).deep_link_id:null,s=Ra(Ca(r)).deep_link_id;return(s?Ra(Ca(s)).link:null)||s||t||e||r}class tf{constructor(e){var t,s,o,l,h,f;const g=Ra(Ca(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,w=(s=g.oobCode)!==null&&s!==void 0?s:null,T=MI((o=g.mode)!==null&&o!==void 0?o:null);Ie(v&&w&&T,"argument-error"),this.apiKey=v,this.operation=T,this.code=w,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=bI(e);try{return new tf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,t){return za._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=tf.parseLink(t);return Ie(s,"argument-error"),za._fromEmailAndCode(e,s.code,s.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends fv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends tl{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return As._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ci.credential(t,s)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends tl{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends tl{constructor(){super("twitter.com")}static credential(e,t){return As._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ki.credential(t,s)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await jr._fromIdTokenResponse(e,s,o),h=Cg(s);return new Ro({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Cg(s);return new Ro({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Cg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends Qr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Hu(e,t,s,o)}}function pv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hu._fromErrorAndOperation(r,l,e,s):l})}async function FI(r,e,t=!1){const s=await Ba(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ro._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(r,e,t=!1){const{auth:s}=r;if(Fr(s.app))return Promise.reject(Mi(s));const o="reauthenticate";try{const l=await Ba(r,pv(s,o,e,r),t);Ie(l.idToken,s,"internal-error");const h=Jd(l.idToken);Ie(h,s,"internal-error");const{sub:f}=h;return Ie(r.uid===f,s,"user-mismatch"),Ro._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&nr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(r,e,t=!1){if(Fr(r.app))return Promise.reject(Mi(r));const s="signIn",o=await pv(r,s,e),l=await Ro._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function jI(r,e){return mv(bo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(r){const e=bo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function zI(r,e,t){return Fr(r.app)?Promise.reject(Mi(r)):jI(Ft(r),Fo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&BI(r),s})}function $I(r,e,t,s){return Ft(r).onIdTokenChanged(e,t,s)}function WI(r,e,t){return Ft(r).beforeAuthStateChanged(e,t)}function HI(r,e,t,s){return Ft(r).onAuthStateChanged(e,t,s)}function gv(r){return Ft(r).signOut()}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=1e3,KI=10;class vv extends yv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);fI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,KI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},qI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vv.type="LOCAL";const GI=vv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends yv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_v.type="SESSION";const Ev=_v;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new ac(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async v=>v(t.origin,l)),g=await QI(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const v=nf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===v)switch(k.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(k.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function XI(r){gr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function JI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZI(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function eS(){return wv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="firebaseLocalStorageDb",tS=1,Ku="firebaseLocalStorage",Iv="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lc(r,e){return r.transaction([Ku],e?"readwrite":"readonly").objectStore(Ku)}function nS(){const r=indexedDB.deleteDatabase(Tv);return new nl(r).toPromise()}function Ad(){const r=indexedDB.open(Tv,tS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Ku,{keyPath:Iv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Ku)?e(s):(s.close(),await nS(),e(await Ad()))})})}async function Pg(r,e,t){const s=lc(r,!0).put({[Iv]:e,value:t});return new nl(s).toPromise()}async function rS(r,e){const t=lc(r,!1).get(e),s=await new nl(t).toPromise();return s===void 0?null:s.value}function kg(r,e){const t=lc(r,!0).delete(e);return new nl(t).toPromise()}const iS=800,sS=3;class Sv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ad(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>sS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ac._getInstance(eS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await JI(),!this.activeServiceWorker)return;this.sender=new YI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ad();return await Pg(e,qu,"1"),await kg(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Pg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>rS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=lc(o,!1).getAll();return new nl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sv.type="LOCAL";const oS=Sv;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r,e){return e?Br(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lS(r){return mv(r.auth,new rf(r),r.bypassAuthState)}function uS(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),UI(t,new rf(r),r.bypassAuthState)}async function cS(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),FI(t,new rf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lS;case"linkViaPopup":case"linkViaRedirect":return cS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:nr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new el(2e3,1e4);class _o extends Av{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hS.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="pendingRedirect",Nu=new Map;class fS extends Av{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Nu.get(this.auth._key());if(!e){try{const s=await pS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Nu.set(this.auth._key(),e)}return this.bypassAuthState||Nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pS(r,e){const t=yS(e),s=gS(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function mS(r,e){Nu.set(r._key(),e)}function gS(r){return Br(r._redirectPersistence)}function yS(r){return xu(dS,r.config.apiKey,r.name)}async function vS(r,e,t=!1){if(Fr(r.app))return Promise.reject(Mi(r));const s=bo(r),o=aS(s,e),h=await new fS(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=600*1e3;class ES{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Rv(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_S&&this.cachedEventUids.clear(),this.cachedEventUids.has(xg(e))}saveEventToCache(e){this.cachedEventUids.add(xg(e)),this.lastProcessedEventTime=Date.now()}}function xg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Rv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function wS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(r,e={}){return zi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;async function AS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TS(r);for(const t of e)try{if(RS(t))return}catch{}nr(r,"unauthorized-domain")}function RS(r){const e=Id(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!SS.test(t))return!1;if(IS.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new el(3e4,6e4);function Ng(){const r=gr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function PS(r){return new Promise((e,t)=>{var s,o,l;function h(){Ng(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ng(),t(mr(r,"network-request-failed"))},timeout:CS.get()})}if(!((o=(s=gr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=gr().gapi)===null||l===void 0)&&l.load)h();else{const f=TI("iframefcb");return gr()[f]=()=>{gapi.load?h():t(mr(r,"network-request-failed"))},hv(`${wI()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Du=null,e})}let Du=null;function kS(r){return Du=Du||PS(r),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new el(5e3,15e3),NS="__/auth/iframe",DS="emulator/auth/iframe",OS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LS(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Xd(e,DS):`https://${r.config.authDomain}/${NS}`,s={apiKey:e.apiKey,appName:r.name,v:Mo},o=VS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Za(s).slice(1)}`}async function MS(r){const e=await kS(r),t=gr().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:LS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=mr(r,"network-request-failed"),f=gr().setTimeout(()=>{l(h)},xS.get());function g(){gr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FS=500,US=600,jS="_blank",BS="http://localhost";class Dg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zS(r,e,t,s=FS,o=US){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g=Object.assign(Object.assign({},bS),{width:s.toString(),height:o.toString(),top:l,left:h}),v=Kt().toLowerCase();t&&(f=iv(v)?jS:t),nv(v)&&(e=e||BS,g.scrollbars="yes");const w=Object.entries(g).reduce((k,[B,q])=>`${k}${B}=${q},`,"");if(dI(v)&&f!=="_self")return $S(e||"",f),new Dg(null);const T=window.open(e||"",f,w);Ie(T,r,"popup-blocked");try{T.focus()}catch{}return new Dg(T)}function $S(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="__/auth/handler",HS="emulator/auth/handler",qS=encodeURIComponent("fac");async function Og(r,e,t,s,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Mo,eventId:o};if(e instanceof fv){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",M0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof tl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),v=g?`#${qS}=${encodeURIComponent(g)}`:"";return`${KS(r)}?${Za(f).slice(1)}${v}`}function KS({config:r}){return r.emulator?Xd(r,HS):`https://${r.authDomain}/${WS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="webStorageSupport";class GS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=vS,this._overrideRedirectResult=mS}async _openPopup(e,t,s,o){var l;Wr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Og(e,t,s,Id(),o);return zS(e,h,nf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Og(e,t,s,Id(),o);return XI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Wr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await MS(e),s=new ES(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ud,{type:ud},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[ud];h!==void 0&&t(!!h),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uv()||rv()||Zd()}}const QS=GS;var Vg="@firebase/auth",Lg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JS(r){Ao(new Ss("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cv(r)},v=new vI(s,o,l,g);return CI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ao(new Ss("auth-internal",e=>{const t=bo(e.getProvider("auth").getImmediate());return(s=>new YS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(Vg,Lg,XS(r)),Li(Vg,Lg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=300,eA=jy("authIdTokenMaxAge")||ZS;let Mg=null;const tA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>eA)return;const o=t?.token;Mg!==o&&(Mg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $a(r=Wy()){const e=Gd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=RI(r,{popupRedirectResolver:QS,persistence:[oS,GI,Ev]}),s=jy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=tA(l.toString());WI(t,h,()=>h(t.currentUser)),$I(t,f=>h(f))}}const o=Fy("auth");return o&&PI(t,`http://${o}`),t}function nA(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}_I({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=mr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",nA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JS("Browser");function Cv(){const[r,e]=K.useState(""),[t,s]=K.useState(""),[o,l]=K.useState(""),h=rc();K.useEffect(()=>{const g=$a();gv(g)},[]);async function f(g){g.preventDefault(),l("");const v=$a();try{await zI(v,r,t),h("/admin")}catch{l("Invalid credentials")}}return P.jsx("div",{className:"admin-login-bg",children:P.jsxs("div",{className:"admin-login-card",children:[P.jsx("div",{className:"admin-login-logo",children:P.jsx("span",{role:"img","aria-label":"lock",style:{fontSize:36},children:"🔒"})}),P.jsx("h2",{children:"Admin Login"}),P.jsxs("form",{onSubmit:f,children:[P.jsxs("label",{children:["Email",P.jsx("input",{type:"email",value:r,onChange:g=>e(g.target.value),required:!0,autoFocus:!0})]}),P.jsxs("label",{children:["Password",P.jsx("input",{type:"password",value:t,onChange:g=>s(g.target.value),required:!0})]}),P.jsx("button",{type:"submit",className:"admin-login-btn",children:"Login"}),o&&P.jsx("div",{className:"admin-login-error",children:o})]})]})})}var rA="firebase",iA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(rA,iA,"app");var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,Pv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function R(){}R.prototype=I.prototype,N.D=I.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(x,O,L){for(var A=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)A[rt-2]=arguments[rt];return I.prototype[O].apply(x,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,R){R||(R=0);var x=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)x[O]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(O=0;16>O;++O)x[O]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=N.g[0],R=N.g[1],O=N.g[2];var L=N.g[3],A=I+(L^R&(O^L))+x[0]+3614090360&4294967295;I=R+(A<<7&4294967295|A>>>25),A=L+(O^I&(R^O))+x[1]+3905402710&4294967295,L=I+(A<<12&4294967295|A>>>20),A=O+(R^L&(I^R))+x[2]+606105819&4294967295,O=L+(A<<17&4294967295|A>>>15),A=R+(I^O&(L^I))+x[3]+3250441966&4294967295,R=O+(A<<22&4294967295|A>>>10),A=I+(L^R&(O^L))+x[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=L+(O^I&(R^O))+x[5]+1200080426&4294967295,L=I+(A<<12&4294967295|A>>>20),A=O+(R^L&(I^R))+x[6]+2821735955&4294967295,O=L+(A<<17&4294967295|A>>>15),A=R+(I^O&(L^I))+x[7]+4249261313&4294967295,R=O+(A<<22&4294967295|A>>>10),A=I+(L^R&(O^L))+x[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=L+(O^I&(R^O))+x[9]+2336552879&4294967295,L=I+(A<<12&4294967295|A>>>20),A=O+(R^L&(I^R))+x[10]+4294925233&4294967295,O=L+(A<<17&4294967295|A>>>15),A=R+(I^O&(L^I))+x[11]+2304563134&4294967295,R=O+(A<<22&4294967295|A>>>10),A=I+(L^R&(O^L))+x[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=L+(O^I&(R^O))+x[13]+4254626195&4294967295,L=I+(A<<12&4294967295|A>>>20),A=O+(R^L&(I^R))+x[14]+2792965006&4294967295,O=L+(A<<17&4294967295|A>>>15),A=R+(I^O&(L^I))+x[15]+1236535329&4294967295,R=O+(A<<22&4294967295|A>>>10),A=I+(O^L&(R^O))+x[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=L+(R^O&(I^R))+x[6]+3225465664&4294967295,L=I+(A<<9&4294967295|A>>>23),A=O+(I^R&(L^I))+x[11]+643717713&4294967295,O=L+(A<<14&4294967295|A>>>18),A=R+(L^I&(O^L))+x[0]+3921069994&4294967295,R=O+(A<<20&4294967295|A>>>12),A=I+(O^L&(R^O))+x[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=L+(R^O&(I^R))+x[10]+38016083&4294967295,L=I+(A<<9&4294967295|A>>>23),A=O+(I^R&(L^I))+x[15]+3634488961&4294967295,O=L+(A<<14&4294967295|A>>>18),A=R+(L^I&(O^L))+x[4]+3889429448&4294967295,R=O+(A<<20&4294967295|A>>>12),A=I+(O^L&(R^O))+x[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=L+(R^O&(I^R))+x[14]+3275163606&4294967295,L=I+(A<<9&4294967295|A>>>23),A=O+(I^R&(L^I))+x[3]+4107603335&4294967295,O=L+(A<<14&4294967295|A>>>18),A=R+(L^I&(O^L))+x[8]+1163531501&4294967295,R=O+(A<<20&4294967295|A>>>12),A=I+(O^L&(R^O))+x[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=L+(R^O&(I^R))+x[2]+4243563512&4294967295,L=I+(A<<9&4294967295|A>>>23),A=O+(I^R&(L^I))+x[7]+1735328473&4294967295,O=L+(A<<14&4294967295|A>>>18),A=R+(L^I&(O^L))+x[12]+2368359562&4294967295,R=O+(A<<20&4294967295|A>>>12),A=I+(R^O^L)+x[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=L+(I^R^O)+x[8]+2272392833&4294967295,L=I+(A<<11&4294967295|A>>>21),A=O+(L^I^R)+x[11]+1839030562&4294967295,O=L+(A<<16&4294967295|A>>>16),A=R+(O^L^I)+x[14]+4259657740&4294967295,R=O+(A<<23&4294967295|A>>>9),A=I+(R^O^L)+x[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=L+(I^R^O)+x[4]+1272893353&4294967295,L=I+(A<<11&4294967295|A>>>21),A=O+(L^I^R)+x[7]+4139469664&4294967295,O=L+(A<<16&4294967295|A>>>16),A=R+(O^L^I)+x[10]+3200236656&4294967295,R=O+(A<<23&4294967295|A>>>9),A=I+(R^O^L)+x[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=L+(I^R^O)+x[0]+3936430074&4294967295,L=I+(A<<11&4294967295|A>>>21),A=O+(L^I^R)+x[3]+3572445317&4294967295,O=L+(A<<16&4294967295|A>>>16),A=R+(O^L^I)+x[6]+76029189&4294967295,R=O+(A<<23&4294967295|A>>>9),A=I+(R^O^L)+x[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=L+(I^R^O)+x[12]+3873151461&4294967295,L=I+(A<<11&4294967295|A>>>21),A=O+(L^I^R)+x[15]+530742520&4294967295,O=L+(A<<16&4294967295|A>>>16),A=R+(O^L^I)+x[2]+3299628645&4294967295,R=O+(A<<23&4294967295|A>>>9),A=I+(O^(R|~L))+x[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=L+(R^(I|~O))+x[7]+1126891415&4294967295,L=I+(A<<10&4294967295|A>>>22),A=O+(I^(L|~R))+x[14]+2878612391&4294967295,O=L+(A<<15&4294967295|A>>>17),A=R+(L^(O|~I))+x[5]+4237533241&4294967295,R=O+(A<<21&4294967295|A>>>11),A=I+(O^(R|~L))+x[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=L+(R^(I|~O))+x[3]+2399980690&4294967295,L=I+(A<<10&4294967295|A>>>22),A=O+(I^(L|~R))+x[10]+4293915773&4294967295,O=L+(A<<15&4294967295|A>>>17),A=R+(L^(O|~I))+x[1]+2240044497&4294967295,R=O+(A<<21&4294967295|A>>>11),A=I+(O^(R|~L))+x[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=L+(R^(I|~O))+x[15]+4264355552&4294967295,L=I+(A<<10&4294967295|A>>>22),A=O+(I^(L|~R))+x[6]+2734768916&4294967295,O=L+(A<<15&4294967295|A>>>17),A=R+(L^(O|~I))+x[13]+1309151649&4294967295,R=O+(A<<21&4294967295|A>>>11),A=I+(O^(R|~L))+x[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=L+(R^(I|~O))+x[11]+3174756917&4294967295,L=I+(A<<10&4294967295|A>>>22),A=O+(I^(L|~R))+x[2]+718787259&4294967295,O=L+(A<<15&4294967295|A>>>17),A=R+(L^(O|~I))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var R=I-this.blockSize,x=this.B,O=this.h,L=0;L<I;){if(O==0)for(;L<=R;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<I;)if(x[O++]=N.charCodeAt(L++),O==this.blockSize){o(this,x),O=0;break}}else for(;L<I;)if(x[O++]=N[L++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=I},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var R=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=R&255,R/=256;for(this.u(N),N=Array(16),I=R=0;4>I;++I)for(var x=0;32>x;x+=8)N[R++]=this.g[I]>>>x&255;return N};function l(N,I){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=I(N)}function h(N,I){this.h=I;for(var R=[],x=!0,O=N.length-1;0<=O;O--){var L=N[O]|0;x&&L==I||(R[O]=L,x=!1)}this.g=R}var f={};function g(N){return-128<=N&&128>N?l(N,function(I){return new h([I|0],0>I?-1:0)}):new h([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return F(v(-N));for(var I=[],R=1,x=0;N>=R;x++)I[x]=N/R|0,R*=4294967296;return new h(I,0)}function w(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return F(w(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(I,8)),x=T,O=0;O<N.length;O+=8){var L=Math.min(8,N.length-O),A=parseInt(N.substring(O,O+L),I);8>L?(L=v(Math.pow(I,L)),x=x.j(L).add(v(A))):(x=x.j(R),x=x.add(v(A)))}return x}var T=g(0),k=g(1),B=g(16777216);r=h.prototype,r.m=function(){if(H(this))return-F(this).m();for(var N=0,I=1,R=0;R<this.g.length;R++){var x=this.i(R);N+=(0<=x?x:4294967296+x)*I,I*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(H(this))return"-"+F(this).toString(N);for(var I=v(Math.pow(N,6)),R=this,x="";;){var O=we(R,I).g;R=ne(R,O.j(I));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=O,q(R))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function H(N){return N.h==-1}r.l=function(N){return N=ne(this,N),H(N)?-1:q(N)?0:1};function F(N){for(var I=N.g.length,R=[],x=0;x<I;x++)R[x]=~N.g[x];return new h(R,~N.h).add(k)}r.abs=function(){return H(this)?F(this):this},r.add=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],x=0,O=0;O<=I;O++){var L=x+(this.i(O)&65535)+(N.i(O)&65535),A=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);x=A>>>16,L&=65535,A&=65535,R[O]=A<<16|L}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ne(N,I){return N.add(F(I))}r.j=function(N){if(q(this)||q(N))return T;if(H(this))return H(N)?F(this).j(F(N)):F(F(this).j(N));if(H(N))return F(this.j(F(N)));if(0>this.l(B)&&0>N.l(B))return v(this.m()*N.m());for(var I=this.g.length+N.g.length,R=[],x=0;x<2*I;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<N.g.length;O++){var L=this.i(x)>>>16,A=this.i(x)&65535,rt=N.i(O)>>>16,St=N.i(O)&65535;R[2*x+2*O]+=A*St,oe(R,2*x+2*O),R[2*x+2*O+1]+=L*St,oe(R,2*x+2*O+1),R[2*x+2*O+1]+=A*rt,oe(R,2*x+2*O+1),R[2*x+2*O+2]+=L*rt,oe(R,2*x+2*O+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new h(R,0)};function oe(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ae(N,I){this.g=N,this.h=I}function we(N,I){if(q(I))throw Error("division by zero");if(q(N))return new ae(T,T);if(H(N))return I=we(F(N),I),new ae(F(I.g),F(I.h));if(H(I))return I=we(N,F(I)),new ae(F(I.g),I.h);if(30<N.g.length){if(H(N)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var R=k,x=I;0>=x.l(N);)R=Me(R),x=Me(x);var O=ke(R,1),L=ke(x,1);for(x=ke(x,2),R=ke(R,2);!q(x);){var A=L.add(x);0>=A.l(N)&&(O=O.add(R),L=A),x=ke(x,1),R=ke(R,1)}return I=ne(N,O.j(I)),new ae(O,I)}for(O=T;0<=N.l(I);){for(R=Math.max(1,Math.floor(N.m()/I.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=v(R),A=L.j(I);H(A)||0<A.l(N);)R-=x,L=v(R),A=L.j(I);q(L)&&(L=k),O=O.add(L),N=ne(N,A)}return new ae(O,N)}r.A=function(N){return we(this,N).h},r.and=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)&N.i(x);return new h(R,this.h&N.h)},r.or=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)|N.i(x);return new h(R,this.h|N.h)},r.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)^N.i(x);return new h(R,this.h^N.h)};function Me(N){for(var I=N.g.length+1,R=[],x=0;x<I;x++)R[x]=N.i(x)<<1|N.i(x-1)>>>31;return new h(R,N.h)}function ke(N,I){var R=I>>5;I%=32;for(var x=N.g.length-R,O=[],L=0;L<x;L++)O[L]=0<I?N.i(L+R)>>>I|N.i(L+R+1)<<32-I:N.i(L+R);return new h(O,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Pv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Is=h}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kv,Pa,xv,Ou,Rd,Nv,Dv,Ov;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var y=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in y))break e;y=y[M]}u=u[u.length-1],E=y[u],p=p(E),p!=E&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,E=!1,M={next:function(){if(!E&&y<u.length){var z=y++;return{value:p(z,u[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function w(u,p,y){return u.call.apply(u.bind,arguments)}function T(u,p,y){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function k(u,p,y){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,k.apply(null,arguments)}function B(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function q(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(E,M,z){for(var ee=Array(arguments.length-2),We=2;We<arguments.length;We++)ee[We-2]=arguments[We];return p.prototype[M].apply(E,ee)}}function H(u){const p=u.length;if(0<p){const y=Array(p);for(let E=0;E<p;E++)y[E]=u[E];return y}return[]}function F(u,p){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const M=u.length||0,z=E.length||0;u.length=M+z;for(let ee=0;ee<z;ee++)u[M+ee]=E[ee]}else u.push(E)}}class ne{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function oe(u){return/^[\s\xa0]*$/.test(u)}function ae(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function we(u){return we[" "](u),u}we[" "]=function(){};var Me=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function ke(u,p,y){for(const E in u)p.call(y,u[E],E,u)}function N(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function I(u){const p={};for(const y in u)p[y]=u[y];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let y,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(y in E)u[y]=E[y];for(let z=0;z<R.length;z++)y=R[z],Object.prototype.hasOwnProperty.call(E,y)&&(u[y]=E[y])}}function O(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function L(u){f.setTimeout(()=>{throw u},0)}function A(){var u=me;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class rt{constructor(){this.h=this.g=null}add(p,y){const E=St.get();E.set(p,y),this.h?this.h.next=E:this.g=E,this.h=E}}var St=new ne(()=>new yt,u=>u.reset());class yt{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,te=!1,me=new rt,ie=()=>{const u=f.Promise.resolve(void 0);$e=()=>{u.then(V)}};var V=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(y){L(y)}var p=St;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}te=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u}();function Pe(u,p){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Me){e:{try{we(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}q(Pe,pe);var Te={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),be=0;function qe(u,p,y,E,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!E,this.ha=M,this.key=++be,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wn(u){this.src=u,this.g={},this.h=0}wn.prototype.add=function(u,p,y,E,M){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var ee=Ln(u,p,E,M);return-1<ee?(p=u[ee],y||(p.fa=!1)):(p=new qe(p,this.src,z,!!E,M),p.fa=y,u.push(p)),p};function rr(u,p){var y=p.type;if(y in u.g){var E=u.g[y],M=Array.prototype.indexOf.call(E,p,void 0),z;(z=0<=M)&&Array.prototype.splice.call(E,M,1),z&&(ft(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ln(u,p,y,E){for(var M=0;M<u.length;++M){var z=u[M];if(!z.da&&z.listener==p&&z.capture==!!y&&z.ha==E)return M}return-1}var un="closure_lm_"+(1e6*Math.random()|0),ir={};function Mn(u,p,y,E,M){if(Array.isArray(p)){for(var z=0;z<p.length;z++)Mn(u,p[z],y,E,M);return null}return y=In(y),u&&u[Ne]?u.K(p,y,v(E)?!!E.capture:!1,M):Wi(u,p,y,!1,E,M)}function Wi(u,p,y,E,M,z){if(!p)throw Error("Invalid event type");var ee=v(M)?!!M.capture:!!M,We=sr(u);if(We||(u[un]=We=new wn(u)),y=We.add(p,y,E,ee,z),y.proxy)return y;if(E=Yr(),y.proxy=E,E.src=u,E.listener=y,u.addEventListener)xe||(M=ee),M===void 0&&(M=!1),u.addEventListener(p.toString(),E,M);else if(u.attachEvent)u.attachEvent(cn(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Yr(){function u(y){return p.call(u.src,u.listener,y)}const p=vt;return u}function Xr(u,p,y,E,M){if(Array.isArray(p))for(var z=0;z<p.length;z++)Xr(u,p[z],y,E,M);else E=v(E)?!!E.capture:!!E,y=In(y),u&&u[Ne]?(u=u.i,p=String(p).toString(),p in u.g&&(z=u.g[p],y=Ln(z,y,E,M),-1<y&&(ft(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete u.g[p],u.h--)))):u&&(u=sr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ln(p,y,E,M)),(y=-1<u?p[u]:null)&&Tn(y))}function Tn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ne])rr(p.i,u);else{var y=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(y,E,u.capture):p.detachEvent?p.detachEvent(cn(y),E):p.addListener&&p.removeListener&&p.removeListener(E),(y=sr(p))?(rr(y,u),y.h==0&&(y.src=null,p[un]=null)):ft(u)}}}function cn(u){return u in ir?ir[u]:ir[u]="on"+u}function vt(u,p){if(u.da)u=!0;else{p=new Pe(p,this);var y=u.listener,E=u.ha||u.src;u.fa&&Tn(u),u=y.call(E,p)}return u}function sr(u){return u=u[un],u instanceof wn?u:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(u){return typeof u=="function"?u:(u[bn]||(u[bn]=function(p){return u.handleEvent(p)}),u[bn])}function lt(){W.call(this),this.i=new wn(this),this.M=this,this.F=null}q(lt,W),lt.prototype[Ne]=!0,lt.prototype.removeEventListener=function(u,p,y,E){Xr(this,u,p,y,E)};function ut(u,p){var y,E=u.F;if(E)for(y=[];E;E=E.F)y.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new pe(p,u);else if(p instanceof pe)p.target=p.target||u;else{var M=p;p=new pe(E,u),x(p,M)}if(M=!0,y)for(var z=y.length-1;0<=z;z--){var ee=p.g=y[z];M=Fn(ee,E,!0,p)&&M}if(ee=p.g=u,M=Fn(ee,E,!0,p)&&M,M=Fn(ee,E,!1,p)&&M,y)for(z=0;z<y.length;z++)ee=p.g=y[z],M=Fn(ee,E,!1,p)&&M}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],E=0;E<y.length;E++)ft(y[E]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,y,E){return this.i.add(String(u),p,!1,y,E)},lt.prototype.L=function(u,p,y,E){return this.i.add(String(u),p,!0,y,E)};function Fn(u,p,y,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,z=0;z<p.length;++z){var ee=p[z];if(ee&&!ee.da&&ee.capture==y){var We=ee.listener,_t=ee.ha||ee.src;ee.fa&&rr(u.i,ee),M=We.call(_t,E)!==!1&&M}}return M&&!E.defaultPrevented}function Hi(u,p,y){if(typeof u=="function")y&&(u=k(u,y));else if(u&&typeof u.handleEvent=="function")u=k(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function hn(u){u.g=Hi(()=>{u.g=null,u.i&&(u.i=!1,hn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class wr extends W{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:hn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(u){W.call(this),this.h=u,this.g={}}q(Tr,W);var qi=[];function Ki(u){ke(u.g,function(p,y){this.g.hasOwnProperty(y)&&Tn(p)},u),u.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),Ki(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gi=f.JSON.stringify,Qi=f.JSON.parse,Yi=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Un(){}Un.prototype.h=null;function Jr(u){return u.h||(u.h=u.i())}function Zr(){}var Jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sn(){pe.call(this,"d")}q(Sn,pe);function ei(){pe.call(this,"c")}q(ei,pe);var An={},Xi=null;function Ir(){return Xi=Xi||new lt}An.La="serverreachability";function $(u){pe.call(this,An.La,u)}q($,pe);function re(u){const p=Ir();ut(p,new $(p))}An.STAT_EVENT="statevent";function ge(u,p){pe.call(this,An.STAT_EVENT,u),this.stat=p}q(ge,pe);function ce(u){const p=Ir();ut(p,new ge(p,u))}An.Ma="timingevent";function Ge(u,p){pe.call(this,An.Ma,u),this.size=p}q(Ge,pe);function Xe(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function Zi(u,p,y,E,M,z){u.info(function(){if(u.g)if(z)for(var ee="",We=z.split("&"),_t=0;_t<We.length;_t++){var Fe=We[_t].split("=");if(1<Fe.length){var At=Fe[0];Fe=Fe[1];var pt=At.split("_");ee=2<=pt.length&&pt[1]=="type"?ee+(At+"="+Fe+"&"):ee+(At+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+y+`
`+ee})}function Ds(u,p,y,E,M,z,ee){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+y+`
`+z+" "+ee})}function jn(u,p,y,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ac(u,y)+(E?" "+E:"")})}function $o(u,p){u.info(function(){return"TIMEOUT: "+p})}Ji.prototype.info=function(){};function Ac(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var E=y[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return Gi(y)}catch{return p}}var Os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ul={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function es(){}q(es,Un),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},Bn=new es;function zn(u,p,y,E){this.j=u,this.i=p,this.l=y,this.R=E||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cl}function cl(){this.i=null,this.g="",this.h=!1}var Wo={},Vs={};function Ls(u,p,y){u.L=1,u.v=si(fn(p)),u.m=y,u.P=!0,Ho(u,null)}function Ho(u,p){u.F=Date.now(),Qe(u),u.A=fn(u.v);var y=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),ai(y.i,"t",E),u.C=0,y=u.j.J,u.h=new cl,u.g=Pl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new wr(k(u.Y,u,u.g),u.O)),p=u.U,y=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(qi[0]=M.toString()),M=qi);for(var z=0;z<M.length;z++){var ee=Mn(y,M[z],E||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),re(),Zi(u.i,u.u,u.A,u.l,u.R,u.m)}zn.prototype.ca=function(u){u=u.target;const p=this.M;p&&en(u)==3?p.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)e:{const pt=en(this.g);var p=this.g.Ba();const Pn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||pt!=4||p==7||(p==8||0>=Pn?re(3):re(2)),ts(this);var y=this.g.Z();this.X=y;t:if(hl(this)){var E=Xo(this.g);u="";var M=E.length,z=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),ti(this);var ee="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(z&&p==M-1)});E.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=y==200,Ds(this.i,this.u,this.A,this.l,this.R,pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var We,_t=this.g;if((We=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(We)){var Fe=We;break t}}Fe=null}if(y=Fe)jn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qo(this,y);else{this.o=!1,this.s=3,ce(12),Rn(this),ti(this);break e}}if(this.P){y=!0;let mn;for(;!this.J&&this.C<ee.length;)if(mn=Rc(this,ee),mn==Vs){pt==4&&(this.s=4,ce(14),y=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Wo){this.s=4,ce(15),jn(this.i,this.l,ee,"[Invalid Chunk]"),y=!1;break}else jn(this.i,this.l,mn,null),qo(this,mn);if(hl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ee.length!=0||this.h.h||(this.s=1,ce(16),y=!1),this.o=this.o&&y,!y)jn(this.i,this.l,ee,"[Invalid Chunked Response]"),Rn(this),ti(this);else if(0<ee.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Zo(At),At.M=!0,ce(11))}}else jn(this.i,this.l,ee,null),qo(this,ee);pt==4&&Rn(this),this.o&&!this.J&&(pt==4?qs(this.j,this):(this.o=!1,Qe(this)))}else Bs(this.g),y==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Rn(this),ti(this)}}}catch{}finally{}};function hl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Rc(u,p){var y=u.C,E=p.indexOf(`
`,y);return E==-1?Vs:(y=Number(p.substring(y,E)),isNaN(y)?Wo:(E+=1,E+y>p.length?Vs:(p=p.slice(E,E+y),u.C=E+y,p)))}zn.prototype.cancel=function(){this.J=!0,Rn(this)};function Qe(u){u.S=Date.now()+u.I,dl(u,u.I)}function dl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Xe(k(u.ba,u),p)}function ts(u){u.B&&(f.clearTimeout(u.B),u.B=null)}zn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($o(this.i,this.A),this.L!=2&&(re(),ce(17)),Rn(this),this.s=2,ti(this)):dl(this,this.S-u)};function ti(u){u.j.G==0||u.J||qs(u.j,u)}function Rn(u){ts(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ki(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function qo(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Gt(y.h,u))){if(!u.K&&Gt(y.h,u)&&y.G==3){try{var E=y.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Hs(y),Kn(y);else break e;Ws(y),ce(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Xe(k(y.Za,y),6e3));if(1>=pl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pr(y,11)}else if((u.K||y.g==u)&&Hs(y),!oe(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let Fe=M[p];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const At=Fe[3];At!=null&&(y.la=At,y.j.info("VER="+y.la));const pt=Fe[4];pt!=null&&(y.Aa=pt,y.j.info("SVER="+y.Aa));const Pn=Fe[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(E=1.5*Pn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const mn=u.g;if(mn){const ls=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var z=E.h;z.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ko(z,z.h),z.h=null))}if(E.D){const Gs=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(E.ya=Gs,Ke(E.I,E.D,Gs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var ee=u;if(E.qa=Cl(E,E.J?E.ia:null,E.W),ee.K){ml(E.h,ee);var We=ee,_t=E.L;_t&&(We.I=_t),We.B&&(ts(We),Qe(We)),E.g=ee}else as(E);0<y.i.length&&ur(y)}else Fe[0]!="stop"&&Fe[0]!="close"||Pr(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Pr(y,7):Dt(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}re(4)}catch{}}var fl=class{constructor(u,p){this.g=u,this.map=p}};function ns(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pl(u){return u.h?1:u.g?u.g.size:0}function Gt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ko(u,p){u.g?u.g.add(p):u.h=p}function ml(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ns.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return H(u.i)}function Ms(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,E=0;E<y;E++)p.push(u[E]);return p}p=[],y=0;for(E in u)p[y++]=u[E];return p}function bs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const E in u)p[y++]=E;return p}}}function ni(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=bs(u),E=Ms(u),M=E.length,z=0;z<M;z++)p.call(void 0,E[z],y&&y[z],u)}var rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cc(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var E=u[y].indexOf("="),M=null;if(0<=E){var z=u[y].substring(0,E);M=u[y].substring(E+1)}else z=u[y];p(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Sr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Sr){this.h=u.h,is(this,u.j),this.o=u.o,this.g=u.g,ri(this,u.s),this.l=u.l;var p=u.i,y=new or;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ii(this,y),this.m=u.m}else u&&(p=String(u).match(rs))?(this.h=!1,is(this,p[1]||"",!0),this.o=Ve(p[2]||""),this.g=Ve(p[3]||"",!0),ri(this,p[4]),this.l=Ve(p[5]||"",!0),ii(this,p[6]||"",!0),this.m=Ve(p[7]||"")):(this.h=!1,this.i=new or(null,this.h))}Sr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(oi(p,Fs,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(oi(p,Fs,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(oi(y,y.charAt(0)=="/"?_l:vl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",oi(y,Go)),u.join("")};function fn(u){return new Sr(u)}function is(u,p,y){u.j=y?Ve(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ri(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ii(u,p,y){p instanceof or?(u.i=p,ar(u.i,u.h)):(y||(p=oi(p,El)),u.i=new or(p,u.h))}function Ke(u,p,y){u.i.set(p,y)}function si(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oi(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,yl),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fs=/[#\/\?@]/g,vl=/[#\?:]/g,_l=/[#\?]/g,El=/[#\?@]/g,Go=/#/g;function or(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&Cc(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=or.prototype,r.add=function(u,p){Nt(this),this.i=null,u=Cn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function $n(u,p){Nt(u),p=Cn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Wn(u,p){return Nt(u),p=Cn(u,p),u.g.has(p)}r.forEach=function(u,p){Nt(this),this.g.forEach(function(y,E){y.forEach(function(M){u.call(p,M,E,this)},this)},this)},r.na=function(){Nt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let E=0;E<p.length;E++){const M=u[E];for(let z=0;z<M.length;z++)y.push(p[E])}return y},r.V=function(u){Nt(this);let p=[];if(typeof u=="string")Wn(this,u)&&(p=p.concat(this.g.get(Cn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},r.set=function(u,p){return Nt(this),this.i=null,u=Cn(this,u),Wn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function ai(u,p,y){$n(u,p),0<y.length&&(u.i=null,u.g.set(Cn(u,p),H(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var E=p[y];const z=encodeURIComponent(String(E)),ee=this.V(E);for(E=0;E<ee.length;E++){var M=z;ee[E]!==""&&(M+="="+encodeURIComponent(String(ee[E]))),u.push(M)}}return this.i=u.join("&")};function Cn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function ar(u,p){p&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(y,E){var M=E.toLowerCase();E!=M&&($n(this,E),ai(this,M,y))},u)),u.j=p}function Pc(u,p){const y=new Ji;if(f.Image){const E=new Image;E.onload=B(Zt,y,"TestLoadImage: loaded",!0,p,E),E.onerror=B(Zt,y,"TestLoadImage: error",!1,p,E),E.onabort=B(Zt,y,"TestLoadImage: abort",!1,p,E),E.ontimeout=B(Zt,y,"TestLoadImage: timeout",!1,p,E),f.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function wl(u,p){const y=new Ji,E=new AbortController,M=setTimeout(()=>{E.abort(),Zt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(z=>{clearTimeout(M),z.ok?Zt(y,"TestPingServer: ok",!0,p):Zt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Zt(y,"TestPingServer: error",!1,p)})}function Zt(u,p,y,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(y)}catch{}}function kc(){this.g=new Yi}function Tl(u,p,y){const E=y||"";try{ni(u,function(M,z){let ee=M;v(M)&&(ee=Gi(M)),p.push(E+z+"="+encodeURIComponent(ee))})}catch(M){throw p.push(E+"type="+encodeURIComponent("_badmap")),M}}function Ar(u){this.l=u.Ub||null,this.j=u.eb||!1}q(Ar,Un),Ar.prototype.g=function(){return new ss(this.l,this.j)},Ar.prototype.i=function(u){return function(){return u}}({});function ss(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(ss,lt),r=ss.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,qn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Il(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Il(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Hn(this):qn(this),this.readyState==3&&Il(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Hn(this))},r.Qa=function(u){this.g&&(this.response=u,Hn(this))},r.ga=function(){this.g&&Hn(this)};function Hn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Rr(u){let p="";return ke(u,function(y,E){p+=E,p+=":",p+=y,p+=`\r
`}),p}function li(u,p,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Rr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ke(u,p,y))}function et(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(et,lt);var xc=/^https?$/i,Qo=["POST","PUT"];r=et.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Jr(this.o):Jr(Bn),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){os(this,z);return}if(u=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)y.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Qo,p,void 0))||E||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of y)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){os(this,z)}};function os(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Us(u),pn(u)}function Us(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),pn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Yo(this):this.bb())},r.bb=function(){Yo(this)};function Yo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||en(u)!=4||u.Z()!=2)){if(u.u&&en(u)==4)Hi(u.Ea,0,u);else if(ut(u,"readystatechange"),en(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var E;if(E=ee===0){var M=String(u.D).match(rs)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),E=!xc.test(M?M.toLowerCase():"")}y=E}if(y)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var z=2<en(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Us(u)}}finally{pn(u)}}}}function pn(u,p){if(u.g){js(u);const y=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ut(u,"ready");try{y.onreadystatechange=E}catch{}}}function js(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function en(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Qi(p)}};function Xo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bs(u){const p={};u=(u.g&&2<=en(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(oe(u[E]))continue;var y=O(u[E]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=p[M]||[];p[M]=z,z.push(y)}N(p,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Jo(u){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lr("baseRetryDelayMs",5e3,u),this.cb=lr("retryDelaySeedMs",1e4,u),this.Wa=lr("forwardChannelMaxRetries",2,u),this.wa=lr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(u&&u.concurrentRequestLimit),this.Da=new kc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Jo.prototype,r.la=8,r.G=1,r.connect=function(u,p,y,E){ce(0),this.W=u,this.H=p||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Cl(this,null,this.W),ur(this)};function Dt(u){if(zs(u),u.G==3){var p=u.U++,y=fn(u.I);if(Ke(y,"SID",u.K),Ke(y,"RID",p),Ke(y,"TYPE","terminate"),Cr(u,y),p=new zn(u,u.j,p),p.L=2,p.v=si(fn(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Pl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Qe(p)}Rl(u)}function Kn(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function zs(u){Kn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Hs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function ur(u){if(!dn(u.h)&&!u.s){u.s=!0;var p=u.Ga;$e||ie(),te||($e(),te=!0),me.add(p,u),u.B=0}}function Nc(u,p){return pl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Xe(k(u.Ga,u,p),Al(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new zn(this,this.j,u);let z=this.o;if(this.S&&(z?(z=I(z),x(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=ui(this,M,p),y=fn(this.I),Ke(y,"RID",u),Ke(y,"CVER",22),this.D&&Ke(y,"X-HTTP-Session-Id",this.D),Cr(this,y),z&&(this.O?p="headers="+encodeURIComponent(String(Rr(z)))+"&"+p:this.m&&li(y,this.m,z)),Ko(this.h,M),this.Ua&&Ke(y,"TYPE","init"),this.P?(Ke(y,"$req",p),Ke(y,"SID","null"),M.T=!0,Ls(M,y,null)):Ls(M,y,p),this.G=2}}else this.G==3&&(u?$s(this,u):this.i.length==0||dn(this.h)||$s(this))};function $s(u,p){var y;p?y=p.l:y=u.U++;const E=fn(u.I);Ke(E,"SID",u.K),Ke(E,"RID",y),Ke(E,"AID",u.T),Cr(u,E),u.m&&u.o&&li(E,u.m,u.o),y=new zn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ui(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ko(u.h,y),Ls(y,E,p)}function Cr(u,p){u.H&&ke(u.H,function(y,E){Ke(p,E,y)}),u.l&&ni({},function(y,E){Ke(p,E,y)})}function ui(u,p,y){y=Math.min(u.i.length,y);var E=u.l?k(u.l.Na,u.l,u):null;e:{var M=u.i;let z=-1;for(;;){const ee=["count="+y];z==-1?0<y?(z=M[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let We=!0;for(let _t=0;_t<y;_t++){let Fe=M[_t].g;const At=M[_t].map;if(Fe-=z,0>Fe)z=Math.max(0,M[_t].g-100),We=!1;else try{Tl(At,ee,"req"+Fe+"_")}catch{E&&E(At)}}if(We){E=ee.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,E}function as(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;$e||ie(),te||($e(),te=!0),me.add(p,u),u.v=0}}function Ws(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Xe(k(u.Fa,u),Al(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Sl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Xe(k(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Kn(this),Sl(this))};function Zo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Sl(u){u.g=new zn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=fn(u.qa);Ke(p,"RID","rpc"),Ke(p,"SID",u.K),Ke(p,"AID",u.T),Ke(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(p,"TO",u.ja),Ke(p,"TYPE","xmlhttp"),Cr(u,p),u.m&&u.o&&li(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=si(fn(p)),y.m=null,y.P=!0,Ho(y,u)}r.Za=function(){this.C!=null&&(this.C=null,Kn(this),Ws(this),ce(19))};function Hs(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function qs(u,p){var y=null;if(u.g==p){Hs(u),Zo(u),u.g=null;var E=2}else if(Gt(u.h,p))y=p.D,ml(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;E=Ir(),ut(E,new Ge(E,y)),ur(u)}else as(u);else if(M=p.s,M==3||M==0&&0<p.X||!(E==1&&Nc(u,p)||E==2&&Ws(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function Al(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function Pr(u,p){if(u.j.info("Error code "+p),p==2){var y=k(u.fb,u),E=u.Xa;const M=!E;E=new Sr(E||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||is(E,"https"),si(E),M?Pc(E.toString(),y):wl(E.toString(),y)}else ce(2);u.G=0,u.l&&u.l.sa(p),Rl(u),zs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Rl(u){if(u.G=0,u.ka=[],u.l){const p=gl(u.h);(p.length!=0||u.i.length!=0)&&(F(u.ka,p),F(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Cl(u,p,y){var E=y instanceof Sr?fn(y):new Sr(y);if(E.g!="")p&&(E.g=p+"."+E.g),ri(E,E.s);else{var M=f.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var z=new Sr(null);E&&is(z,E),p&&(z.g=p),M&&ri(z,M),y&&(z.l=y),E=z}return y=u.D,p=u.ya,y&&p&&Ke(E,y,p),Ke(E,"VER",u.la),Cr(u,E),E}function Pl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new et(new Ar({eb:y})):new et(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}r=ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ks(){}Ks.prototype.g=function(u,p){return new Qt(u,p)};function Qt(u,p){lt.call(this),this.g=new Jo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!oe(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!oe(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new cr(this)}q(Qt,lt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Dt(this.g)},Qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Gi(u),u=y);p.i.push(new fl(p.Ya++,u)),p.G==3&&ur(p)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Qt.aa.N.call(this)};function kl(u){Sn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}q(kl,Sn);function xl(){ei.call(this),this.status=1}q(xl,ei);function cr(u){this.g=u}q(cr,ea),cr.prototype.ua=function(){ut(this.g,"a")},cr.prototype.ta=function(u){ut(this.g,new kl(u))},cr.prototype.sa=function(u){ut(this.g,new xl)},cr.prototype.ra=function(){ut(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Ov=function(){return new Ks},Dv=function(){return Ir()},Nv=An,Rd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Ou=Os,ul.COMPLETE="complete",xv=ul,Zr.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Pa=Zr,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,kv=et}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});const Fg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new qd("@firebase/firestore");function Aa(){return Rs.logLevel}function de(r,...e){if(Rs.logLevel<=Le.DEBUG){const t=e.map(sf);Rs.debug(`Firestore (${Uo}): ${r}`,...t)}}function Hr(r,...e){if(Rs.logLevel<=Le.ERROR){const t=e.map(sf);Rs.error(`Firestore (${Uo}): ${r}`,...t)}}function Co(r,...e){if(Rs.logLevel<=Le.WARN){const t=e.map(sf);Rs.warn(`Firestore (${Uo}): ${r}`,...t)}}function sf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+r;throw Hr(e),new Error(e)}function He(r,e){r||Ae()}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}}class oA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aA{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new zr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new zr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string"),new Vv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Ht(e)}}class lA{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uA{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new lA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){He(this.o===void 0);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He(typeof t.token=="string"),this.R=t.token,new cA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=dA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Po(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new It(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new It(0,0))}static max(){return new Re(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(),s===void 0?s=e.length-t:s>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Wa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nt extends Wa{construct(e,t,s){return new nt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}const fA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Wa{construct(e,t,s){return new Mt(e,t,s)}static isValidIdentifier(e){return fA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ye(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(nt.fromString(e))}static fromName(e){return new Ee(nt.fromString(e).popFirst(5))}static empty(){return new Ee(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new nt(e.slice()))}}function pA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new It(t+1,0):new It(t,s));return new Fi(o,Ee.empty(),e)}function mA(r){return new Fi(r.readTime,r.key,-1)}class Fi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Fi(Re.min(),Ee.empty(),-1)}static max(){return new Fi(Re.max(),Ee.empty(),-1)}}function gA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==yA)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,s)=>{t(e)})}static reject(e){return new X((t,s)=>{s(e)})}static waitFor(e){return new X((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>s(g))}),h=!0,l===o&&t()})}static or(e){let t=X.resolve(!1);for(const s of e)t=t.next(o=>o?X.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new X((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(w=>{h[v]=w,++f,f===l&&s(h)},w=>o(w))}})}static doWhile(e,t){return new X((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function _A(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function il(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}of.oe=-1;function uc(r){return r==null}function Gu(r){return r===0&&1/r==-1/0}function EA(r){return typeof r=="number"&&Number.isInteger(r)&&!Gu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Mv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Lt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jg(this.data.getIterator())}getIteratorFrom(e){return new jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class jg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new _n([])}unionWith(e){let t=new bt(Mt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bv("Invalid base64 string: "+l):l}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const wA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(r){if(He(!!r),typeof r=="string"){let e=0;const t=wA.exec(r);if(He(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Cs(r){return typeof r=="string"?Ut.fromBase64String(r):Ut.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function lf(r){const e=r.mapValue.fields.__previous_value__;return af(e)?lf(e):e}function Ha(r){const e=Ui(r.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,s,o,l,h,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={mapValue:{}};function Ps(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?af(r)?4:SA(r)?9007199254740991:IA(r)?10:11:Ae()}function _r(r,e){if(r===e)return!0;const t=Ps(r);if(t!==Ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ha(r).isEqual(Ha(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ui(o.timestampValue),f=Ui(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Cs(o.bytesValue).isEqual(Cs(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),f=ht(l.doubleValue);return h===f?Gu(h)===Gu(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Po(r.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Ug(h)!==Ug(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!_r(h[g],f[g])))return!1;return!0}(r,e);default:return Ae()}}function Ka(r,e){return(r.values||[]).find(t=>_r(t,e))!==void 0}function ko(r,e){if(r===e)return 0;const t=Ps(r),s=Ps(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return Bg(r.timestampValue,e.timestampValue);case 4:return Bg(Ha(r),Ha(e));case 5:return ze(r.stringValue,e.stringValue);case 6:return function(l,h){const f=Cs(l),g=Cs(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let v=0;v<f.length&&v<g.length;v++){const w=ze(f[v],g[v]);if(w!==0)return w}return ze(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=ze(ht(l.latitude),ht(h.latitude));return f!==0?f:ze(ht(l.longitude),ht(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return zg(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,v,w;const T=l.fields||{},k=h.fields||{},B=(f=T.value)===null||f===void 0?void 0:f.arrayValue,q=(g=k.value)===null||g===void 0?void 0:g.arrayValue,H=ze(((v=B?.values)===null||v===void 0?void 0:v.length)||0,((w=q?.values)===null||w===void 0?void 0:w.length)||0);return H!==0?H:zg(B,q)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Cu.mapValue&&h===Cu.mapValue)return 0;if(l===Cu.mapValue)return 1;if(h===Cu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=h.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const k=ze(g[T],w[T]);if(k!==0)return k;const B=ko(f[g[T]],v[w[T]]);if(B!==0)return B}return ze(g.length,w.length)}(r.mapValue,e.mapValue);default:throw Ae()}}function Bg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=Ui(r),s=Ui(e),o=ze(t.seconds,s.seconds);return o!==0?o:ze(t.nanos,s.nanos)}function zg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ko(t[o],s[o]);if(l)return l}return ze(t.length,s.length)}function xo(r){return Cd(r)}function Cd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ui(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Cs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Ee.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Cd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Cd(t.fields[h])}`;return o+"}"}(r.mapValue):Ae()}function Pd(r){return!!r&&"integerValue"in r}function uf(r){return!!r&&"arrayValue"in r}function $g(r){return!!r&&"nullValue"in r}function Wg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vu(r){return!!r&&"mapValue"in r}function IA(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Oa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Oa(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function SA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(t)}setAll(e){let t=Mt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Oa(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Vu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){xs(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new ln(Oa(this.value))}}function Fv(r){const e=[];return xs(r.fields,(t,s)=>{const o=new Mt([t]);if(Vu(s)){const l=Fv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new qt(e,0,Re.min(),Re.min(),Re.min(),ln.empty(),0)}static newFoundDocument(e,t,s,o){return new qt(e,1,t,Re.min(),s,o,0)}static newNoDocument(e,t){return new qt(e,2,t,Re.min(),Re.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Re.min(),Re.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.position=e,this.inclusive=t}}function Hg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=ko(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function qg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!_r(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function AA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{}class Tt extends Uv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new CA(e,t,s):t==="array-contains"?new xA(e,s):t==="in"?new NA(e,s):t==="not-in"?new DA(e,s):t==="array-contains-any"?new OA(e,s):new Tt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new PA(e,s):new kA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ko(t,this.value)):t!==null&&Ps(this.value)===Ps(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends Uv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Er(e,t)}matches(e){return jv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jv(r){return r.op==="and"}function Bv(r){return RA(r)&&jv(r)}function RA(r){for(const e of r.filters)if(e instanceof Er)return!1;return!0}function kd(r){if(r instanceof Tt)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(Bv(r))return r.filters.map(e=>kd(e)).join(",");{const e=r.filters.map(t=>kd(t)).join(",");return`${r.op}(${e})`}}function zv(r,e){return r instanceof Tt?function(s,o){return o instanceof Tt&&s.op===o.op&&s.field.isEqual(o.field)&&_r(s.value,o.value)}(r,e):r instanceof Er?function(s,o){return o instanceof Er&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&zv(h,o.filters[f]),!0):!1}(r,e):void Ae()}function $v(r){return r instanceof Tt?function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`}(r):r instanceof Er?function(t){return t.op.toString()+" {"+t.getFilters().map($v).join(" ,")+"}"}(r):"Filter"}class CA extends Tt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class PA extends Tt{constructor(e,t){super(e,"in",t),this.keys=Wv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kA extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=Wv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class xA extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uf(t)&&Ka(t.arrayValue,this.value)}}class NA extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ka(this.value.arrayValue,t)}}class DA extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ka(this.value.arrayValue,t)}}class OA extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ka(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function Kg(r,e=null,t=[],s=[],o=null,l=null,h=null){return new VA(r,e,t,s,o,l,h)}function cf(r){const e=Ce(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>kd(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>xo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>xo(s)).join(",")),e.ue=t}return e.ue}function hf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!AA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!zv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qg(r.startAt,e.startAt)&&qg(r.endAt,e.endAt)}function xd(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LA(r,e,t,s,o,l,h,f){return new cc(r,e,t,s,o,l,h,f)}function df(r){return new cc(r)}function Gg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function MA(r){return r.collectionGroup!==null}function Va(r){const e=Ce(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new bt(Mt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Yu(l,s))}),t.has(Mt.keyField().canonicalString())||e.ce.push(new Yu(Mt.keyField(),s))}return e.ce}function yr(r){const e=Ce(r);return e.le||(e.le=bA(e,Va(r))),e.le}function bA(r,e){if(r.limitType==="F")return Kg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Yu(o.field,l)});const t=r.endAt?new Qu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Qu(r.startAt.position,r.startAt.inclusive):null;return Kg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Nd(r,e,t){return new cc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function hc(r,e){return hf(yr(r),yr(e))&&r.limitType===e.limitType}function Hv(r){return`${cf(yr(r))}|lt:${r.limitType}`}function go(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>$v(o)).join(", ")}]`),uc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>xo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>xo(o)).join(",")),`Target(${s})`}(yr(r))}; limitType=${r.limitType})`}function dc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of Va(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,g){const v=Hg(h,f,g);return h.inclusive?v<=0:v<0}(s.startAt,Va(s),o)||s.endAt&&!function(h,f,g){const v=Hg(h,f,g);return h.inclusive?v>=0:v>0}(s.endAt,Va(s),o))}(r,e)}function FA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function qv(r){return(e,t)=>{let s=!1;for(const o of Va(r)){const l=UA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function UA(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),v=f.data.field(l);return g!==null&&v!==null?ko(g,v):Ae()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return Mv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new ot(Ee.comparator);function qr(){return jA}const Kv=new ot(Ee.comparator);function ka(...r){let e=Kv;for(const t of r)e=e.insert(t.key,t);return e}function Gv(r){let e=Kv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ts(){return La()}function Qv(){return La()}function La(){return new jo(r=>r.toString(),(r,e)=>r.isEqual(e))}const BA=new ot(Ee.comparator),zA=new bt(Ee.comparator);function Oe(...r){let e=zA;for(const t of r)e=e.add(t);return e}const $A=new bt(ze);function WA(){return $A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gu(e)?"-0":e}}function Yv(r){return{integerValue:""+r}}function HA(r,e){return EA(e)?Yv(e):ff(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this._=void 0}}function qA(r,e,t){return r instanceof Ga?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&af(l)&&(l=lf(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Qa?Jv(r,e):r instanceof Ya?Zv(r,e):function(o,l){const h=Xv(o,l),f=Qg(h)+Qg(o.Pe);return Pd(h)&&Pd(o.Pe)?Yv(f):ff(o.serializer,f)}(r,e)}function KA(r,e,t){return r instanceof Qa?Jv(r,e):r instanceof Ya?Zv(r,e):t}function Xv(r,e){return r instanceof Xu?function(s){return Pd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Ga extends fc{}class Qa extends fc{constructor(e){super(),this.elements=e}}function Jv(r,e){const t=e_(e);for(const s of r.elements)t.some(o=>_r(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ya extends fc{constructor(e){super(),this.elements=e}}function Zv(r,e){let t=e_(e);for(const s of r.elements)t=t.filter(o=>!_r(o,s));return{arrayValue:{values:t}}}class Xu extends fc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Qg(r){return ht(r.integerValue||r.doubleValue)}function e_(r){return uf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.field=e,this.transform=t}}function QA(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Qa&&o instanceof Qa||s instanceof Ya&&o instanceof Ya?Po(s.elements,o.elements,_r):s instanceof Xu&&o instanceof Xu?_r(s.Pe,o.Pe):s instanceof Ga&&o instanceof Ga}(r.transform,e.transform)}class YA{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class pc{}function t_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new pf(r.key,tr.none()):new sl(r.key,r.data,tr.none());{const t=r.data,s=ln.empty();let o=new bt(Mt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new $i(r.key,s,new _n(o.toArray()),tr.none())}}function XA(r,e,t){r instanceof sl?function(o,l,h){const f=o.value.clone(),g=Xg(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof $i?function(o,l,h){if(!Lu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Xg(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(n_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ma(r,e,t,s){return r instanceof sl?function(l,h,f,g){if(!Lu(l.precondition,h))return f;const v=l.value.clone(),w=Jg(l.fieldTransforms,g,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(r,e,t,s):r instanceof $i?function(l,h,f,g){if(!Lu(l.precondition,h))return f;const v=Jg(l.fieldTransforms,g,h),w=h.data;return w.setAll(n_(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,f){return Lu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function JA(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Xv(s.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function Yg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Po(s,o,(l,h)=>QA(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class sl extends pc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $i extends pc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function n_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Xg(r,e,t){const s=new Map;He(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,KA(h,f,t[o]))}return s}function Jg(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,qA(l,h,e))}return s}class pf extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZA extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&XA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ma(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ma(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Qv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=t_(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Re.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(t,s)=>Yg(t,s))&&Po(this.baseMutations,e.baseMutations,(t,s)=>Yg(t,s))}}class mf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){He(e.mutations.length===s.length);let o=function(){return BA}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new mf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Ue;function rR(r){switch(r){default:return Ae();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function r_(r){if(r===void 0)return Hr("GRPC error has no .code"),Y.UNKNOWN;switch(r){case gt.OK:return Y.OK;case gt.CANCELLED:return Y.CANCELLED;case gt.UNKNOWN:return Y.UNKNOWN;case gt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case gt.INTERNAL:return Y.INTERNAL;case gt.UNAVAILABLE:return Y.UNAVAILABLE;case gt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case gt.NOT_FOUND:return Y.NOT_FOUND;case gt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case gt.ABORTED:return Y.ABORTED;case gt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case gt.DATA_LOSS:return Y.DATA_LOSS;default:return Ae()}}(Ue=gt||(gt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new Is([4294967295,4294967295],0);function Zg(r){const e=iR().encode(r),t=new Pv;return t.update(e),new Uint8Array(t.digest())}function ey(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,s],0),new Is([o,l],0)]}class gf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new xa(`Invalid padding: ${t}`);if(s<0)throw new xa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new xa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Is.fromNumber(this.Ie)}Ee(e,t,s){let o=e.add(t.multiply(Is.fromNumber(s)));return o.compare(sR)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Zg(e),[s,o]=ey(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new gf(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.Ie===0)return;const t=Zg(e),[s,o]=ey(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new mc(Re.min(),o,new ot(ze),qr(),Oe())}}class ol{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ol(s,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class i_{constructor(e,t){this.targetId=e,this.me=t}}class s_{constructor(e,t,s=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ty{constructor(){this.fe=0,this.ge=ry(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),s=Oe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae()}}),new ol(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ry()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oR{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=ny(),this.Qe=new ot(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,s=e.me.count,o=this.Je(t);if(o){const l=o.target;if(xd(l))if(s===0){const h=new Ee(l.path);this.Ue(t,h,qt.newNoDocument(h,Re.min()))}else He(s===1);else{const h=this.Ye(t);if(h!==s){const f=this.Ze(e),g=f?this.Xe(f,e,h):1;if(g!==0){this.je(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Cs(s).toUint8Array()}catch(g){if(g instanceof bv)return Co("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new gf(h,o,l)}catch(g){return Co(g instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((l,h)=>{const f=this.Je(h);if(f){if(l.current&&xd(f.target)){const g=new Ee(f.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,qt.newNoDocument(g,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=Oe();this.qe.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const v=this.Je(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new mc(e,t,this.Qe,this.ke,s);return this.ke=qr(),this.qe=ny(),this.Qe=new ot(ze),o}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ty,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new bt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ty),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ny(){return new ot(Ee.comparator)}function ry(){return new ot(Ee.comparator)}const aR={asc:"ASCENDING",desc:"DESCENDING"},lR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uR={and:"AND",or:"OR"};class cR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dd(r,e){return r.useProto3Json||uc(e)?e:{value:e}}function Ju(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function hR(r,e){return Ju(r,e.toTimestamp())}function vr(r){return He(!!r),Re.fromTimestamp(function(t){const s=Ui(t);return new It(s.seconds,s.nanos)}(r))}function yf(r,e){return Od(r,e).canonicalString()}function Od(r,e){const t=function(o){return new nt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function a_(r){const e=nt.fromString(r);return He(d_(e)),e}function Vd(r,e){return yf(r.databaseId,e.path)}function cd(r,e){const t=a_(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(u_(t))}function l_(r,e){return yf(r.databaseId,e)}function dR(r){const e=a_(r);return e.length===4?nt.emptyPath():u_(e)}function Ld(r){return new nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function u_(r){return He(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function iy(r,e,t){return{name:Vd(r,e),fields:t.value.mapValue.fields}}function fR(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,w){return v.useProto3Json?(He(w===void 0||typeof w=="string"),Ut.fromBase64String(w||"")):(He(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Ut.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(v){const w=v.code===void 0?Y.UNKNOWN:r_(v.code);return new ye(w,v.message||"")}(h);t=new s_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=cd(r,s.document.name),l=vr(s.document.updateTime),h=s.document.createTime?vr(s.document.createTime):Re.min(),f=new ln({mapValue:{fields:s.document.fields}}),g=qt.newFoundDocument(o,l,h,f),v=s.targetIds||[],w=s.removedTargetIds||[];t=new Mu(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=cd(r,s.document),l=s.readTime?vr(s.readTime):Re.min(),h=qt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Mu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=cd(r,s.document),l=s.removedTargetIds||[];t=new Mu([],l,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new nR(o,l),f=s.targetId;t=new i_(f,h)}}return t}function pR(r,e){let t;if(e instanceof sl)t={update:iy(r,e.key,e.value)};else if(e instanceof pf)t={delete:Vd(r,e.key)};else if(e instanceof $i)t={update:iy(r,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof ZA))return Ae();t={verify:Vd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof Ga)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Xu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Ae()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:hR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae()}(r,e.precondition)),t}function mR(r,e){return r&&r.length>0?(He(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?vr(o.updateTime):vr(l);return h.isEqual(Re.min())&&(h=vr(l)),new YA(h,o.transformResults||[])}(t,e))):[]}function gR(r,e){return{documents:[l_(r,e.path)]}}function yR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=l_(r,o);const l=function(v){if(v.length!==0)return h_(Er.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(w=>function(k){return{field:yo(k.field),direction:ER(k.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=Dd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{_t:t,parent:o}}function vR(r){let e=dR(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){He(s===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const k=c_(T);return k instanceof Er&&Bv(k)?k.getFilters():[k]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(k=>function(q){return new Yu(vo(q.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(k))}(t.orderBy));let f=null;t.limit&&(f=function(T){let k;return k=typeof T=="object"?T.value:T,uc(k)?null:k}(t.limit));let g=null;t.startAt&&(g=function(T){const k=!!T.before,B=T.values||[];return new Qu(B,k)}(t.startAt));let v=null;return t.endAt&&(v=function(T){const k=!T.before,B=T.values||[];return new Qu(B,k)}(t.endAt)),LA(e,o,h,l,f,"F",g,v)}function _R(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vo(t.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vo(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return Tt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(r):r.fieldFilter!==void 0?function(t){return Tt.create(vo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Er.create(t.compositeFilter.filters.map(s=>c_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(r):Ae()}function ER(r){return aR[r]}function wR(r){return lR[r]}function TR(r){return uR[r]}function yo(r){return{fieldPath:r.canonicalString()}}function vo(r){return Mt.fromServerFormat(r.fieldPath)}function h_(r){return r instanceof Tt?function(t){if(t.op==="=="){if(Wg(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if($g(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wg(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if($g(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:wR(t.op),value:t.value}}}(r):r instanceof Er?function(t){const s=t.getFilters().map(o=>h_(o));return s.length===1?s[0]:{compositeFilter:{op:TR(t.op),filters:s}}}(r):Ae()}function IR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,s,o,l=Re.min(),h=Re.min(),f=Ut.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function AR(r){const e=vR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.un=new CR}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Fi.min())}updateCollectionGroup(e,t,s){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class CR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new bt(nt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new bt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new No(0)}static kn(){return new No(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?X.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Ma(s.mutation,o,_n.empty(),It.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Oe()){const o=Ts();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=ka();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Ts();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Oe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=qr();const h=La(),f=function(){return La()}();return t.forEach((g,v)=>{const w=s.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof $i)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Ma(w.mutation,v,w.mutation.getFieldMask(),It.now())):h.set(v.key,_n.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,w)=>h.set(v,w)),t.forEach((v,w)=>{var T;return f.set(v,new kR(w,(T=h.get(v))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const s=La();let o=new ot((h,f)=>h-f),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let w=s.get(g)||_n.empty();w=f.applyToLocalView(v,w),s.set(g,w);const T=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,w=g.value,T=Qv();w.forEach(k=>{if(!l.has(k)){const B=t_(t.get(k),s.get(k));B!==null&&T.set(k,B),l=l.add(k)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,T))}return X.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):X.resolve(Ts());let f=-1,g=l;return h.next(v=>X.forEach(v,(w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?X.resolve():this.remoteDocumentCache.getEntry(e,w).next(k=>{g=g.insert(w,k)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,Oe())).next(w=>({batchId:f,changes:Gv(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(s=>{let o=ka();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=ka();return this.indexManager.getCollectionParents(e,l).next(f=>X.forEach(f,g=>{const v=function(T,k){return new cc(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(w=>{w.forEach((T,k)=>{h=h.insert(T,k)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((g,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,qt.newInvalidDocument(w)))});let f=ka();return h.forEach((g,v)=>{const w=l.get(g);w!==void 0&&Ma(w.mutation,v,_n.empty(),It.now()),dc(t,v)&&(f=f.insert(g,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:vr(o.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:AR(o.bundledQuery),readTime:vr(o.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.overlays=new ot(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ts();return X.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.ht(e,t,l)}),X.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(s)),X.resolve()}getOverlaysForCollection(e,t,s){const o=Ts(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot((v,w)=>v-w);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let w=l.get(v.largestBatchId);w===null&&(w=Ts(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const f=Ts(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,w)=>f.set(v,w)),!(f.size()>=o)););return X.resolve(f)}ht(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new tR(t,s));let l=this.Ir.get(t);l===void 0&&(l=Oe(),this.Ir.set(t,l)),this.Ir.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Tr=new bt(xt.Er),this.dr=new bt(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new xt(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Vr(new xt(e,t))}mr(e,t){e.forEach(s=>this.removeReference(s,t))}gr(e){const t=new Ee(new nt([])),s=new xt(t,e),o=new xt(t,e+1),l=[];return this.dr.forEachInRange([s,o],h=>{this.Vr(h),l.push(h.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new nt([])),s=new xt(t,e),o=new xt(t,e+1);let l=Oe();return this.dr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new xt(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class xt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new bt(xt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new eR(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new xt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.vr(s),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([s,o],h=>{const f=this.Dr(h.wr);l.push(f)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new bt(ze);return t.forEach(o=>{const l=new xt(o,0),h=new xt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],f=>{s=s.add(f.wr)})}),X.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new xt(new Ee(l),0);let f=new bt(ze);return this.br.forEachWhile(g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.wr)),!0)},h),X.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach(s=>{const o=this.Dr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){He(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return X.forEach(t.mutations,o=>{const l=new xt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,t){const s=new xt(t,0),o=this.br.firstAfterOrEqual(s);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.Mr=e,this.docs=function(){return new ot(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return X.resolve(s?s.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let s=qr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():qt.newInvalidDocument(o))}),X.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=qr();const h=t.path,f=new Ee(h.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||gA(mA(w),s)<=0||(o.has(w.key)||dc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae()}Or(e,t){return X.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new MR(this)}getSize(e){return X.resolve(this.size)}}class MR extends PR{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)}),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.persistence=e,this.Nr=new jo(t=>cf(t),hf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vf,this.targetCount=0,this.kr=No.Bn()}forEachTarget(e,t){return this.Nr.forEach((s,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new No(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Nr.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),X.waitFor(l).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return X.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),X.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return X.resolve(s)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new OR,this.referenceDelegate=e(this),this.Ur=new bR(this),this.indexManager=new RR,this.remoteDocumentCache=function(o){return new LR(o)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new SR(t),this.Gr=new NR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new VR(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new UR(this.Qr.next());return this.referenceDelegate.zr(),s(o).next(l=>this.referenceDelegate.jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Hr(e,t){return X.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,t)))}}class UR extends vA{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Jr=new vf,this.Yr=null}static Zr(e){return new _f(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),X.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Xr.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,s=>{const o=Ee.fromPath(s);return this.ei(e,o).next(l=>{l||t.removeEntry(o,Re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=o}static Wi(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Ef(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return x0()?8:_A(Kt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Yi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Zi(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new jR;return this.Xi(e,t,h).next(f=>{if(l.result=f,this.zi)return this.es(e,t,h,f.size)})}).next(()=>l.result)}es(e,t,s,o){return s.documentReadCount<this.ji?(Aa()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Aa()<=Le.DEBUG&&de("QueryEngine","Query:",go(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Aa()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(t))):X.resolve())}Yi(e,t){if(Gg(t))return X.resolve(null);let s=yr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Nd(t,null,"F"),s=yr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Oe(...l);return this.Ji.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(g=>{const v=this.ts(t,f);return this.ns(t,v,h,g.readTime)?this.Yi(e,Nd(t,null,"F")):this.rs(e,v,t,g)}))})))}Zi(e,t,s,o){return Gg(t)||o.isEqual(Re.min())?X.resolve(null):this.Ji.getDocuments(e,s).next(l=>{const h=this.ts(t,l);return this.ns(t,h,s,o)?X.resolve(null):(Aa()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(t)),this.rs(e,h,t,pA(o,-1)).next(f=>f))})}ts(e,t){let s=new bt(qv(e));return t.forEach((o,l)=>{dc(e,l)&&(s=s.add(l))}),s}ns(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,s){return Aa()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",go(t)),this.Ji.getDocumentsMatchingQuery(e,t,Fi.min(),s)}rs(e,t,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,s,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(ze),this._s=new jo(l=>cf(l),hf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function $R(r,e,t,s){return new zR(r,e,t,s)}async function f_(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let g=Oe();for(const v of o){h.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of l){f.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next(v=>({hs:v,removedBatchIds:h,addedBatchIds:f}))})})}function WR(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return function(f,g,v,w){const T=v.batch,k=T.keys();let B=X.resolve();return k.forEach(q=>{B=B.next(()=>w.getEntry(g,q)).next(H=>{const F=v.docVersions.get(q);He(F!==null),H.version.compareTo(F)<0&&(T.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),w.addEntry(H)))})}),B.next(()=>f.mutationQueue.removeMutationBatch(g,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let g=Oe();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function p_(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function HR(r,e){const t=Ce(r),s=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach((w,T)=>{const k=o.get(T);if(!k)return;f.push(t.Ur.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.Ur.addMatchingKeys(l,w.addedDocuments,T)));let B=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?B=B.withResumeToken(Ut.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):w.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(w.resumeToken,s)),o=o.insert(T,B),function(H,F,ne){return H.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0}(k,B,w)&&f.push(t.Ur.updateTargetData(l,B))});let g=qr(),v=Oe();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(qR(l,h,e.documentUpdates).next(w=>{g=w.Ps,v=w.Is})),!s.isEqual(Re.min())){const w=t.Ur.getLastRemoteSnapshotVersion(l).next(T=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(w)}return X.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.os=o,l))}function qR(r,e,t){let s=Oe(),o=Oe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=qr();return t.forEach((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):de("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{Ps:h,Is:o}})}function KR(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function GR(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Ur.getTargetData(s,e).next(l=>l?(o=l,X.resolve(o)):t.Ur.allocateTargetId(s).next(h=>(o=new Ni(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s})}async function Md(r,e,t){const s=Ce(r),o=s.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!il(h))throw h;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function sy(r,e,t){const s=Ce(r);let o=Re.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,w){const T=Ce(g),k=T._s.get(w);return k!==void 0?X.resolve(T.os.get(k)):T.Ur.getTargetData(v,w)}(s,h,yr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>s.ss.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?l:Oe())).next(f=>(QR(s,FA(e),f),{documents:f,Ts:l})))}function QR(r,e,t){let s=r.us.get(e)||Re.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.us.set(e,s)}class oy{constructor(){this.activeTargetIds=WA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YR{constructor(){this.so=new oy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=null;function hd(){return Pu===null?Pu=function(){return 268435456+Math.round(2147483648*Math.random())}():Pu++,"0x"+Pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class eC extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,s,o,l,h){const f=hd(),g=this.xo(t,s.toUriEncodedString());de("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,l,h),this.No(t,g,v,o).then(w=>(de("RestConnection",`Received RPC '${t}' ${f}: `,w),w),w=>{throw Co("RestConnection",`RPC '${t}' ${f} failed with error: `,w,"url: ",g,"request:",o),w})}Lo(t,s,o,l,h,f){return this.Mo(t,s,o,l,h)}Oo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}xo(t,s){const o=JR[t];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,o){const l=hd();return new Promise((h,f)=>{const g=new kv;g.setWithCredentials(!0),g.listenOnce(xv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ou.NO_ERROR:const w=g.getResponseJson();de(Wt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Ou.TIMEOUT:de(Wt,`RPC '${e}' ${l} timed out`),f(new ye(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:const T=g.getStatus();if(de(Wt,`RPC '${e}' ${l} failed with status:`,T,"response text:",g.getResponseText()),T>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const B=k?.error;if(B&&B.status&&B.message){const q=function(F){const ne=F.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ne)>=0?ne:Y.UNKNOWN}(B.status);f(new ye(q,B.message))}else f(new ye(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ye(Y.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{de(Wt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(o);de(Wt,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",v,s,15)})}Bo(e,t,s){const o=hd(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ov(),f=Dv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");de(Wt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const T=h.createWebChannel(w,g);let k=!1,B=!1;const q=new ZR({Io:F=>{B?de(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(k||(de(Wt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),k=!0),de(Wt,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},To:()=>T.close()}),H=(F,ne,oe)=>{F.listen(ne,ae=>{try{oe(ae)}catch(we){setTimeout(()=>{throw we},0)}})};return H(T,Pa.EventType.OPEN,()=>{B||(de(Wt,`RPC '${e}' stream ${o} transport opened.`),q.yo())}),H(T,Pa.EventType.CLOSE,()=>{B||(B=!0,de(Wt,`RPC '${e}' stream ${o} transport closed`),q.So())}),H(T,Pa.EventType.ERROR,F=>{B||(B=!0,Co(Wt,`RPC '${e}' stream ${o} transport errored:`,F),q.So(new ye(Y.UNAVAILABLE,"The operation could not be completed")))}),H(T,Pa.EventType.MESSAGE,F=>{var ne;if(!B){const oe=F.data[0];He(!!oe);const ae=oe,we=ae.error||((ne=ae[0])===null||ne===void 0?void 0:ne.error);if(we){de(Wt,`RPC '${e}' stream ${o} received error:`,we);const Me=we.status;let ke=function(R){const x=gt[R];if(x!==void 0)return r_(x)}(Me),N=we.message;ke===void 0&&(ke=Y.INTERNAL,N="Unknown error status: "+Me+" with message "+we.message),B=!0,q.So(new ye(ke,N)),T.close()}else de(Wt,`RPC '${e}' stream ${o} received:`,oe),q.bo(oe)}}),H(f,Nv.STAT_EVENT,F=>{F.stat===Rd.PROXY?de(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Rd.NOPROXY&&de(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.wo()},0),q}}function dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(r){return new cR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,s,o,l,h,f,g){this.ui=e,this.Ho=s,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new m_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Yo===t&&this.P_(s,o)},s=>{e(()=>{const o=new ye(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)})})}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{s(()=>this.I_(o))}),this.stream.onMessage(o=>{s(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tC extends g_{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=fR(this.serializer,e),s=function(l){if(!("targetChange"in l))return Re.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?vr(h.readTime):Re.min()}(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=Ld(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=xd(g)?{documents:gR(l,g)}:{query:yR(l,g)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=o_(l,h.resumeToken);const v=Dd(l,h.expectedCount);v!==null&&(f.expectedCount=v)}else if(h.snapshotVersion.compareTo(Re.min())>0){f.readTime=Ju(l,h.snapshotVersion.toTimestamp());const v=Dd(l,h.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=_R(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=Ld(this.serializer),t.removeTarget=e,this.a_(t)}}class nC extends g_{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=mR(e.writeResults,e.commitTime),s=vr(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=Ld(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>pR(this.serializer,s))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Mo(e,Od(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(Y.UNKNOWN,l.toString())})}Lo(e,t,s,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Lo(e,Od(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(Y.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hr(t),this.D_=!1):de("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{s.enqueueAndForget(async()=>{Ns(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(g){const v=Ce(g);v.L_.add(4),await al(v),v.q_.set("Unknown"),v.L_.delete(4),await yc(v)}(this))})}),this.q_=new iC(s,o)}}async function yc(r){if(Ns(r))for(const e of r.B_)await e(!0)}async function al(r){for(const e of r.B_)await e(!1)}function y_(r,e){const t=Ce(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Sf(t)?If(t):Bo(t).r_()&&Tf(t,e))}function wf(r,e){const t=Ce(r),s=Bo(t);t.N_.delete(e),s.r_()&&v_(t,e),t.N_.size===0&&(s.r_()?s.o_():Ns(t)&&t.q_.set("Unknown"))}function Tf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(r).A_(e)}function v_(r,e){r.Q_.xe(e),Bo(r).R_(e)}function If(r){r.Q_=new oR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.q_.v_()}function Sf(r){return Ns(r)&&!Bo(r).n_()&&r.N_.size>0}function Ns(r){return Ce(r).L_.size===0}function __(r){r.Q_=void 0}async function oC(r){r.q_.set("Online")}async function aC(r){r.N_.forEach((e,t)=>{Tf(r,e)})}async function lC(r,e){__(r),Sf(r)?(r.q_.M_(e),If(r)):r.q_.set("Unknown")}async function uC(r,e,t){if(r.q_.set("Online"),e instanceof s_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))}(r,e)}catch(s){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zu(r,s)}else if(e instanceof Mu?r.Q_.Ke(e):e instanceof i_?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Re.min()))try{const s=await p_(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.Q_.rt(h);return f.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.N_.get(v);w&&l.N_.set(v,w.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,v)=>{const w=l.N_.get(g);if(!w)return;l.N_.set(g,w.withResumeToken(Ut.EMPTY_BYTE_STRING,w.snapshotVersion)),v_(l,g);const T=new Ni(w.target,g,v,w.sequenceNumber);Tf(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){de("RemoteStore","Failed to raise snapshot:",s),await Zu(r,s)}}async function Zu(r,e,t){if(!il(e))throw e;r.L_.add(1),await al(r),r.q_.set("Offline"),t||(t=()=>p_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await yc(r)})}function E_(r,e){return e().catch(t=>Zu(r,t,e))}async function vc(r){const e=Ce(r),t=ji(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cC(e);)try{const o=await KR(e.localStore,s);if(o===null){e.O_.length===0&&t.o_();break}s=o.batchId,hC(e,o)}catch(o){await Zu(e,o)}w_(e)&&T_(e)}function cC(r){return Ns(r)&&r.O_.length<10}function hC(r,e){r.O_.push(e);const t=ji(r);t.r_()&&t.V_&&t.m_(e.mutations)}function w_(r){return Ns(r)&&!ji(r).n_()&&r.O_.length>0}function T_(r){ji(r).start()}async function dC(r){ji(r).p_()}async function fC(r){const e=ji(r);for(const t of r.O_)e.m_(t.mutations)}async function pC(r,e,t){const s=r.O_.shift(),o=mf.from(s,e,t);await E_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await vc(r)}async function mC(r,e){e&&ji(r).V_&&await async function(s,o){if(function(h){return rR(h)&&h!==Y.ABORTED}(o.code)){const l=s.O_.shift();ji(s).s_(),await E_(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await vc(s)}}(r,e),w_(r)&&T_(r)}async function ly(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const s=Ns(t);t.L_.add(3),await al(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yc(t)}async function gC(r,e){const t=Ce(r);e?(t.L_.delete(2),await yc(t)):e||(t.L_.add(2),await al(t),t.q_.set("Unknown"))}function Bo(r){return r.K_||(r.K_=function(t,s,o){const l=Ce(t);return l.w_(),new tC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:oC.bind(null,r),Ro:aC.bind(null,r),mo:lC.bind(null,r),d_:uC.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),Sf(r)?If(r):r.q_.set("Unknown")):(await r.K_.stop(),__(r))})),r.K_}function ji(r){return r.U_||(r.U_=function(t,s,o){const l=Ce(t);return l.w_(),new nC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dC.bind(null,r),mo:mC.bind(null,r),f_:fC.bind(null,r),g_:pC.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await vc(r)):(await r.U_.stop(),r.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Af(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(r,e){if(Hr("AsyncQueue",`${e}: ${r}`),il(r))return new ye(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=ka(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new So(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new So;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.W_=new ot(Ee.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Do{constructor(e,t,s,o,l,h,f,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new Do(e,t,So.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vC{constructor(){this.queries=cy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const o=Ce(t),l=o.queries;o.queries=cy(),l.forEach((h,f)=>{for(const g of f.j_)g.onError(s)})})(this,new ye(Y.ABORTED,"Firestore shutting down"))}}function cy(){return new jo(r=>Hv(r),hc)}async function I_(r,e){const t=Ce(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(s=2):(l=new yC,s=e.J_()?0:1);try{switch(s){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Rf(h,`Initialization of query '${go(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Cf(t)}async function S_(r,e){const t=Ce(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function _C(r,e){const t=Ce(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.j_)f.X_(o)&&(s=!0);h.z_=o}}s&&Cf(t)}function EC(r,e,t){const s=Ce(r),o=s.queries.get(e);if(o)for(const l of o.j_)l.onError(t);s.queries.delete(e)}function Cf(r){r.Y_.forEach(e=>{e.next()})}var bd,hy;(hy=bd||(bd={})).ea="default",hy.Cache="cache";class A_{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Do(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.key=e}}class C_{constructor(e){this.key=e}}class wC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=qv(e),this.Ra=new So(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new uy,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const k=o.get(w),B=dc(this.query,T)?T:null,q=!!k&&this.mutatedKeys.has(k.key),H=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let F=!1;k&&B?k.data.isEqual(B.data)?q!==H&&(s.track({type:3,doc:B}),F=!0):this.ga(k,B)||(s.track({type:2,doc:B}),F=!0,(g&&this.Aa(B,g)>0||v&&this.Aa(B,v)<0)&&(f=!0)):!k&&B?(s.track({type:0,doc:B}),F=!0):k&&!B&&(s.track({type:1,doc:k}),F=!0,(g||v)&&(f=!0)),F&&(B?(h=h.add(B),l=H?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{Ra:h,fa:s,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((w,T)=>function(B,q){const H=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return H(B)-H(q)}(w.type,T.type)||this.Aa(w.doc,T.doc)),this.pa(s),o=o!=null&&o;const f=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,v=g!==this.Ea;return this.Ea=g,h.length!==0||v?{snapshot:new Do(this.query,e.Ra,l,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const t=[];return e.forEach(s=>{this.da.has(s)||t.push(new C_(s))}),this.da.forEach(s=>{e.has(s)||t.push(new R_(s))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Do.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class TC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class IC{constructor(e){this.key=e,this.va=!1}}class SC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new jo(f=>Hv(f),hc),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(Ee.comparator),this.Na=new Map,this.La=new vf,this.Ba={},this.ka=new Map,this.qa=No.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AC(r,e,t=!0){const s=O_(r);let o;const l=s.Fa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await P_(s,e,t,!0),o}async function RC(r,e){const t=O_(r);await P_(t,e,!0,!1)}async function P_(r,e,t,s){const o=await GR(r.localStore,yr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await CC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&y_(r.remoteStore,o),f}async function CC(r,e,t,s,o){r.Ka=(T,k,B)=>async function(H,F,ne,oe){let ae=F.view.ma(ne);ae.ns&&(ae=await sy(H.localStore,F.query,!1).then(({documents:N})=>F.view.ma(N,ae)));const we=oe&&oe.targetChanges.get(F.targetId),Me=oe&&oe.targetMismatches.get(F.targetId)!=null,ke=F.view.applyChanges(ae,H.isPrimaryClient,we,Me);return fy(H,F.targetId,ke.wa),ke.snapshot}(r,T,k,B);const l=await sy(r.localStore,e,!0),h=new wC(e,l.Ts),f=h.ma(l.documents),g=ol.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=h.applyChanges(f,r.isPrimaryClient,g);fy(r,t,v.wa);const w=new TC(e,t,h);return r.Fa.set(e,w),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),v.snapshot}async function PC(r,e,t){const s=Ce(r),o=s.Fa.get(e),l=s.Ma.get(o.targetId);if(l.length>1)return s.Ma.set(o.targetId,l.filter(h=>!hc(h,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Md(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&wf(s.remoteStore,o.targetId),Fd(s,o.targetId)}).catch(rl)):(Fd(s,o.targetId),await Md(s.localStore,o.targetId,!0))}async function kC(r,e){const t=Ce(r),s=t.Fa.get(e),o=t.Ma.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wf(t.remoteStore,s.targetId))}async function xC(r,e,t){const s=bC(r);try{const o=await function(h,f){const g=Ce(h),v=It.now(),w=f.reduce((B,q)=>B.add(q.key),Oe());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=qr(),H=Oe();return g.cs.getEntries(B,w).next(F=>{q=F,q.forEach((ne,oe)=>{oe.isValidDocument()||(H=H.add(ne))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,q)).next(F=>{T=F;const ne=[];for(const oe of f){const ae=JA(oe,T.get(oe.key).overlayedDocument);ae!=null&&ne.push(new $i(oe.key,ae,Fv(ae.value.mapValue),tr.exists(!0)))}return g.mutationQueue.addMutationBatch(B,v,ne,f)}).next(F=>{k=F;const ne=F.applyToLocalDocumentSet(T,H);return g.documentOverlayCache.saveOverlays(B,F.batchId,ne)})}).then(()=>({batchId:k.batchId,changes:Gv(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let v=h.Ba[h.currentUser.toKey()];v||(v=new ot(ze)),v=v.insert(f,g),h.Ba[h.currentUser.toKey()]=v}(s,o.batchId,t),await ll(s,o.changes),await vc(s.remoteStore)}catch(o){const l=Rf(o,"Failed to persist write");t.reject(l)}}async function k_(r,e){const t=Ce(r);try{const s=await HR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Na.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?He(h.va):o.removedDocuments.size>0&&(He(h.va),h.va=!1))}),await ll(t,s,e)}catch(s){await rl(s)}}function dy(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Fa.forEach((l,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Ce(h);g.onlineState=f;let v=!1;g.queries.forEach((w,T)=>{for(const k of T.j_)k.Z_(f)&&(v=!0)}),v&&Cf(g)}(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function NC(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Na.get(e),l=o&&o.key;if(l){let h=new ot(Ee.comparator);h=h.insert(l,qt.newNoDocument(l,Re.min()));const f=Oe().add(l),g=new mc(Re.min(),new Map,new ot(ze),h,f);await k_(s,g),s.Oa=s.Oa.remove(l),s.Na.delete(e),Pf(s)}else await Md(s.localStore,e,!1).then(()=>Fd(s,e,t)).catch(rl)}async function DC(r,e){const t=Ce(r),s=e.batch.batchId;try{const o=await WR(t.localStore,e);N_(t,s,null),x_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ll(t,o)}catch(o){await rl(o)}}async function OC(r,e,t){const s=Ce(r);try{const o=await function(h,f){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return g.mutationQueue.lookupMutationBatch(v,f).next(T=>(He(T!==null),w=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>g.localDocuments.getDocuments(v,w))})}(s.localStore,e);N_(s,e,t),x_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ll(s,o)}catch(o){await rl(o)}}function x_(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function N_(r,e,t){const s=Ce(r);let o=s.Ba[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function Fd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Ma.get(e))r.Fa.delete(s),t&&r.Ca.$a(s,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(s=>{r.La.containsKey(s)||D_(r,s)})}function D_(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(wf(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Pf(r))}function fy(r,e,t){for(const s of t)s instanceof R_?(r.La.addReference(s.key,e),VC(r,s)):s instanceof C_?(de("SyncEngine","Document no longer in limbo: "+s.key),r.La.removeReference(s.key,e),r.La.containsKey(s.key)||D_(r,s.key)):Ae()}function VC(r,e){const t=e.key,s=t.path.canonicalString();r.Oa.get(t)||r.xa.has(s)||(de("SyncEngine","New document in limbo: "+t),r.xa.add(s),Pf(r))}function Pf(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new Ee(nt.fromString(e)),s=r.qa.next();r.Na.set(s,new IC(t)),r.Oa=r.Oa.insert(t,s),y_(r.remoteStore,new Ni(yr(df(t.path)),s,"TargetPurposeLimboResolution",of.oe))}}async function ll(r,e,t){const s=Ce(r),o=[],l=[],h=[];s.Fa.isEmpty()||(s.Fa.forEach((f,g)=>{h.push(s.Ka(g,e,t).then(v=>{var w;if((v||t)&&s.isPrimaryClient){const T=v?!v.fromCache:(w=t?.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Ef.Wi(g.targetId,v);l.push(T)}}))}),await Promise.all(h),s.Ca.d_(o),await async function(g,v){const w=Ce(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>X.forEach(v,k=>X.forEach(k.$i,B=>w.persistence.referenceDelegate.addReference(T,k.targetId,B)).next(()=>X.forEach(k.Ui,B=>w.persistence.referenceDelegate.removeReference(T,k.targetId,B)))))}catch(T){if(!il(T))throw T;de("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const k=T.targetId;if(!T.fromCache){const B=w.os.get(k),q=B.snapshotVersion,H=B.withLastLimboFreeSnapshotVersion(q);w.os=w.os.insert(k,H)}}}(s.localStore,l))}async function LC(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const s=await f_(t.localStore,e);t.currentUser=e,function(l,h){l.ka.forEach(f=>{f.forEach(g=>{g.reject(new ye(Y.CANCELLED,h))})}),l.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ll(t,s.hs)}}function MC(r,e){const t=Ce(r),s=t.Na.get(e);if(s&&s.va)return Oe().add(s.key);{let o=Oe();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const f=t.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function O_(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=k_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NC.bind(null,e),e.Ca.d_=_C.bind(null,e.eventManager),e.Ca.$a=EC.bind(null,e.eventManager),e}function bC(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OC.bind(null,e),e}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return $R(this.persistence,new BR,e.initialUser,this.serializer)}Ga(e){return new FR(_f.Zr,this.serializer)}Wa(e){return new YR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class Ud{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>dy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await gC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vC}()}createDatastore(e){const t=gc(e.databaseInfo.databaseId),s=function(l){return new eC(l)}(e.databaseInfo);return function(l,h,f,g){return new rC(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new sC(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>dy(this.syncEngine,t,0),function(){return ay.D()?new ay:new XR}())}createSyncEngine(e,t){return function(o,l,h,f,g,v,w){const T=new SC(o,l,h,f,g,v);return w&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ce(o);de("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await al(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ud.provider={build:()=>new Ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{de("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(de("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Rf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function fd(r,e){r.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await f_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function py(r,e){r.asyncQueue.verifyOperationInProgress();const t=await UC(r);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>ly(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>ly(e.remoteStore,o)),r._onlineComponents=e}async function UC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await fd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),await fd(r,new ec)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await fd(r,new ec);return r._offlineComponents}async function L_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await py(r,r._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await py(r,new Ud))),r._onlineComponents}function jC(r){return L_(r).then(e=>e.syncEngine)}async function M_(r){const e=await L_(r),t=e.eventManager;return t.onListen=AC.bind(null,e.syncEngine),t.onUnlisten=PC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kC.bind(null,e.syncEngine),t}function BC(r,e,t={}){const s=new zr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,v){const w=new V_({next:k=>{w.Za(),h.enqueueAndForget(()=>S_(l,T));const B=k.docs.has(f);!B&&k.fromCache?v.reject(new ye(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&k.fromCache&&g&&g.source==="server"?v.reject(new ye(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(k)},error:k=>v.reject(k)}),T=new A_(df(f.path),w,{includeMetadataChanges:!0,_a:!0});return I_(l,T)}(await M_(r),r.asyncQueue,e,t,s)),s.promise}function zC(r,e,t={}){const s=new zr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,v){const w=new V_({next:k=>{w.Za(),h.enqueueAndForget(()=>S_(l,T)),k.fromCache&&g.source==="server"?v.reject(new ye(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(k)},error:k=>v.reject(k)}),T=new A_(f,w,{includeMetadataChanges:!0,_a:!0});return I_(l,T)}(await M_(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(r,e,t){if(!t)throw new ye(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $C(r,e,t,s){if(e===!0&&s===!0)throw new ye(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function gy(r){if(!Ee.isDocumentKey(r))throw new ye(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yy(r){if(Ee.isDocumentKey(r))throw new ye(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae()}function Kr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kf(r);throw new ye(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$C("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vy(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new sA;switch(s.type){case"firstParty":return new uA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=my.get(t);s&&(de("ComponentProvider","Removing Datastore"),my.delete(t),s.terminate())}(this),Promise.resolve()}}function WC(r,e,t,s={}){var o;const l=(r=Kr(r,_c))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let f,g;if(typeof s.mockUserToken=="string")f=s.mockUserToken,g=Ht.MOCK_USER;else{f=I0(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ye(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ht(v)}r._authCredentials=new oA(new Vv(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ec(this.firestore,e,this._query)}}class En{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class bi extends Ec{constructor(e,t,s){super(e,t,df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Ee(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function er(r,e,...t){if(r=Ft(r),F_("collection","path",e),r instanceof _c){const s=nt.fromString(e,...t);return yy(s),new bi(r,null,s)}{if(!(r instanceof En||r instanceof bi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...t));return yy(s),new bi(r.firestore,null,s)}}function Ai(r,e,...t){if(r=Ft(r),arguments.length===1&&(e=Lv.newId()),F_("doc","path",e),r instanceof _c){const s=nt.fromString(e,...t);return gy(s),new En(r,null,new Ee(s))}{if(!(r instanceof En||r instanceof bi))throw new ye(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(nt.fromString(e,...t));return gy(s),new En(r.firestore,r instanceof bi?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new m_(this,"async_queue_retry"),this.Vu=()=>{const s=dd();s&&de("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new zr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!il(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(s);throw Hr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.du=!1,s))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Af.createAndSchedule(this,e,t,s,l=>this.yu(l));return this.Tu.push(o),o}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class zo extends _c{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new _y,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _y(e),this._firestoreClient=void 0,await e}}}function HC(r,e){const t=typeof r=="object"?r:Wy(),s=typeof r=="string"?r:"(default)",o=Gd(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=w0("firestore");l&&WC(o,...l)}return o}function xf(r){if(r._terminated)throw new ye(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||qC(r),r._firestoreClient}function qC(r){var e,t,s;const o=r._freezeSettings(),l=function(f,g,v,w){return new TA(f,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,b_(w.experimentalLongPollingOptions),w.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new FC(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f?._online.build();return{_offline:f?._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oo(Ut.fromBase64String(e))}catch(t){throw new ye(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oo(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^__.*__$/;class GC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}class U_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Of{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(j_(this.Cu)&&KC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||gc(e)}Qu(e,t,s,o=!1){return new Of({Cu:e,methodName:t,qu:s,path:Mt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function B_(r){const e=r._freezeSettings(),t=gc(r._databaseId);return new QC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function YC(r,e,t,s,o,l={}){const h=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);Lf("Data must be an object, but it was:",h,s);const f=z_(s,h);let g,v;if(l.merge)g=new _n(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const k=jd(e,T,t);if(!h.contains(k))throw new ye(Y.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);W_(w,k)||w.push(k)}g=new _n(w),v=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=h.fieldTransforms;return new GC(new ln(f),g,v)}class Ic extends Tc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ic}}class Vf extends Tc{_toFieldTransform(e){return new GA(e.path,new Ga)}isEqual(e){return e instanceof Vf}}function XC(r,e,t,s){const o=r.Qu(1,e,t);Lf("Data must be an object, but it was:",o,s);const l=[],h=ln.empty();xs(s,(g,v)=>{const w=Mf(e,g,t);v=Ft(v);const T=o.Nu(w);if(v instanceof Ic)l.push(w);else{const k=Sc(v,T);k!=null&&(l.push(w),h.set(w,k))}});const f=new _n(l);return new U_(h,f,o.fieldTransforms)}function JC(r,e,t,s,o,l){const h=r.Qu(1,e,t),f=[jd(e,s,t)],g=[o];if(l.length%2!=0)throw new ye(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)f.push(jd(e,l[k])),g.push(l[k+1]);const v=[],w=ln.empty();for(let k=f.length-1;k>=0;--k)if(!W_(v,f[k])){const B=f[k];let q=g[k];q=Ft(q);const H=h.Nu(B);if(q instanceof Ic)v.push(B);else{const F=Sc(q,H);F!=null&&(v.push(B),w.set(B,F))}}const T=new _n(v);return new U_(w,T,h.fieldTransforms)}function Sc(r,e){if($_(r=Ft(r)))return Lf("Unsupported field value:",e,r),z_(r,e);if(r instanceof Tc)return function(s,o){if(!j_(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let g=Sc(f,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=Ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=It.fromDate(s);return{timestampValue:Ju(o.serializer,l)}}if(s instanceof It){const l=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ju(o.serializer,l)}}if(s instanceof Nf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Oo)return{bytesValue:o_(o.serializer,s._byteString)};if(s instanceof En){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Df)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return ff(f.serializer,g)})}}}}}}(s,o);throw o.Bu(`Unsupported field value: ${kf(s)}`)}(r,e)}function z_(r,e){const t={};return Mv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(r,(s,o)=>{const l=Sc(o,e.Mu(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function $_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof It||r instanceof Nf||r instanceof Oo||r instanceof En||r instanceof Tc||r instanceof Df)}function Lf(r,e,t){if(!$_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=kf(t);throw s==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+s)}}function jd(r,e,t){if((e=Ft(e))instanceof wc)return e._internalPath;if(typeof e=="string")return Mf(r,e);throw tc("Field path arguments must be of type string or ",r,!1,void 0,t)}const ZC=new RegExp("[~\\*/\\[\\]]");function Mf(r,e,t){if(e.search(ZC)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new wc(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function tc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ye(Y.INVALID_ARGUMENT,f+r+g)}function W_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(q_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eP extends H_{data(){return super.data()}}function q_(r,e){return typeof e=="string"?Mf(r,e):e instanceof wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nP{convertValue(e,t="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xs(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>ht(h.doubleValue));return new Df(l)}convertGeoPoint(e){return new Nf(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=lf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const t=Ui(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=nt.fromString(e);He(d_(s));const o=new qa(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||Hr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class K_ extends H_{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(q_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class bu extends K_{data(e={}){return super.data(e)}}class iP{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Na(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new bu(this._firestore,this._userDataWriter,s.key,s,new Na(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return f.type!==0&&(v=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:sP(f.type),doc:g,oldIndex:v,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(r){r=Kr(r,En);const e=Kr(r.firestore,zo);return BC(xf(e),r._key).then(t=>oP(e,r,t))}class Q_ extends nP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function Eo(r){r=Kr(r,Ec);const e=Kr(r.firestore,zo),t=xf(e),s=new Q_(e);return tP(r._query),zC(t,r._query).then(o=>new iP(e,s,r,o))}function Ey(r,e,t,...s){r=Kr(r,En);const o=Kr(r.firestore,zo),l=B_(o);let h;return h=typeof(e=Ft(e))=="string"||e instanceof wc?JC(l,"updateDoc",r._key,e,t,s):XC(l,"updateDoc",r._key,e),bf(o,[h.toMutation(r._key,tr.exists(!0))])}function pd(r){return bf(Kr(r.firestore,zo),[new pf(r._key,tr.none())])}function ba(r,e){const t=Kr(r.firestore,zo),s=Ai(r),o=rP(r.converter,e);return bf(t,[YC(B_(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,tr.exists(!1))]).then(()=>s)}function bf(r,e){return function(s,o){const l=new zr;return s.asyncQueue.enqueueAndForget(async()=>xC(await jC(s),o,l)),l.promise}(xf(r),e)}function oP(r,e,t){const s=t.docs.get(e._key),o=new Q_(r);return new K_(r,o,e._key,s,new Na(t.hasPendingWrites,t.fromCache),e.converter)}function aP(){return new Vf("serverTimestamp")}(function(e,t=!0){(function(o){Uo=o})(Mo),Ao(new Ss("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new zo(new aA(s.getProvider("auth-internal")),new hA(s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ye(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(v.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),Li(Fg,"4.7.3",e),Li(Fg,"4.7.3","esm2017")})();const lP={apiKey:"AIzaSyBodjvkUxH7Jw0YsRk78YYHllENNqI2WCo",authDomain:"physioprescription-98af8.firebaseapp.com",projectId:"physioprescription-98af8",storageBucket:"physioprescription-98af8.firebasestorage.app",messagingSenderId:"802876183212",appId:"1:802876183212:web:93c6e93334a4c63f6c4509"},Y_=$y(lP),kt=HC(Y_);$a(Y_);function Fu(r){if(!r)return null;let e=r.match(/(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([A-Za-z0-9_-]{11})/);return e&&e[1]||(e=r.match(/[?&]v=([A-Za-z0-9_-]{11})/),e&&e[1])?e[1]:null}function X_(){const[r,e]=K.useState(""),[t,s]=K.useState(""),[o,l]=K.useState([{title:"",videoUrl:"",reps:"",notes:""}]),[h,f]=K.useState([]),[g,v]=K.useState(null),[w,T]=K.useState(!1),[k,B]=K.useState([]),[q,H]=K.useState(!1),[F,ne]=K.useState(""),[oe,ae]=K.useState(""),[we,Me]=K.useState(""),[ke,N]=K.useState(""),[I,R]=K.useState(""),[x,O]=K.useState([]),[L,A]=K.useState(!1),[rt,St]=K.useState(""),[yt,$e]=K.useState(!1),[te,me]=K.useState([]),[ie,V]=K.useState(!1),[W,pe]=K.useState([]),[xe,Pe]=K.useState([]),[Te,Ne]=K.useState("create"),[be,qe]=K.useState([]),[ft,wn]=K.useState(!1),[rr,Ln]=K.useState(!1),[un,ir]=K.useState(null);K.useEffect(()=>{Te==="saved"||Te==="create"?sr():Te==="patients"?bn():Te==="exercises"?In():Te==="feedback"&&lt()},[Te]),K.useEffect(()=>{bn(),In()},[]);const[Mn,Wi]=K.useState(null),[Yr,Xr]=K.useState(!1),Tn=rc();K.useEffect(()=>{const $=$a(),re=HI($,ge=>{Wi(ge),Xr(!0)});return()=>re()},[]);const cn="dr.unnatilodha@gmail.com";if(K.useEffect(()=>{Yr&&(!Mn||Mn.email!==cn)&&Tn("/admin-login",{replace:!0})},[Yr,Mn,Tn,cn]),!Yr)return P.jsx("div",{children:"Loading..."});if(!Mn||Mn.email!==cn)return null;function vt($){St($),$e(!0),setTimeout(()=>$e(!1),2500)}async function sr(){T(!0);try{const re=(await Eo(er(kt,"prescriptions"))).docs.map(ge=>({id:ge.id,...ge.data()}));re.sort((ge,ce)=>ge.date?ce.date?ce.date.localeCompare(ge.date):-1:1),f(re)}catch($){console.error("Error fetching prescriptions",$)}finally{T(!1)}}async function bn(){H(!0);try{const re=(await Eo(er(kt,"patients"))).docs.map(ge=>({id:ge.id,...ge.data()}));B(re)}catch($){console.error("Error fetching patients",$)}finally{H(!1)}}async function In(){A(!0);try{const re=(await Eo(er(kt,"exercises"))).docs.map(ge=>({id:ge.id,...ge.data()}));O(re)}catch($){console.error("Error fetching exercises",$)}finally{A(!1)}}async function lt(){wn(!0);try{let re=(await Eo(er(kt,"feedback"))).docs.map(ge=>({id:ge.id,...ge.data(),createdAt:ge.data().createdAt?typeof ge.data().createdAt.toDate=="function"?ge.data().createdAt.toDate():new Date(ge.data().createdAt):null}));re.sort((ge,ce)=>(ce.createdAt?.getTime?.()||0)-(ge.createdAt?.getTime?.()||0)),qe(re)}catch($){console.error("Error fetching feedback",$)}finally{wn(!1)}}async function ut($){if($.preventDefault(),!F.trim()){alert("Patient name is required");return}try{await ba(er(kt,"patients"),{name:F,email:oe,phone:we,createdAt:new Date().toISOString()}),ne(""),ae(""),Me(""),bn(),vt("Patient created successfully")}catch(re){console.error("Error creating patient",re),vt("Failed to create patient. Please try again.")}}async function Fn($){if(window.confirm("Delete this patient? This will not delete their prescriptions."))try{await pd(Ai(kt,"patients",$)),bn()}catch(re){console.error("Delete patient failed",re),vt("Failed to delete patient. Please try again.")}}function Hi(){l($=>[...$,{title:"",videoUrl:"",reps:"",notes:""}])}function hn($,re,ge){if(l(ce=>ce.map((Ge,Xe)=>Xe===$?{...Ge,[re]:ge}:Ge)),re==="title"){const ce=x.filter(Ge=>Ge.name.toLowerCase().includes(ge.toLowerCase())).slice(0,5);pe(Ge=>{const Xe=[...Ge];return Xe[$]=ce,Xe}),Pe(Ge=>{const Xe=[...Ge];return Xe[$]=ce.length>0&&ge.length>0,Xe})}}function wr($){l(re=>re.filter((ge,ce)=>ce!==$))}function Tr($){const re=$.target.value;if(e(re),re.length===0){me([]),V(!1);return}const ge=k.filter(ce=>ce.name.toLowerCase().startsWith(re.toLowerCase())).slice(0,5);me(ge),V(ge.length>0)}function qi($){e($),me([]),V(!1)}function Ki(){if(!r.trim())return alert("Patient name is required"),!1;for(let $=0;$<o.length;$++){const re=o[$];if(!re.title.trim())return alert(`Exercise ${$+1}: Title is required`),!1;if(re.videoUrl.trim()&&!Fu(re.videoUrl))return alert(`Exercise ${$+1}: Invalid YouTube URL`),!1}return!0}function Gi(){return{patientName:r,date:t,exercises:o.map($=>({title:$.title||"Exercise",videoUrl:$.videoUrl||"",reps:$.reps||"",notes:$.notes||""})),updatedAt:new Date().toISOString()}}async function Qi(){if(!(!ke.trim()||!I.trim()))try{await ba(er(kt,"exercises"),{name:ke.trim(),url:I.trim(),createdAt:new Date().toISOString()}),N(""),R(""),In(),vt("Exercise added!")}catch($){console.error("Error adding exercise",$),vt("Failed to add exercise.")}}async function Yi($){if($.preventDefault(),!Ki())return;const re=Gi();try{g?(await Ey(Ai(kt,"prescriptions",g),re),v(null)):await ba(er(kt,"prescriptions"),re),Un(),sr(),Ne("saved")}catch(ge){console.error("Save failed",ge),alert("Failed to save prescription. Please try again.")}}function Un(){e(""),s(""),l([{title:"",videoUrl:"",reps:"",notes:""}]),v(null)}async function Jr($){try{const re=await G_(Ai(kt,"prescriptions",$));if(!re.exists()){alert("Prescription not found");return}const ge=re.data();e(ge.patientName||""),s(ge.date||""),l(ge.exercises||[{title:"",videoUrl:"",reps:"",notes:""}]),v($),Ne("create"),window.scrollTo({top:0,behavior:"smooth"})}catch(re){console.error("Edit failed",re),vt("Failed to load prescription. Please try again.")}}async function Zr($){if(window.confirm("Delete this prescription?"))try{await pd(Ai(kt,"prescriptions",$)),sr()}catch(re){console.error("Delete failed",re),vt("Failed to delete prescription. Please try again.")}}function Jt($,re){const ge=re.trim().toLowerCase().replace(/\s+/g,"-"),ce=`${window.location.origin}/${ge}/prescription/${$}`;navigator.clipboard.writeText(ce),vt("Link copied to clipboard!")}async function Sn($){if(window.confirm("Delete this exercise?"))try{await pd(Ai(kt,"exercises",$)),In(),vt("Exercise deleted!")}catch(re){console.error("Error deleting exercise",re),vt("Failed to delete exercise.")}}async function ei($){ir($.id),N($.name),R($.url)}async function An(){if(un)try{await Ey(Ai(kt,"exercises",un),{name:ke.trim(),url:I.trim()}),ir(null),N(""),R(""),In(),vt("Exercise updated!")}catch($){console.error("Error updating exercise",$),vt("Failed to update exercise.")}}function Xi($,re){l(ge=>ge.map((ce,Ge)=>Ge===$?{...ce,title:re.name,videoUrl:re.url}:ce)),Pe(ge=>{const ce=[...ge];return ce[$]=!1,ce})}function Ir(){const $=$a();gv($).then(()=>{window.location.href="/admin-login"})}return P.jsxs("div",{className:`admin-dashboard${rr?" sidebar-open":""}`,children:[yt&&P.jsx("div",{style:{position:"fixed",bottom:"30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"10px 20px",borderRadius:"8px",fontWeight:"600",zIndex:9999,opacity:yt?1:0,transition:"opacity 0.3s ease",pointerEvents:"none"},children:rt}),P.jsxs("aside",{className:`sidebar${rr?" open":""}`,children:[P.jsx("button",{className:"sidebar-close-btn",onClick:()=>Ln(!1),"aria-label":"Close sidebar",children:"×"}),P.jsx("button",{className:Te==="create"?"active":"",onClick:()=>{Ne("create"),Un()},children:"Create Prescription"}),P.jsx("button",{className:Te==="saved"?"active":"",onClick:()=>Ne("saved"),children:"Saved Prescriptions"}),P.jsx("button",{className:Te==="patients"?"active":"",onClick:()=>Ne("patients"),children:"Patients"}),P.jsx("button",{className:Te==="exercises"?"active":"",onClick:()=>Ne("exercises"),children:"Exercises"}),P.jsx("button",{className:Te==="feedback"?"active":"",onClick:()=>Ne("feedback"),children:"Feedback"})]}),P.jsxs("header",{className:"header-bar",children:[P.jsx("button",{className:"sidebar-toggle-btn",onClick:()=>Ln(!rr),"aria-label":"Open sidebar",children:P.jsx("span",{className:"sidebar-hamburger"})}),"Physio Prescriptions Admin",P.jsx("button",{onClick:Ir,style:{marginLeft:"auto",background:"#e74c3c",color:"white",border:"none",borderRadius:6,padding:"6px 16px",fontWeight:600,cursor:"pointer"},children:"Sign Out"})]}),P.jsxs("main",{className:"content",children:[Te==="create"&&P.jsxs(P.Fragment,{children:[P.jsx("h2",{children:g?"Edit Prescription":"New Prescription"}),P.jsxs("form",{onSubmit:Yi,className:"card",autoComplete:"off",children:[P.jsxs("label",{style:{position:"relative"},children:["Patient name",P.jsx("input",{value:r,onChange:Tr,onBlur:()=>setTimeout(()=>V(!1),200),onFocus:()=>r&&te.length>0&&V(!0),required:!0,autoComplete:"off"}),ie&&P.jsx("ul",{className:"suggestions-list",children:te.map($=>P.jsx("li",{onClick:()=>qi($.name),children:$.name},$.id))})]}),P.jsxs("label",{children:["Date",P.jsx("input",{type:"date",value:t,onChange:$=>s($.target.value)})]}),P.jsx("h4",{children:"Exercises"}),o.map(($,re)=>{const ge=Fu($.videoUrl);return P.jsxs("div",{className:"exercise-row",style:{position:"relative",display:"flex",flexDirection:"column",gap:8,marginBottom:16,padding:12,border:"1px solid #e0e0e0",borderRadius:8,backgroundColor:"#f9f9f9"},children:[P.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[P.jsx("input",{placeholder:"Title",value:$.title,onChange:ce=>hn(re,"title",ce.target.value),onFocus:()=>{if($.title){const ce=x.filter(Ge=>Ge.name.toLowerCase().includes($.title.toLowerCase())).slice(0,5);pe(Ge=>{const Xe=[...Ge];return Xe[re]=ce,Xe}),Pe(Ge=>{const Xe=[...Ge];return Xe[re]=ce.length>0,Xe})}},onBlur:()=>setTimeout(()=>{Pe(ce=>{const Ge=[...ce];return Ge[re]=!1,Ge})},200),required:!0,autoComplete:"off",style:{flex:"2 1 200px"}}),xe[re]&&W[re]&&W[re].length>0&&P.jsx("ul",{className:"suggestions-list",style:{zIndex:10},children:W[re].map(ce=>P.jsx("li",{onClick:()=>Xi(re,ce),children:ce.name},ce.id))}),P.jsx("input",{placeholder:"YouTube URL",value:$.videoUrl,onChange:ce=>hn(re,"videoUrl",ce.target.value),style:{flex:"2 1 200px"}}),P.jsx("input",{placeholder:"Reps / sets",value:$.reps,onChange:ce=>hn(re,"reps",ce.target.value),style:{flex:"1 1 100px"}}),P.jsx("button",{type:"button",onClick:()=>wr(re),className:"small",style:{backgroundColor:"#e74c3c",color:"white",padding:"6px 12px",borderRadius:4},children:"Remove"})]}),P.jsxs("div",{style:{marginTop:8},children:[P.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:"#555",marginBottom:4,display:"block"},children:"Notes for this exercise:"}),P.jsx("textarea",{placeholder:"Add specific notes for this exercise...",value:$.notes,onChange:ce=>hn(re,"notes",ce.target.value),style:{width:"100%",minHeight:"60px",padding:"8px",border:"1px solid #ccc",borderRadius:4,resize:"vertical",fontSize:"14px"}})]}),ge&&P.jsx("iframe",{width:"100%",height:"300",src:`https://www.youtube.com/embed/${ge}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`Exercise Video ${re+1}`,style:{borderRadius:6,marginTop:8,maxWidth:"400px"}})]},re)}),P.jsx("button",{type:"button",onClick:Hi,className:"add-exercise-btn",children:"Add Exercise"}),P.jsxs("div",{className:"form-buttons",children:[P.jsx("button",{type:"submit",children:g?"Update Prescription":"Create Prescription"}),P.jsx("button",{type:"button",onClick:Un,className:"secondary",children:"Clear"})]})]})]}),Te==="saved"&&P.jsxs(P.Fragment,{children:[P.jsx("h2",{children:"Saved Prescriptions"}),w?P.jsx("p",{children:"Loading prescriptions..."}):h.length===0?P.jsx("p",{children:"No prescriptions yet"}):h.map($=>P.jsxs("div",{className:"card small",children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[P.jsxs("div",{children:[P.jsx("strong",{children:$.patientName})," ",P.jsxs("span",{className:"muted",children:["(",$.date||"no date",")"]}),P.jsx("br",{}),P.jsxs("span",{className:"muted",children:["ID: ",$.id]}),P.jsx("br",{}),P.jsxs("small",{className:"muted",children:["Updated: ",$.updatedAt?new Date($.updatedAt).toLocaleString():"—"]})]}),P.jsxs("div",{style:{display:"flex",gap:8},children:[P.jsx("button",{onClick:()=>Jr($.id),children:"Edit"}),P.jsx("button",{onClick:()=>Jt($.id,$.patientName),children:"Copy Link"}),P.jsx("button",{onClick:()=>Zr($.id),className:"danger",children:"Delete"})]})]}),P.jsx("div",{style:{marginTop:8},children:$.exercises&&$.exercises.slice(0,2).map((re,ge)=>P.jsxs("div",{className:"muted",children:[ge+1,". ",re.title," — ",re.reps]},ge))})]},$.id))]}),Te==="patients"&&P.jsxs(P.Fragment,{children:[P.jsx("h2",{children:"Patients"}),P.jsxs("form",{onSubmit:ut,className:"card patient-form",children:[P.jsxs("label",{children:["Name",P.jsx("input",{value:F,onChange:$=>ne($.target.value),required:!0})]}),P.jsxs("label",{children:["Email",P.jsx("input",{type:"email",value:oe,onChange:$=>ae($.target.value)})]}),P.jsxs("label",{children:["Phone",P.jsx("input",{value:we,onChange:$=>Me($.target.value)})]}),P.jsx("button",{type:"submit",children:"Create Patient"})]}),P.jsx("h3",{children:"Existing Patients"}),q?P.jsx("p",{children:"Loading patients..."}):k.length===0?P.jsx("p",{children:"No patients yet."}):k.map($=>P.jsxs("div",{className:"card small",children:[P.jsx("strong",{children:$.name}),P.jsx("br",{}),$.email&&P.jsxs("span",{children:[$.email," ",P.jsx("br",{})]}),$.phone&&P.jsxs("span",{children:[$.phone," ",P.jsx("br",{})]}),P.jsx("button",{onClick:()=>Fn($.id),className:"danger small",style:{marginTop:"5px"},children:"Delete"})]},$.id))]}),Te==="exercises"&&P.jsxs(P.Fragment,{children:[P.jsx("h2",{children:"Exercises"}),P.jsxs("form",{onSubmit:$=>{$.preventDefault(),un?An():Qi()},className:"card",style:{marginBottom:"2rem"},children:[P.jsxs("label",{children:["Name",P.jsx("input",{type:"text",value:ke,onChange:$=>N($.target.value),required:!0})]}),P.jsxs("label",{children:["YouTube URL",P.jsx("input",{type:"url",value:I,onChange:$=>R($.target.value),required:!0})]}),P.jsx("button",{type:"submit",className:"add-exercise-btn",children:un?"Update Exercise":"Add Exercise"}),un&&P.jsx("button",{type:"button",className:"secondary",style:{marginLeft:10},onClick:()=>{ir(null),N(""),R("")},children:"Cancel"})]}),x.length===0?P.jsx("p",{children:"No exercises added yet."}):x.map(($,re)=>{const ge=Fu($.url),ce=ge?`https://img.youtube.com/vi/${ge}/hqdefault.jpg`:null;return P.jsxs("div",{className:"card small",style:{display:"flex",flexDirection:"column",gap:"6px"},children:[P.jsx("strong",{children:$.name}),P.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[ce?P.jsx("img",{src:ce,alt:`Thumbnail for ${$.name}`,style:{width:160,height:90,borderRadius:6,objectFit:"cover"}}):P.jsx("div",{style:{width:160,height:90,borderRadius:6,backgroundColor:"#ddd",display:"flex",justifyContent:"center",alignItems:"center",color:"#999",fontSize:14},children:"No thumbnail"}),P.jsx("button",{onClick:()=>{navigator.clipboard.writeText($.url),vt("Link copied to clipboard!")},style:{marginLeft:"auto",padding:"6px 12px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"600",userSelect:"none"},title:"Copy YouTube link",children:"Copy Link"}),P.jsx("button",{onClick:()=>ei($),style:{marginLeft:8,padding:"6px 12px",backgroundColor:"#f1c40f",color:"#222",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"600",userSelect:"none"},title:"Edit",children:"Edit"}),P.jsx("button",{onClick:()=>Sn($.id),style:{marginLeft:8,padding:"6px 12px",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"600",userSelect:"none"},title:"Delete",children:"Delete"})]})]},$.id||re)}),P.jsx("button",{onClick:async()=>{const $=await uP();alert(`${$} new exercises added from prescriptions!`),In()},style:{marginBottom:16,background:"#27ae60",color:"white",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,cursor:"pointer"},children:"Sync Exercises from Prescriptions"})]}),Te==="feedback"&&P.jsxs(P.Fragment,{children:[P.jsx("h2",{children:"Patient Feedback"}),ft?P.jsx("p",{children:"Loading feedback..."}):be.length===0?P.jsx("p",{children:"No feedback yet."}):be.map($=>P.jsx("div",{className:"card small",children:P.jsxs("div",{children:[P.jsx("strong",{children:"Patient:"})," ",$.patientName||P.jsx("span",{className:"muted",children:"Unknown"}),P.jsx("br",{}),P.jsx("strong",{children:"Prescription ID:"})," ",$.prescriptionId,P.jsx("br",{}),P.jsx("strong",{children:"Feedback:"}),P.jsx("div",{style:{margin:"6px 0"},children:$.feedbackText}),P.jsx("div",{className:"muted",style:{fontSize:13},children:$.createdAt?$.createdAt.toLocaleString():""})]})},$.id))]})]})]})}async function uP(){const r=await Eo(er(kt,"exercises")),e=new Set;r.forEach(o=>{const l=o.data();l.url&&e.add(l.url.trim())});const t=await Eo(er(kt,"prescriptions")),s=[];t.forEach(o=>{const l=o.data();Array.isArray(l.exercises)&&l.exercises.forEach(h=>{const f=h.videoUrl?.trim(),g=h.title?.trim();f&&g&&!e.has(f)&&(s.push({name:g,url:f}),e.add(f))})});for(const o of s)await ba(er(kt,"exercises"),{name:o.name,url:o.url,createdAt:new Date().toISOString()});return s.length}function cP(){return P.jsxs("div",{children:[P.jsx("h1",{children:"Physio Prescriptions"}),P.jsx("p",{children:"Use the admin dashboard to create prescriptions and share links with patients."}),P.jsx("ul",{children:P.jsx("li",{children:P.jsx(Vy,{to:"/admin",children:"Go to Admin Dashboard"})})})]})}function hP(){return P.jsx("div",{className:"container",children:P.jsxs(Oy,{children:[P.jsx(br,{path:"/",element:P.jsx(cP,{})}),P.jsx(br,{path:"/admin-login",element:P.jsx(Cv,{})}),P.jsx(br,{path:"/admin",element:P.jsx(X_,{})})]})})}function dP(){const{patientName:r,id:e}=Bw(),[t,s]=K.useState(null),[o,l]=K.useState(!0),[h,f]=K.useState(null),[g,v]=K.useState({}),[w,T]=K.useState(""),[k,B]=K.useState("");K.useEffect(()=>{if(!e)return;l(!0),(async()=>{try{const ne=await G_(Ai(kt,"prescriptions",e));ne.exists()?s({id:ne.id,...ne.data()}):(f("Prescription not found"),s(null))}catch(ne){console.error(ne),f("Failed to fetch")}finally{l(!1)}})()},[e]);const q=F=>{v(ne=>({...ne,[F]:!ne[F]}))};async function H(){if(w.trim())try{await ba(er(kt,"feedback"),{prescriptionId:e,patientName:t?.patientName||"",feedbackText:w,createdAt:aP()}),B("✅ Feedback submitted. Thank you!"),T(""),setTimeout(()=>B(""),4e3)}catch(F){console.error("Error submitting feedback:",F),B("❌ Failed to submit feedback. Try again.")}}return o?P.jsx("div",{className:"container",children:P.jsx("p",{children:"Loading…"})}):h?P.jsxs("div",{className:"container",children:[P.jsx("p",{children:h}),P.jsx(Vy,{to:"/admin",className:"secondary",children:"Back to Admin"})]}):t?P.jsxs("div",{className:"pv-bg",children:[P.jsxs("div",{className:"pv-header",children:[P.jsx("h1",{className:"pv-header-title",children:t.patientName?`Hello, ${t.patientName}`:"Your Prescription"}),P.jsx("div",{className:"pv-header-desc",children:"Your personalized physiotherapy plan"})]}),P.jsxs("div",{className:"container pv-main",children:[P.jsxs("div",{className:"card pv-summary-card",children:[P.jsxs("div",{className:"pv-summary-main",children:[P.jsxs("div",{className:"pv-summary-date",children:[P.jsx("span",{role:"img","aria-label":"calendar",children:"📅"})," Date: ",P.jsx("span",{children:t.date||"—"})]}),P.jsxs("div",{className:"pv-summary-notes",children:[P.jsx("span",{role:"img","aria-label":"note",children:"📝"})," Notes: ",P.jsx("span",{children:t.notes||"—"})]}),P.jsxs("div",{className:"pv-summary-updated",children:[P.jsx("span",{role:"img","aria-label":"clock",children:"⏱️"})," Last Updated: ",t.updatedAt?new Date(t.updatedAt).toLocaleString():"—"]})]}),P.jsxs("div",{className:"pv-summary-id",children:["Prescription ID",P.jsx("br",{}),P.jsx("span",{children:t.id})]})]}),P.jsxs("h3",{className:"pv-ex-title",children:[P.jsx("span",{role:"img","aria-label":"dumbbell",children:"🏋️‍♂️"})," Your Exercises"]}),t.exercises&&t.exercises.length>0?t.exercises.map((F,ne)=>{const oe=Fu(F.videoUrl),ae=g[ne];return P.jsxs("div",{className:"card pv-ex-card",children:[P.jsxs("div",{className:`pv-ex-row${oe?" pv-ex-row-clickable":""}`,onClick:oe?()=>q(ne):void 0,children:[P.jsxs("div",{children:[P.jsx("strong",{className:"pv-ex-title-text",children:F.title}),P.jsx("div",{className:"muted pv-ex-reps",children:F.reps}),F.notes&&P.jsxs("div",{className:"pv-ex-notes",children:[P.jsx("span",{role:"img","aria-label":"note",children:"📝"})," ",F.notes]})]}),oe&&P.jsx("button",{type:"button",className:`pv-ex-toggle-btn${ae?" open":""}`,children:ae?"Hide Video":"Show Video"})]}),ae&&oe&&P.jsx("div",{className:"pv-ex-video-wrap",children:P.jsx("iframe",{src:`https://www.youtube.com/embed/${oe}`,title:F.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),!oe&&P.jsx("div",{className:"muted pv-ex-no-video",children:"No valid YouTube URL provided."})]},ne)}):P.jsx("p",{className:"muted",style:{marginBottom:24},children:"No exercises."}),P.jsxs("div",{className:"card pv-feedback-card",children:[P.jsxs("h3",{className:"pv-feedback-title",children:[P.jsx("span",{role:"img","aria-label":"feedback",children:"💬"})," Leave Feedback"]}),P.jsx("textarea",{value:w,onChange:F=>T(F.target.value),placeholder:"Write your feedback...",rows:3,className:"pv-feedback-textarea"}),P.jsx("button",{onClick:H,className:"pv-feedback-btn",children:"Submit Feedback"}),k&&P.jsx("p",{className:"pv-feedback-status",children:k})]}),P.jsx("div",{className:"pv-footer-note",children:P.jsx("small",{className:"muted",children:"If your therapist updates this prescription, this page will show the latest version."})})]})]}):null}hw.createRoot(document.getElementById("root")).render(P.jsx(wy.StrictMode,{children:P.jsx(c0,{children:P.jsxs(Oy,{children:[P.jsx(br,{path:"/",element:P.jsx(hP,{})}),P.jsx(br,{path:"/admin-login",element:P.jsx(Cv,{})})," ",P.jsx(br,{path:"/admin/*",element:P.jsx(X_,{})}),P.jsx(br,{path:"/:patientSlug/prescription/:id",element:P.jsx(dP,{})}),P.jsx(br,{path:"*",element:P.jsx(n0,{to:"/",replace:!0})})]})})}));
